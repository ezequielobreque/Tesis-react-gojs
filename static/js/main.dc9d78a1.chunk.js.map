{"version":3,"sources":["GuidedDraggingTool.ts","components/DiagramWrapper.tsx","components/InspectorRow.tsx","components/SelectionInspector.tsx","parser/MyLex.ts","parser/myFunctions.ts","parser/errors.ts","parser/ParserGenerator.tsx","App.tsx","index.tsx","../node_modules/codemirror/mode lazy /^/.*/.js$/ groupOptions: {} namespace object"],"names":["GuidedDraggingTool","guidelineHtop","guidelineHbottom","guidelineHcenter","guidelineVleft","guidelineVright","guidelineVcenter","_guidelineSnapDistance","_isGuidelineEnabled","_horizontalGuidelineColor","_verticalGuidelineColor","_centerGuidelineColor","_guidelineWidth","_searchDistance","_isGuidelineSnapEnabled","partProperties","layerName","isInDocumentBounds","shapeProperties","stroke","isGeometryPositioned","$","go","make","geometryString","this","diagram","remove","clearGuidelines","pt","obj","draggingParts","copiedParts","draggedParts","partItr","iterator","next","part","key","showHorizontalMatches","isGuidelineEnabled","showVerticalMatches","e","console","error","lastInput","snap","isGuidelineSnapEnabled","shift","node","invalidateConnectedLinks","guideline","objBounds","locationObject","getDocumentBounds","p0","y","p1","height","p2","marginOfError","guidelineSnapDistance","distance","searchDistance","area","copy","inflate","otherObjs","findObjectsIn","p","isSelected","isTopLevel","layer","isTemporary","bestDiff","bestObj","bestSpot","Default","bestOtherSpot","each","other","otherBounds","q0","q1","q2","Math","abs","Center","Top","Bottom","offsetX","x","actualBounds","offsetY","bestBounds","x0","min","x2","max","width","bestPoint","setRectSpot","move","invalidateLinks","position","elt","add","Left","Right","y0","y2","val","isNaN","Error","elements","first","strokeWidth","DiagramWrapper","props","diagramRef","React","current","getDiagram","addDiagramListener","onDiagramEvent","removeDiagramListener","text","color","draggingTool","layout","isInitial","setsPortSpots","model","linkKeyProperty","makeUniqueKeyFunction","m","data","k","findNodeDataForKey","makeUniqueLinkKeyFunction","findLinkDataForKey","parseType","s","Horizontal","Vertical","Auto","nodeTemplate","background","parse","makeTwoWay","stringify","fill","portId","strokeJoin","margin","editable","font","groupTemplate","linkTemplate","selectionAdorned","reshapable","routing","Orthogonal","corner","angle","curve","JumpOver","segmentOrientation","None","Normal","AvoidsNodes","toArrow","textAlign","segmentIndex","segmentOffset","NaN","OrientUpright","ref","divClassName","initDiagram","nodeDataArray","linkDataArray","modelData","onModelChange","skipsDiagramUpdate","InspectorRow","handleInputChange","bind","onInputChange","id","target","value","type","loc","locArr","split","length","parseFloat","toFixed","formatLocation","disabled","onChange","onBlur","SelectionInspector","selObj","selectedData","dets","row","unshift","push","className","renderObjectDetails","True","createToken","name","pattern","False","LCurly","RCurly","LSquare","RSquare","LRound","RRound","Comma","Colon","SemiColon","ENTITY","COVERAGE","CHILD","COMPOSITE","WEAK","RELATIONSHIP","CALCULATED","ATTRIBUTES","IDENTIFIER","BY","StringEntity","sqlExpretion","RelationNumber","JERARQUIA","OF","COVERTURA","WhiteSpace","group","Lexer","SKIPPED","allTokens","JsonLexer","parser","TypeOfObject","RULE","MANY_SEP","SEP","DEF","OR","ALT","SUBRULE","entity","composite","relationship","CONSUME","OPTION","child","coverage","weak","propertyEntity","manys","calculated","relation","attributesRelation","CONSUME1","CONSUME2","AT_LEAST_ONE_SEP","propierties","performSelfAnalysis","CstParser","ActionsFunctionsClass","Keys","KeysLink","location","H","W","stateData","undefined","totalLocation","arrayOfComposites","FinalDataNodes","initialData","ArrayOfNodes","Entities","links","GetLocation","TotalLocation","number","GetKey","GetKeyForLink","createNodeGo","isGroup","fig","handleChild","handleCoverage","handleWeak","entiNode","find","atributeNode","atributes","identity","entiNumber","searchEntityNodeInArrayOfNodes","Weak","children","image","enti","atribute","createPropertiesGo","Key","to","from","buscar","nombre","searchParentNodeInArrayOfNodes","search","parent","entityAction","entities","handleProperties","PropertyEntity","Coverage","triangle","createTriangle","substring","linkToChildren","fromSpot","toSpot","Child","linkingToParent","RelationshipAction","AttributesRelation","handleRelations","Relation","compositeAction","datos","variables","Propierties","map","variable","addNodeData","element","canRelink","align","dash","c","keyOfParent","keyIdentifier","entidadPadre","otroIdentificador","log","compositeInfo","getAnCompositeOnArray","handlePropertiesOfComposite","Calculated","handleCardinality","moreThanOneIdentifier","Manys","linking","nodoNuevo","nodoViejo","_","f","splice","JSON","Entity","Relationship","Composite","nodeIsExistinInDataNode","onInputEditorContentChange","inputEditor","inputEditorMarkers","setInputMarket","lex","lexErrors","parseErrors","inputEditorMark","start","end","marker","forEach","currMarker","clear","currLexError","line","ch","column","markText","title","message","currParserError","token","startLine","startOffset","endOffset","endLine","startColumn","lastToken","isEmpty","resyncedTokens","endColumn","markInputErrors","ParserGenerator","changeStateCallback","textoState","setTextoState","action","useMemo","useState","inputEditorMarker","setInputEditorMarker","handleSubmit","lexAndParseResult","instance","assert","strictEqual","cst","FindRepeatsWords","codemirror","datafind","mapOfObjects","Map","mapOfRepeatsObjects","repeat","has","set","FindErrors","useEffect","handleChange","useCallback","change","getValue","lexResult","tokenize","input","tokens","errors","parseJson","textoo","result","ActionsFunctions","CreateTree","debo","debounce","style","minWidth","options","mode","lineNumbers","theme","tabSize","App","mapNodeKeyIdx","mapLinkKeyIdx","IniState","state","setState","animation","setAnimationState","refreshNodeIndex","nodeArr","n","idx","refreshLinkIndex","linkArr","l","inspector","childData","texto","a","setTimeout","path","isBlur","produce","draft","get","hiddenFileInput","file","files","filereader","FileReader","readAsText","onload","resultado","onerror","multiple","onClick","event","click","arr","bloc","Blob","saveAs","CSSTransition","in","timeout","classNames","enter","exit","unmountOnExit","sel","subject","nd","ld","insertedNodeKeys","modifiedNodeData","removedNodeKeys","modifiedLinkData","insertedLinkKeys","removedLinkKeys","modifiedModelData","modifiedNodeMap","modifiedLinkMap","narr","filter","includes","larr","ReactDOM","render","document","getElementById","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","code","ids","all","slice","t","keys","Object","module","exports"],"mappings":"mRAoBaA,EAAb,kDAuBC,aAAe,IAAD,uBACb,gBAtBOC,mBAqBM,IApBNC,sBAoBM,IAnBNC,sBAmBM,IAjBNC,oBAiBM,IAhBNC,qBAgBM,IAfNC,sBAeM,IAZNC,uBAAiC,EAY3B,EAXNC,qBAA+B,EAWzB,EAVNC,0BAAoC,OAU9B,EATNC,wBAAkC,OAS5B,EARNC,sBAAgC,OAQ1B,EAPNC,gBAA0B,EAOpB,EANNC,gBAA0B,IAMpB,EALNC,yBAAmC,EAQ1C,IAAMC,EAAiB,CAAEC,UAAW,OAAQC,oBAAoB,GAC1DC,EAAkB,CAAEC,OAAQ,OAAQC,sBAAsB,GAE1DC,EAAIC,cAAeC,KANZ,OAQb,EAAKtB,cAAgBoB,EAAEC,OAASP,EAAgBM,EAAEC,QAAUJ,EAAiB,CAAEM,eAAgB,gBAC/F,EAAKtB,iBAAmBmB,EAAEC,OAASP,EAAgBM,EAAEC,QAAUJ,EAAiB,CAAEM,eAAgB,gBAClG,EAAKrB,iBAAmBkB,EAAEC,OAASP,EAAgBM,EAAEC,QAAUJ,EAAiB,CAAEM,eAAgB,gBAElG,EAAKpB,eAAiBiB,EAAEC,OAASP,EAAgBM,EAAEC,QAAUJ,EAAiB,CAAEM,eAAgB,gBAChG,EAAKnB,gBAAkBgB,EAAEC,OAASP,EAAgBM,EAAEC,QAAUJ,EAAiB,CAAEM,eAAgB,gBACjG,EAAKlB,iBAAmBe,EAAEC,OAASP,EAAgBM,EAAEC,QAAUJ,EAAiB,CAAEM,eAAgB,gBAdrF,EAvBf,8DA+KEC,KAAKC,QAAQC,OAAOF,KAAKvB,kBACzBuB,KAAKC,QAAQC,OAAOF,KAAKtB,kBACzBsB,KAAKC,QAAQC,OAAOF,KAAKxB,eACzBwB,KAAKC,QAAQC,OAAOF,KAAKrB,gBACzBqB,KAAKC,QAAQC,OAAOF,KAAKpB,iBACzBoB,KAAKC,QAAQC,OAAOF,KAAKnB,oBApL3B,qCA2LE,qEAEAmB,KAAKG,oBA7LP,iCAmMmBC,EAAcC,GAE/BL,KAAKG,kBAGL,IAAMG,EAAgBN,KAAKO,aAAeP,KAAKQ,aAC/C,GAAsB,OAAlBF,EAAJ,CACA,IAAMG,EAAUH,EAAcI,SAC9B,GAAID,EAAQE,OAAQ,CACnB,IAAMC,EAAOH,EAAQI,IACrB,IACCb,KAAKc,sBAAsBF,EAAMZ,KAAKe,oBAAoB,GAC1Df,KAAKgB,oBAAoBJ,EAAMZ,KAAKe,oBAAoB,GACvD,MAAOE,GACRC,QAAQC,MAAMF,QAjNlB,iCA0NmBb,EAAcC,GAC/BL,KAAKG,kBAGL,IAAMG,EAAgBN,KAAKO,aAAeP,KAAKQ,aAC/C,GAAsB,OAAlBF,EAAJ,CACA,IAAMG,EAAUH,EAAcI,SAC9B,GAAID,EAAQE,OAAQ,CACnB,IAAMC,EAAOH,EAAQI,IAGfI,EAAIjB,KAAKC,QAAQmB,UACjBC,EAAOrB,KAAKsB,yBAA2BL,EAAEM,MAC/C,IACCvB,KAAKc,sBAAsBF,GAAM,EAAOS,GACxCrB,KAAKgB,oBAAoBJ,GAAM,EAAOS,GACrC,MAAOJ,GACRC,QAAQC,MAAMF,QA3OlB,sCAqPwBO,GAClBA,aAAgB3B,QAAS2B,EAAKC,6BAtPpC,4CAiQ8Bb,EAAec,EAAoBL,GAC/D,IAAMM,EAAYf,EAAKgB,eAAeC,oBAChCC,EAAKH,EAAUI,EACfC,EAAKL,EAAUI,EAAIJ,EAAUM,OAAS,EACtCC,EAAKP,EAAUI,EAAIJ,EAAUM,OAE7BE,EAAgBnC,KAAKoC,sBACrBC,EAAWrC,KAAKsC,eAEhBC,EAAOZ,EAAUa,OACvBD,EAAKE,QAAQJ,EAAUF,EAAgB,GACvC,IAAMO,EAAY1C,KAAKC,QAAQ0C,cAC9BJ,GACA,SAAClC,GAAD,OAASA,EAAIO,QACb,SAACgC,GAAD,OAAOA,aAAa/C,SAAY+C,EAAEC,cAAgBD,aAAa/C,SAAY+C,EAAEE,YAA0B,OAAZF,EAAEG,QAAmBH,EAAEG,MAAMC,eACxH,GAGGC,EAAmBd,EACnBe,EAAe,KACfC,EAAoBtD,OAAQuD,QAC5BC,EAAyBxD,OAAQuD,QA2CrC,GAzCAV,EAAUY,MAAK,SAACC,GACf,GAAIA,IAAU3C,EAAd,CAEA,IAAM4C,EAAcD,EAAM3B,eAAeC,oBACnC4B,EAAKD,EAAYzB,EACjB2B,EAAKF,EAAYzB,EAAIyB,EAAYvB,OAAS,EAC1C0B,EAAKH,EAAYzB,EAAIyB,EAAYvB,OAGnC2B,KAAKC,IAAI7B,EAAK0B,GAAMT,IACvBA,EAAWW,KAAKC,IAAI7B,EAAK0B,GACzBR,EAAUK,EACVJ,EAAWtD,OAAQiE,OACnBT,EAAgBxD,OAAQiE,QAGrBF,KAAKC,IAAI/B,EAAK2B,GAAMR,GACvBA,EAAWW,KAAKC,IAAI/B,EAAK2B,GACzBP,EAAUK,EACVJ,EAAWtD,OAAQkE,IACnBV,EAAgBxD,OAAQkE,KACdH,KAAKC,IAAI/B,EAAK6B,GAAMV,IAC9BA,EAAWW,KAAKC,IAAI/B,EAAK6B,GACzBT,EAAUK,EACVJ,EAAWtD,OAAQkE,IACnBV,EAAgBxD,OAAQmE,QAGrBJ,KAAKC,IAAI3B,EAAKuB,GAAMR,GACvBA,EAAWW,KAAKC,IAAI3B,EAAKuB,GACzBP,EAAUK,EACVJ,EAAWtD,OAAQmE,OACnBX,EAAgBxD,OAAQkE,KACdH,KAAKC,IAAI3B,EAAKyB,GAAMV,IAC9BA,EAAWW,KAAKC,IAAI3B,EAAKyB,GACzBT,EAAUK,EACVJ,EAAWtD,OAAQmE,OACnBX,EAAgBxD,OAAQmE,YAIV,OAAZd,EAAkB,CACrB,IAAMe,EAAUtC,EAAUuC,EAAItD,EAAKuD,aAAaD,EAC1CE,EAAUzC,EAAUI,EAAInB,EAAKuD,aAAapC,EAC1CsC,EAAanB,EAAQtB,eAAeC,oBAEpCyC,EAAKV,KAAKW,IAAI5C,EAAUuC,EAAGG,EAAWH,GAAK,GAC3CM,EAAKZ,KAAKa,IAAI9C,EAAUuC,EAAIvC,EAAU+C,MAAOL,EAAWH,EAAIG,EAAWK,OAAS,GAEhFC,GAAY,IAAI9E,SAAW+E,YAAYP,EAAYhB,GACrDF,IAAatD,OAAQiE,QACpBzC,IAEHT,EAAKiE,KAAK,IAAIhF,QAAS8B,EAAUuC,EAAID,EAASU,EAAU5C,EAAIJ,EAAUM,OAAS,EAAImC,IACnFpE,KAAK8E,gBAAgBlE,IAElBc,IACH1B,KAAKtB,iBAAiBqG,SAAW,IAAIlF,QAASyE,EAAIK,EAAU5C,GAC5D/B,KAAKtB,iBAAiBsG,IAAI,GAAGN,MAAQF,EAAKF,EAC1CtE,KAAKC,QAAQgF,IAAIjF,KAAKtB,oBAEbyE,IAAatD,OAAQkE,KAC3B1C,IACHT,EAAKiE,KAAK,IAAIhF,QAAS8B,EAAUuC,EAAID,EAASU,EAAU5C,EAAIqC,IAC5DpE,KAAK8E,gBAAgBlE,IAElBc,IACH1B,KAAKxB,cAAcuG,SAAW,IAAIlF,QAASyE,EAAIK,EAAU5C,GACzD/B,KAAKxB,cAAcwG,IAAI,GAAGN,MAAQF,EAAKF,EACvCtE,KAAKC,QAAQgF,IAAIjF,KAAKxB,iBAEb2E,IAAatD,OAAQmE,SAC3B3C,IACHT,EAAKiE,KAAK,IAAIhF,QAAS8B,EAAUuC,EAAID,EAASU,EAAU5C,EAAIJ,EAAUM,OAASmC,IAC/EpE,KAAK8E,gBAAgBlE,IAElBc,IACH1B,KAAKvB,iBAAiBsG,SAAW,IAAIlF,QAASyE,EAAIK,EAAU5C,GAC5D/B,KAAKvB,iBAAiBuG,IAAI,GAAGN,MAAQF,EAAKF,EAC1CtE,KAAKC,QAAQgF,IAAIjF,KAAKvB,uBAvW3B,0CAqX4BmC,EAAec,EAAoBL,GAC7D,IAAMM,EAAYf,EAAKgB,eAAeC,oBAChCC,EAAKH,EAAUuC,EACflC,EAAKL,EAAUuC,EAAIvC,EAAU+C,MAAQ,EACrCxC,EAAKP,EAAUuC,EAAIvC,EAAU+C,MAE7BvC,EAAgBnC,KAAKoC,sBACrBC,EAAWrC,KAAKsC,eAEhBC,EAAOZ,EAAUa,OACvBD,EAAKE,QAAQN,EAAgB,EAAGE,GAChC,IAAMK,EAAY1C,KAAKC,QAAQ0C,cAC9BJ,GACA,SAAClC,GAAD,OAASA,EAAIO,QACb,SAACgC,GAAD,OAAOA,aAAa/C,SAAY+C,EAAEC,cAAgBD,aAAa/C,SAAY+C,EAAEE,YAA0B,OAAZF,EAAEG,QAAmBH,EAAEG,MAAMC,eACxH,GAGGC,EAAmBd,EACnBe,EAAe,KACfC,EAAoBtD,OAAQuD,QAC5BC,EAAyBxD,OAAQuD,QA2CrC,GAzCAV,EAAUY,MAAK,SAACC,GACf,GAAIA,IAAU3C,EAAd,CAEA,IAAM4C,EAAcD,EAAM3B,eAAeC,oBACnC4B,EAAKD,EAAYU,EACjBR,EAAKF,EAAYU,EAAIV,EAAYkB,MAAQ,EACzCf,EAAKH,EAAYU,EAAIV,EAAYkB,MAGnCd,KAAKC,IAAI7B,EAAK0B,GAAMT,IACvBA,EAAWW,KAAKC,IAAI7B,EAAK0B,GACzBR,EAAUK,EACVJ,EAAWtD,OAAQiE,OACnBT,EAAgBxD,OAAQiE,QAGrBF,KAAKC,IAAI/B,EAAK2B,GAAMR,GACvBA,EAAWW,KAAKC,IAAI/B,EAAK2B,GACzBP,EAAUK,EACVJ,EAAWtD,OAAQqF,KACnB7B,EAAgBxD,OAAQqF,MACdtB,KAAKC,IAAI/B,EAAK6B,GAAMV,IAC9BA,EAAWW,KAAKC,IAAI/B,EAAK6B,GACzBT,EAAUK,EACVJ,EAAWtD,OAAQqF,KACnB7B,EAAgBxD,OAAQsF,OAGrBvB,KAAKC,IAAI3B,EAAKuB,GAAMR,GACvBA,EAAWW,KAAKC,IAAI3B,EAAKuB,GACzBP,EAAUK,EACVJ,EAAWtD,OAAQsF,MACnB9B,EAAgBxD,OAAQqF,MACdtB,KAAKC,IAAI3B,EAAKyB,GAAMV,IAC9BA,EAAWW,KAAKC,IAAI3B,EAAKyB,GACzBT,EAAUK,EACVJ,EAAWtD,OAAQsF,MACnB9B,EAAgBxD,OAAQsF,WAIV,OAAZjC,EAAkB,CACrB,IAAMe,EAAUtC,EAAUuC,EAAItD,EAAKuD,aAAaD,EAC1CE,EAAUzC,EAAUI,EAAInB,EAAKuD,aAAapC,EAC1CsC,EAAanB,EAAQtB,eAAeC,oBAEpCuD,EAAKxB,KAAKW,IAAI5C,EAAUI,EAAGsC,EAAWtC,GAAK,GAC3CsD,EAAKzB,KAAKa,IAAI9C,EAAUI,EAAIJ,EAAUM,OAAQoC,EAAWtC,EAAIsC,EAAWpC,QAAU,GAElF0C,GAAY,IAAI9E,SAAW+E,YAAYP,EAAYhB,GACrDF,IAAatD,OAAQiE,QACpBzC,IAEHT,EAAKiE,KAAK,IAAIhF,QAAS8E,EAAUT,EAAIvC,EAAU+C,MAAQ,EAAIT,EAAStC,EAAUI,EAAIqC,IAClFpE,KAAK8E,gBAAgBlE,IAElBc,IACH1B,KAAKnB,iBAAiBkG,SAAW,IAAIlF,QAAS8E,EAAUT,EAAGkB,GAC3DpF,KAAKnB,iBAAiBmG,IAAI,GAAG/C,OAASoD,EAAKD,EAC3CpF,KAAKC,QAAQgF,IAAIjF,KAAKnB,oBAEbsE,IAAatD,OAAQqF,MAC3B7D,IACHT,EAAKiE,KAAK,IAAIhF,QAAS8E,EAAUT,EAAID,EAAStC,EAAUI,EAAIqC,IAC5DpE,KAAK8E,gBAAgBlE,IAElBc,IACH1B,KAAKrB,eAAeoG,SAAW,IAAIlF,QAAS8E,EAAUT,EAAGkB,GACzDpF,KAAKrB,eAAeqG,IAAI,GAAG/C,OAASoD,EAAKD,EACzCpF,KAAKC,QAAQgF,IAAIjF,KAAKrB,kBAEbwE,IAAatD,OAAQsF,QAC3B9D,IACHT,EAAKiE,KAAK,IAAIhF,QAAS8E,EAAUT,EAAIvC,EAAU+C,MAAQT,EAAStC,EAAUI,EAAIqC,IAC9EpE,KAAK8E,gBAAgBlE,IAElBc,IACH1B,KAAKpB,gBAAgBmG,SAAW,IAAIlF,QAAS8E,EAAUT,EAAGkB,GAC1DpF,KAAKpB,gBAAgBoG,IAAI,GAAG/C,OAASoD,EAAKD,EAC1CpF,KAAKC,QAAQgF,IAAIjF,KAAKpB,sBA3d3B,4CA+CE,OAAOoB,KAAKlB,wBA/Cd,aAiD2BwG,GACzB,GAAmB,kBAARA,GAAoBC,MAAMD,IAAQA,EAAM,EAAG,MAAM,IAAIE,MAAM,wFAClExF,KAAKlB,yBAA2BwG,IACnCtF,KAAKlB,uBAAyBwG,KApDjC,yCA8DE,OAAOtF,KAAKjB,qBA9Dd,aAgEwBuG,GACtB,GAAmB,mBAARA,EAAmB,MAAM,IAAIE,MAAM,gFAC1CxF,KAAKjB,sBAAwBuG,IAChCtF,KAAKjB,oBAAsBuG,KAnE9B,+CA6EE,OAAOtF,KAAKhB,2BA7Ed,aA+E8BsG,GACxBtF,KAAKhB,4BAA8BsG,IACtCtF,KAAKhB,0BAA4BsG,EAChCtF,KAAKvB,iBAAiBgH,SAASC,QAAqBhG,OAASM,KAAKhB,0BAClEgB,KAAKxB,cAAciH,SAASC,QAAqBhG,OAASM,KAAKhB,6BAnFnE,6CA6FE,OAAOgB,KAAKf,yBA7Fd,aA+F4BqG,GACtBtF,KAAKf,0BAA4BqG,IACpCtF,KAAKf,wBAA0BqG,EAC9BtF,KAAKrB,eAAe8G,SAASC,QAAqBhG,OAASM,KAAKf,wBAChEe,KAAKpB,gBAAgB6G,SAASC,QAAqBhG,OAASM,KAAKf,2BAnGrE,2CA6GE,OAAOe,KAAKd,uBA7Gd,aA+G0BoG,GACpBtF,KAAKd,wBAA0BoG,IAClCtF,KAAKd,sBAAwBoG,EAC5BtF,KAAKnB,iBAAiB4G,SAASC,QAAqBhG,OAASM,KAAKd,sBAClEc,KAAKtB,iBAAiB+G,SAASC,QAAqBhG,OAASM,KAAKd,yBAnHtE,qCA6HE,OAAOc,KAAKb,iBA7Hd,aA+HoBmG,GAClB,GAAmB,kBAARA,GAAoBC,MAAMD,IAAQA,EAAM,EAAG,MAAM,IAAIE,MAAM,kFAClExF,KAAKb,kBAAoBmG,IAC5BtF,KAAKb,gBAAkBmG,EACtBtF,KAAKnB,iBAAiB4G,SAASC,QAAqBC,YAAcL,EAClEtF,KAAKtB,iBAAiB+G,SAASC,QAAqBC,YAAcL,EAClEtF,KAAKrB,eAAe8G,SAASC,QAAqBC,YAAcL,EAChEtF,KAAKpB,gBAAgB6G,SAASC,QAAqBC,YAAcL,EACjEtF,KAAKvB,iBAAiBgH,SAASC,QAAqBC,YAAcL,EAClEtF,KAAKxB,cAAciH,SAASC,QAAqBC,YAAcL,KAxInE,qCAmJE,OAAOtF,KAAKZ,iBAnJd,aAqJoBkG,GAClB,GAAmB,kBAARA,GAAoBC,MAAMD,IAAQA,GAAO,EAAG,MAAM,IAAIE,MAAM,8EACnExF,KAAKZ,kBAAoBkG,IAC5BtF,KAAKZ,gBAAkBkG,KAxJ1B,6CAkKE,OAAOtF,KAAKX,yBAlKd,aAoK4BiG,GAC1B,GAAmB,mBAARA,EAAmB,MAAM,IAAIE,MAAM,8EAC1CxF,KAAKX,0BAA4BiG,IACpCtF,KAAKX,wBAA0BiG,OAvKlC,GAAwCzF,gBCC3B+F,G,MAAb,kDAOC,WAAYC,GAAsB,IAAD,8BAChC,cAAMA,IAJCC,gBAGyB,EAEhC,EAAKA,WAAaC,cAFc,EAPlC,gEAiBE,GAAK/F,KAAK8F,WAAWE,QAArB,CACA,IAAM/F,EAAUD,KAAK8F,WAAWE,QAAQC,aACpChG,aAAmBJ,WACtBI,EAAQiG,mBAAmB,mBAAoBlG,KAAK6F,MAAMM,mBApB7D,6CA4BE,GAAKnG,KAAK8F,WAAWE,QAArB,CACA,IAAM/F,EAAUD,KAAK8F,WAAWE,QAAQC,aACpChG,aAAmBJ,WACtBI,EAAQmG,sBAAsB,mBAAoBpG,KAAK6F,MAAMM,mBA/BhE,oCA0CE,IAAMvG,EAAIC,cAAeC,KAEnBG,EAAUL,EAAEC,UAAY,CAC7B,yBAAyB,EAEzB,sCAAuC,CACtCwG,KAAM,WACNC,MAAO,aAERC,aAAc,IAAIhI,EAClB,wCAAyC,OACzC,sCAAuC,OACvC,oCAAqC,QACrC,8BAA+B,EAC/BiI,OAAQ5G,EAAEC,sBAAuB,CAAC4G,WAAU,EAAMC,eAAc,IAChEC,MAAO/G,EAAEC,kBAAoB,CAC5B+G,gBAAiB,MAEjBC,sBAAuB,SAACC,EAAaC,GAEpC,IADA,IAAIC,EAAID,EAAKlG,KAAO,EACbiG,EAAEG,mBAAmBD,IAAIA,IAEhC,OADAD,EAAKlG,IAAMmG,EACJA,GAGRE,0BAA2B,SAACJ,EAAuBC,GAElD,IADA,IAAIC,EAAID,EAAKlG,MAAQ,EACdiG,EAAEK,mBAAmBH,IAAIA,IAEhC,OADAD,EAAKlG,IAAMmG,EACJA,OAOV,SAASI,EAAUC,GAClB,OAAQA,GACP,IAAK,IACJ,OAAOxH,QAASyH,WACjB,IAAK,IACJ,OAAOzH,QAAS0H,SACjB,IAAK,IAEL,QACC,OAAO1H,QAAS2H,MA8KnB,OAhKAvH,EAAQwH,aAAe7H,EACtBC,OACA,OACA,IAAIA,UAAW,OAAQ,OAAQuH,GAC/B,CAAEM,WAAY,eACd,IAAI7H,UAAW,aAAc,cAC7B,IAAIA,UAAW,WAAY,MAAOA,QAAS8H,OAAOC,WAAW/H,QAASgI,WACtEjI,EACCC,QACA,CACCiI,KAAM,QACNnC,YAAa,EAEboC,OAAQ,GACRC,WAAY,SAIb,IAAInI,UAAW,OAAQ,SACvB,IAAIA,UAAW,SAAU,OACzB,IAAIA,UAAW,QAAS,SACxB,IAAIA,UAAW,SAAU,WAG1BD,EACCC,YACA,CAAEoI,OAAQ,EAAGC,UAAU,EAAMC,KAAM,kCACnC,IAAItI,UAAW,QAAQ+H,aACvB,IAAI/H,UAAW,YA+CjBI,EAAQmI,cAAgBxI,EACvBC,QACA,WACA,IAAIA,UAAW,WAAY,MAAOA,QAAS8H,OAAOC,WAAW/H,QAASgI,WACtEjI,EACCC,QACA,OACA,IAAIA,UAAW,OAAQ,OAAQuH,GAC/B,CAAEM,WAAY,eACd,IAAI7H,UAAW,aAAc,cAC7BD,EACCC,QACA,CACCiI,KAAM,QACNnC,YAAa,EAEboC,OAAQ,GACRC,WAAY,SAIb,IAAInI,UAAW,OAAQ,SACvB,IAAIA,UAAW,SAAU,OACzB,IAAIA,UAAW,QAAS,SACxB,IAAIA,UAAW,SAAU,WAE1BD,EACCC,YACA,CAAEoI,OAAQ,EAAGC,UAAU,EAAMC,KAAM,kCACnC,IAAItI,UAAW,QAAQ+H,aACvB,IAAI/H,UAAW,aAKlBI,EAAQoI,aAAezI,EACtBC,OACA,CACCyI,kBAAkB,EAClB/I,UAAW,aACXgJ,YAAY,EACZC,QAAS3I,OAAQ4I,WACjBC,OAAQ,GACRC,MAAO,IACPC,MAAO/I,OAAQgJ,SACfC,mBAAoBjJ,OAAQkJ,MAE7B,IAAIlJ,UAAW,WAAY,WAAYA,OAAQ8H,OAC/C,IAAI9H,UAAW,SAAU,SAAUA,OAAQ8H,OAE3C,IAAI9H,UAAW,UAAW,WAxI3B,SAAuBwH,GACtB,OAAQA,GACP,IAAK,IACJ,OAAOxH,OAAQmJ,OAEhB,IAAK,IACJ,OAAOnJ,OAAQoJ,YAChB,QACC,OAAOpJ,OAAQmJ,WAiIjBpJ,EAAEC,QAAS,IAAIA,UAAW,kBAAmB,SAC7CD,EACCC,QACA,CAAEH,OAAQ,UAAWiG,YAAa,IAAKuD,QAAS,IAChD,IAAIrJ,UAAW,UAAW,UAE3BD,EACCC,YACA,CACCsJ,UAAW,SACXhB,KAAM,uBACNzI,OAAQ,UACR0J,aAAc,EACdC,cAAe,IAAIxJ,QAASyJ,IAAKA,KACjCR,mBAAoBjJ,OAAQkJ,KAC5BJ,MAAO,KAER,IAAI9I,UAAW,iBAAkB,SACjC,IAAIA,UAAW,OAAQ,SAExBD,EACCC,YACA,CACCsJ,UAAW,SACXhB,KAAM,uBACNzI,OAAQ,UACR0J,cAAe,EACfC,cAAe,IAAIxJ,QAASyJ,IAAKA,KACjCR,mBAAoBjJ,OAAQ0J,eAE7B,IAAI1J,UAAW,OAAQ,YAIlBI,IArQT,+BAyQE,OACC,cAAC,IAAD,CACCuJ,IAAKxJ,KAAK8F,WACV2D,aAAa,oBACbC,YAAa1J,KAAK0J,YAClBC,cAAe3J,KAAK6F,MAAM8D,cAC1BC,cAAe5J,KAAK6F,MAAM+D,cAC1BC,UAAW7J,KAAK6F,MAAMgE,UACtBC,cAAe9J,KAAK6F,MAAMiE,cAC1BC,mBAAoB/J,KAAK6F,MAAMkE,yBAlRnC,GAAoChE,c,QCRvBiE,G,MAAb,kDACE,WAAYnE,GAA2B,IAAD,8BACpC,cAAMA,IACDoE,kBAAoB,EAAKA,kBAAkBC,KAAvB,gBAFW,EADxC,8DAM4BjJ,GACxBjB,KAAK6F,MAAMsE,cAAcnK,KAAK6F,MAAMuE,GAAInJ,EAAEoJ,OAAOC,MAAkB,SAAXrJ,EAAEsJ,QAP9D,qCAUyBC,GAErB,IAAMC,EAASD,EAAIE,MAAM,KACzB,GAAsB,IAAlBD,EAAOE,OAAc,CACvB,IAAMzG,EAAI0G,WAAWH,EAAO,IACtB1I,EAAI6I,WAAWH,EAAO,IAC5B,IAAKlF,MAAMrB,KAAOqB,MAAMxD,GACtB,MAAM,GAAN,OAAUmC,EAAE2G,QAAQ,GAApB,YAA0B9I,EAAE8I,QAAQ,IAGxC,OAAOL,IApBX,+BAuBmB,IAAD,EACVlF,EAAMtF,KAAK6F,MAAMyE,MAIrB,MAHuB,SAAnB,UAAAtK,KAAK6F,aAAL,eAAYuE,KAAiBpK,KAAK6F,MAAMyE,QAC1ChF,EAAMtF,KAAK8K,eAAe9K,KAAK6F,MAAMyE,QAGrC,+BACE,6BAAKtK,KAAK6F,MAAMuE,KAChB,6BACE,uBACEW,SAA4B,QAAlB/K,KAAK6F,MAAMuE,GACrBE,MAAOhF,EACP0F,SAAUhL,KAAKiK,kBACfgB,OAAQjL,KAAKiK,6BApCzB,GAAkClE,kBCErBmF,EAAb,oLAKI,IAAMC,EAASnL,KAAK6F,MAAMuF,aACpBC,EAAO,GACb,IAAK,IAAMrE,KAAKmE,EAAQ,CACtB,IAAM7F,EAAM6F,EAAOnE,GACbsE,EAAM,cAAC,EAAD,CAEElB,GAAIpD,EACJsD,MAAOhF,EACP6E,cAAenK,KAAK6F,MAAMsE,eAHrBnD,GAIT,QAANA,EACFqE,EAAKE,QAAQD,GAEbD,EAAKG,KAAKF,GAGd,OAAOD,IApBX,+BAwBI,OACE,qBAAKjB,GAAG,iBAAiBqB,UAAU,YAAnC,SACE,gCACE,gCACGzL,KAAK0L,gCA5BlB,GAAwC3F,iB,eCblC4F,EAAOC,sBAAY,CAAEC,KAAM,OAAQC,QAAS,SAC5CC,EAAQH,sBAAY,CAAEC,KAAM,QAASC,QAAS,UAE9CE,EAASJ,sBAAY,CAAEC,KAAM,SAAUC,QAAS,MAChDG,EAASL,sBAAY,CAAEC,KAAM,SAAUC,QAAS,MAChDI,EAAUN,sBAAY,CAAEC,KAAM,UAAWC,QAAS,OAClDK,EAAUP,sBAAY,CAAEC,KAAM,UAAWC,QAAS,MAClDM,EAASR,sBAAY,CAAEC,KAAM,SAAUC,QAAS,OAChDO,EAAST,sBAAY,CAAEC,KAAM,SAAUC,QAAS,OAChDQ,EAAQV,sBAAY,CAAEC,KAAM,QAASC,QAAS,MAC9CS,EAAQX,sBAAY,CAAEC,KAAM,QAASC,QAAS,MAC9CU,EAAYZ,sBAAY,CAAEC,KAAM,YAAaC,QAAS,MACtDW,EAASb,sBAAY,CAAEC,KAAM,SAAUC,QAAS,WAChDY,EAAWd,sBAAY,CAAEC,KAAM,WAAYC,QAAS,aACpDa,EAAQf,sBAAY,CAAEC,KAAM,QAASC,QAAS,UAC9Cc,EAAYhB,sBAAY,CAAEC,KAAM,YAAaC,QAAS,cACtDe,EAAOjB,sBAAY,CAAEC,KAAM,OAAQC,QAAS,SAC5CgB,EAAelB,sBAAY,CAAEC,KAAM,eAAgBC,QAAS,iBAC5DiB,EAAanB,sBAAY,CAAEC,KAAM,aAAcC,QAAS,eACxDkB,EAAapB,sBAAY,CAAEC,KAAM,aAAcC,QAAS,eACxDmB,EAAarB,sBAAY,CAAEC,KAAM,aAAcC,QAAS,eACxDoB,EAAKtB,sBAAY,CAAEC,KAAM,KAAMC,QAAS,OAMxCqB,EAAevB,sBAAY,CAC/BC,KAAM,eACNC,QAAS,gBAELsB,EAAexB,sBAAY,CAC/BC,KAAM,eACNC,QAAS,UAOLuB,EAAiBzB,sBAAY,CACjCC,KAAM,iBACNC,QAAS,oBAELwB,EAAY1B,sBAAY,CAC5BC,KAAM,YACNC,QAAS,0BAELyB,EAAK3B,sBAAY,CACrBC,KAAM,KACNC,QAAS,OAEL0B,EAAY5B,sBAAY,CAC5BC,KAAM,YACNC,QAAS,kCAGL2B,GAAa7B,sBAAY,CAC7BC,KAAM,aACNC,QAAS,aACT4B,MAAOC,QAAMC,UAITC,GAAY,CAChB7B,EAEAC,EACAC,EACAC,EACAG,EACAC,EACAZ,EACAI,EACAK,EACAC,EACAG,EACAC,EACAC,EACAC,EACAE,EACAK,EACAD,EACAL,EACAE,EACAC,EACAC,EACAM,EACAC,EACAC,EACAJ,EACAK,GACAJ,EACAF,GAEIW,GAAY,IAAIH,QAAME,IA0LfE,GAAS,IAxLtB,kDACE,aAAe,IAAD,8BACZ,cAAMF,KAMDG,aAAe,EAAKC,KAAK,gBAAgB,WAC9C,EAAKC,SAAS,CACZC,IAAK3B,EACL4B,IAAK,WACH,EAAKC,GAAG,CACN,CAAEC,IAAK,kBAAM,EAAKC,QAAQ,EAAKC,UAC/B,CAAEF,IAAK,kBAAM,EAAKC,QAAQ,EAAKE,aAC/B,CAAEH,IAAK,kBAAM,EAAKC,QAAQ,EAAKG,wBAdzB,EAoBNF,OAAS,EAAKP,KAAK,UAAU,WACnC,EAAKU,QAAQlC,GACb,EAAKkC,QAAQxB,GACb,EAAKyB,QAAO,kBACV,EAAKP,GAAG,CACN,CAAEC,IAAK,kBAAM,EAAKC,QAAQ,EAAKM,SAC/B,CAAEP,IAAK,kBAAM,EAAKC,QAAQ,EAAKO,YAC/B,CAAER,IAAK,kBAAM,EAAKC,QAAQ,EAAKQ,aAEnC,EAAKJ,QAAQ3C,GACb,EAAKkC,SAAS,CACZC,IAAK7B,EACL8B,IAAK,WACH,EAAKG,QAAQ,EAAKS,mBAGtB,EAAKL,QAAQ1C,MApCD,EAuCN+C,eAAiB,EAAKf,KAAK,kBAAkB,WACnD,EAAKU,QAAQxB,GACb,EAAKyB,QAAO,kBACZ,EAAKP,GAAG,CACN,CAAEC,IAAK,kBAAM,EAAKK,QAAQ1B,KAC1B,CAAEqB,IAAK,kBAAM,EAAKC,QAAQ,EAAKU,SAC/B,CAACX,IAAM,kBAAM,EAAKC,QAAQ,EAAKW,sBA7CrB,EAyDNR,aAAe,EAAKT,KAAK,gBAAgB,WAC/C,EAAKU,QAAQ7B,GACb,EAAK6B,QAAQxB,GACb,EAAKwB,QAAQ3C,GACb,EAAKkC,SAAS,CACZC,IAAK7B,EACL8B,IAAK,WACH,EAAKG,QAAQ,EAAKY,aAGtB,EAAKP,OAAO,CACVR,IAAK,WACJ,EAAKG,QAAQ,EAAKa,uBAGrB,EAAKT,QAAQ1C,MAxED,EA2ENkD,SAAW,EAAKlB,KAAK,YAAY,WAEvC,EAAKU,QAAQxB,GACb,EAAKwB,QAAQvC,GACb,EAAKiD,SAAShC,GACd,EAAKsB,QAAQrC,GACb,EAAKgD,SAASjC,GACd,EAAKsB,QAAQtC,MAlFD,EAoFN+C,mBAAqB,EAAKnB,KAAK,sBAAsB,WAC3D,EAAKU,QAAQ3B,GACb,EAAK2B,QAAQ3C,GACb,EAAKkC,SAAS,CACZC,IAAK7B,EACL8B,IAAK,WACH,EAAKG,QAAQ,EAAKS,mBAGtB,EAAKL,QAAQ1C,MA7FD,EA+FNgD,MAAQ,EAAKhB,KAAK,SAAS,WACjC,EAAKU,QAAQvC,GACb,EAAKiD,SAAShC,GACd,EAAKsB,QAAQrC,GACb,EAAKgD,SAASjC,GACd,EAAKsB,QAAQtC,MApGD,EAuGNwC,MAAQ,EAAKZ,KAAK,SAAS,WAEjC,EAAKU,QAAQhC,GACb,EAAKgC,QAAQpB,GACb,EAAKoB,QAAQxB,MA3GD,EA6GN4B,KAAO,EAAKd,KAAK,QAAQ,WAE/B,EAAKU,QAAQ9B,GACb,EAAK8B,QAAQpB,GACb,EAAKoB,QAAQxB,MAjHD,EAmHN2B,SAAW,EAAKb,KAAK,YAAY,WAEvC,EAAKU,QAAQjC,GACb,EAAKiC,QAAQvC,GACb,EAAKuC,QAAQrB,GACb,EAAKqB,QAAQrC,GACb,EAAKqC,QAAQnB,GACb,EAAKmB,QAAQtC,MA1HD,EA+HNoC,UAAW,EAAKR,KAAK,aAAa,WACxC,EAAKU,QAAQ/B,GACb,EAAK+B,QAAQxB,GACb,EAAKwB,QAAQ3C,GACb,EAAKuD,iBAAiB,CACpBpB,IAAK7B,EACL8B,IAAK,kBACH,EAAKG,QAAQ,EAAKiB,gBAEtB,EAAKb,QAAQ1C,MAxID,EA4INiD,WAAW,EAAKjB,KAAK,cAAc,WACzC,EAAKU,QAAQ5B,GACb,EAAK4B,QAAQzB,GACb,EAAKyB,QAAQvB,MA/ID,EAmJNoC,YAAY,EAAKvB,KAAK,eAAe,WAC3C,EAAKU,QAAQxB,MAlJb,EAAKsC,sBAFO,EADhB,UAA0CC,c,mDC7B7BC,GAAb,WAcC,aAAe,IAAD,gCAbdC,KAAO,EAaO,KAZdC,SAAW,EAYG,KAXdC,SAAW,CAAEC,EAAG,EAAGC,EAAG,GAWR,KAVdC,eAAgCC,EAUlB,KARdC,cAAgB,EAQF,KAPdC,kBAAyC,GAO3B,KANdC,eAAqCrQ,KAAKsQ,cAM5B,KALdC,aAAqC,CACpCC,SAAU,GACVC,MAAO,IAGM,KAEdC,YAAc,aAFA,KAQdC,cAAgB,SAACC,GAChB,EAAKT,cAAyB,IAATS,GATR,KAWdC,OAAS,WACR,OAAQ,EAAKjB,KAAO,EAAKA,KAAO,GAZnB,KAcdkB,cAAgB,WACf,OAAQ,EAAKjB,SAAW,EAAKA,UAAY,GAf5B,KA8BdkB,aAAe,SAACvP,GACf,MAAO,CACNX,IAAKW,EAAKX,IACVwF,KAAM7E,EAAK6E,KACXC,MAAO9E,EAAK8E,MACZiE,KAAM/I,EAAK+I,MAAQ,IACnBtC,OAAQzG,EAAKyG,QAAU,EACvBuC,IAAKhJ,EAAKgJ,IACVwG,QAASxP,EAAKwP,cAAWd,EACzBe,IAAKzP,EAAKyP,KAAO,mBACjBhP,OAAQT,EAAKS,OACbyC,MAAOlD,EAAKkD,QAzCA,KA4CdwM,YAAc,SAACnK,KA5CD,KA6CdoK,eAAiB,SAACpK,KA7CJ,KA8CdqK,WAAa,SAACrK,EAAiBlG,GAAiB,IAAD,IACxCwQ,EAAW,EAAKd,aAAaC,SAASc,MAAK,SAACpN,GAAD,OAAOA,EAAErD,KAAOA,KAC3D0Q,EAAY,OAAGF,QAAH,IAAGA,GAAH,UAAGA,EAAUG,iBAAb,aAAG,EAAqBF,MAAK,SAACpN,GAAD,OAAsB,IAAfA,EAAEuN,YAClDC,EAAa,EAAKC,+BAA+B5K,EAAK6K,KAAM,GAAGC,SAAS1E,aAAa,GAAG2E,OACxFC,EAAO,EAAKxB,aAAaC,SAASc,MAAK,SAACpN,GAAD,OAAOA,EAAErD,KAAO6Q,KACvDM,EAAQ,OAAGD,QAAH,IAAGA,GAAH,UAAGA,EAAMP,iBAAT,aAAG,EAAiBF,MAAK,SAACpN,GAAD,OAAsB,IAAfA,EAAEuN,YAEhD,EAAKpB,eAAezG,cAAc4B,KACjC,EAAKyG,mBAAmB,CACvBC,IAAK,EAAKpB,gBACVqB,GAAE,OAAEZ,QAAF,IAAEA,OAAF,EAAEA,EAAc1Q,IAClBuR,KAAI,OAAEJ,QAAF,IAAEA,OAAF,EAAEA,EAAUnR,IAEhB2H,QAAS,QA3DE,KA6MdmJ,+BAAiC,SAACU,GACjC,IAAM7D,EAAS,EAAK+B,aAAaC,SAASc,MAAK,SAACpN,GAAD,OAAOA,EAAEoO,QAAUD,KAClE,cAAO7D,QAAP,IAAOA,OAAP,EAAOA,EAAQ3N,KA/MF,KAiNd0R,+BAAiC,SAACF,GACjC,IAAMG,EAAS,EAAKb,+BAA+BU,GAC7C7D,EAAS,EAAK+B,aAAaC,SAASc,MAAK,SAACpN,GAAD,OAAOA,EAAEuO,QAAUD,KAClE,cAAOhE,QAAP,IAAOA,OAAP,EAAOA,EAAQ3N,KApNF,KAiPd6R,aAAe,SAACC,GACf,IAAIzO,EAA2B,KAC/B,GAAIyO,EAASd,SAAU,CAoBL,IAAD,EAAhB,GAnBA3N,EAAI,CACHrD,IAAK,EAAKgQ,SACVxK,KAAMsM,EAASd,SAAS1E,aAAa,GAAG2E,MACxCxL,MAAO,OACP0K,SAAS,GAMV,EAAKX,eAAe1G,cAAc6B,KAAK,EAAKuF,aAAa7M,IAEzD,EAAKqM,aAAaC,SAAShF,KAAK,CAC/B3K,IAAKqD,EAAErD,IACPyR,OAAQpO,EAAEmC,KACVoM,OAAQ,KACRjB,UAAW,KAGF,OAANtN,EAEH,EAAK0O,iBAAL,OAAsBD,QAAtB,IAAsBA,GAAtB,UAAsBA,EAAUd,gBAAhC,aAAsB,EAAoBgB,eAAgB3O,EAAGrD,KAE9D,GAAI8R,EAASd,SAASiB,SAAU,CAC/B,IAAMC,EAAW,EAAKC,eACrB9O,EAAErD,IADc,WAEZ8R,EAASd,SAASiB,SAAS,GAAGjB,SAASvE,UAAU,GAAGwE,MAAMmB,UAAU,EAAG,GAF3D,aAEkEN,EAASd,SAASiB,SAAS,GAAGjB,SAASrE,UAAU,GAAGsE,MAAMmB,UAAU,EAAG,GAFzI,MAIXC,EAAiC,CACtChB,IAAK,EAAKpB,gBACVqB,GAAIjO,EAAErD,IACNuR,KAAMW,EAASlS,IACfsS,SAAU,MACVC,OAAQ,UAET,EAAK/C,eAAezG,cAAc4B,KAAK,EAAKyG,mBAAmBiB,IAEhE,GAAIP,EAASd,SAASwB,MAAO,CAC5B,IAAMC,EAAkC,CACvCpB,IAAK,EAAKpB,gBACVqB,GAAI,EAAKI,+BAA+BI,EAASd,SAASwB,MAAM,GAAGxB,SAAS1E,aAAa,GAAG2E,OAC5FM,KAAMlO,EAAErD,IACRsS,SAAU,MACVC,OAAQ,UAET,EAAK/C,eAAezG,cAAc4B,KAAK,EAAKyG,mBAAmBqB,SACrDX,EAASd,SAASiB,UAElBH,EAASd,SAASD,MAC5B,EAAKR,WAAWuB,EAASd,SAAU3N,EAAErD,OArS1B,KA0Sd0S,mBAAqB,SAAC7E,GACrB,IAAIxK,EAA2B,KAC3BwK,EAAamD,WAChB3N,EAAI,CACHrD,IAAK,EAAKgQ,SACVxK,KAAMqI,EAAamD,SAAS1E,aAAa,GAAG2E,MAC5CxL,MAAO,YACP2B,OAAQ,EACRgJ,IAAK,WAMN,EAAKZ,eAAe1G,cAAc6B,KAAK,EAAKuF,aAAa7M,IACtDwK,EAAamD,SAAS2B,oBACxB,EAAKZ,iBAAiBlE,EAAamD,SAAS2B,mBAAmB,GAAG3B,SAASgB,eAAe3O,EAAErD,MAG1F6N,EAAamD,UAAkB,OAAN3N,GAC5B,EAAKuP,gBAAgB/E,EAAamD,SAAS6B,SAAUxP,EAAGrD,MA9T5C,KAkUd8S,gBAAkB,SAACC,GAClB,IAAMC,EAAYD,EAAM/B,SAASiC,YAAYC,KAAI,SAAC7P,GACjD,OAAOA,EAAE2N,SAAS1E,aAAa,GAAG2E,SAEnC,GAAI+B,EAAW,CACd,IAAMG,EAA8B,CACnC1B,OAAQsB,EAAM/B,SAAS1E,aAAa,GAAG2E,MACvCN,UAAWqC,GAEZ,EAAKzD,kBAAkB5E,KAAKwI,KA3UhB,KA8UdC,YAAc,aA5Vf,kEAiBuBlN,GAGrB,OADa/G,KAAKoQ,kBAAkBkB,MAAK,SAAC4C,GAAD,OAAaA,EAAQ5B,SAAWvL,OAnB3E,oCAiCE,OAAQ/G,KAAKqQ,eAAiB,CAC7B1G,cAAe,GACfC,cAAe,GACfC,UAAW,CACVsK,WAAW,GAEZ/I,cAAc,EACdrB,oBAAoB,KAxCvB,yCA8EoBhD,GAClB,MAAO,CACNmL,IAAKnL,EAAKmL,IACVkC,MAAOrN,EAAKqN,YAASlE,EAErBkC,KAAMrL,EAAKqL,KACX5J,QAASzB,EAAKyB,cAAW0H,EACzBiD,SAAUpM,EAAKoM,eAAYjD,EAC3B7J,KAAMU,EAAKV,WAAQ6J,EACnBmE,KAAKtN,EAAKsN,WAAQnE,EAElBiC,GAAIpL,EAAKoL,GACTiB,OAAQrM,EAAKqM,aAAUlD,KA1F1B,kDA6F6BnJ,EAAclG,GACzC,IAAIyT,EAAoB,CACvBzT,IAAKb,KAAK6Q,SACVxK,KAAMU,EACNkB,OAAQ,GACRsC,KAAM,IACNjE,MAAO,cACP2K,IAAK,UACLhP,OAAQ,GACRyL,MAAO7M,EACP6D,MAAO,IAER1E,KAAKqQ,eAAe1G,cAAc6B,KAAK8I,GACvCtU,KAAKqQ,eAAezG,cAAc4B,KACjCxL,KAAKiS,mBAAmB,CACvBC,IAAKlS,KAAK8Q,gBACVqB,GAAImC,EAAEzT,IACNuR,KAAMvR,EAEN2H,QAAS,SAhHb,4CAoHuB+L,EAAqBC,GAAwB,IAAD,MAGD,IAF1DC,EAAY,UAAGzU,KAAKuQ,oBAAR,iBAAG,EAAmBC,gBAAtB,aAAG,EAA6Bc,MAAK,SAACpN,GAAD,OAAOA,EAAErD,KAAO0T,KACjEG,EAAiB,OAAGD,QAAH,IAAGA,GAAH,UAAGA,EAAcjD,iBAAjB,aAAG,EAAyBF,MAAK,SAACpN,GAAD,OAAsB,IAAfA,EAAEuN,YAC7DiD,GAAqBA,EAAkB7T,MAAM2T,IAChD,UAAAxU,KAAKqQ,sBAAL,mBAAqBzG,qBAArB,SAAoC4B,KACnCxL,KAAKiS,mBAAmB,CACvBC,IAAKlS,KAAK8Q,gBACVqB,GAAIqC,EACJpC,KAAMsC,EAAkB7T,IAExB2H,QAAS,IACTnC,UAAM6J,QA/HX,uCAqIkBnJ,EAAwBlG,GAAc,IAAD,OACrDK,QAAQyT,IAAI5N,GACRA,GACHA,EAAKgN,KAAI,SAAC7P,GACT,IAAIoQ,EAAoB,CACvBzT,IAAK,EAAKgQ,SACVxK,KAAMnC,EAAE2N,SAAS1E,aAAa,GAAG2E,MACjC7J,OAAQ,GACRsC,KAAM,IACNjE,MAAOpC,EAAE2N,SAAS5E,WAAa,QAAU,cACzCgE,IAAK,UACLhP,OAAQ,GACRyL,MAAO7M,EACP6D,MAAO,IASFkQ,EAAgB,EAAKC,sBAAsBP,EAAEjO,WAC7B6J,IAAlB0E,IACHN,EAAErM,YAASiI,EACXoE,EAAE/J,UAAO2F,EACToE,EAAEtD,SAAU,EACZsD,EAAErS,YAASiO,EACXoE,EAAE5P,WAAQwL,GAEX,EAAKG,eAAe1G,cAAc6B,KAAK8I,GACnCM,GACHA,EAAcpD,UAAUuC,KAAI,SAACG,GAC5B,EAAKY,4BAA4BZ,EAASI,EAAEzT,QAG9C,IAAIkR,EAAO,EAAKxB,aAAaC,SAASc,MAAK,SAACpN,GAAD,OAAOA,EAAErD,KAAOA,KACxDkR,GACHA,EAAMP,UAAUhG,KAAK,CACpB3K,IAAKyT,EAAEzT,IACPyR,OAAQgC,EAAEjO,KACVoL,WAAUvN,EAAE2N,SAAS5E,aAGtB,EAAKoD,eAAezG,cAAc4B,KACjC,EAAKyG,mBAAmB,CACvBC,IAAK,EAAKpB,gBACVqB,GAAImC,EAAEzT,IACNuR,KAAMvR,EAEN2H,QAAS,IACT6L,KAAMnQ,EAAE2N,SAASkD,WAAa,CAAC,EAAE,QAAG7E,EACpC7J,KAAM,EAAK2O,kBAAkB9Q,EAAE2N,aAG7B3N,EAAE2N,SAAS5E,YACd,EAAKgI,sBAAsBpU,EAAKyT,EAAEzT,UA7LvC,wCAkMmBgO,GACjB,GAAIA,EAAMqG,MACT,MAAM,IAAN,OAAWrG,EAAMqG,MAAM,GAAGrD,SAASxE,eAAe,GAAGyE,MAArD,cAAgEjD,EAAMqG,MAAM,GAAGrD,SAASxE,eAAe,GAAGyE,MAA1G,OApMH,sCAyMiB/K,EAAkBlG,GAAc,IAAD,OAC1C,OAAJkG,QAAI,IAAJA,KAAMgN,KAAI,SAAC7P,GACV,IAAMiR,EAA0B,CAC/BjD,IAAK,EAAKpB,gBACVqB,GAAItR,EACJuR,KAAM,EAAKT,+BAA+BzN,EAAE2N,SAAS1E,aAAa,GAAG2E,OACrEtJ,QAAS,IACTnC,KAAK,IAAD,OAAMnC,EAAE2N,SAASxE,eAAe,GAAGyE,MAAnC,cAA8C5N,EAAE2N,SAASxE,eAAe,GAAGyE,MAA3E,MAGL,EAAKzB,eAAezG,cAAc4B,KAAK,EAAKyG,mBAAmBkD,IAC/D,EAAK5E,aAAaE,MAAMjF,KAAK,CAC5B3K,IAAKsU,EAAQjD,IACbC,GAAItR,EACJuR,KAAM,EAAKT,+BAA+BzN,EAAE2N,SAAS1E,aAAa,GAAG2E,cAvNzE,qCAoOgBW,EAAgB3D,GAC9B,IAAI5K,EAA2B,CAC9BrD,IAAKb,KAAK6Q,SACVxK,KAAMyI,EACNxI,MAAO,YACP0K,SAAS,EACT/O,YAAQiO,EACRxL,WAAOwL,EACP3F,KAAM,IACNtC,OAAQ,EACRgJ,IAAK,cAeN,OAPAjR,KAAKqQ,eAAe1G,cAAc6B,KAAKxL,KAAK+Q,aAAa7M,IACzDlE,KAAKuQ,aAAaC,SAAShF,KAAK,CAC/B3K,IAAKqD,EAAErD,IACPyR,OAAQpO,EAAEmC,KACVoM,OAAQA,EACRjB,UAAW,KAELtN,IA7PT,gDAuW4B,IACN,QADK,OACrBlE,KAAKiQ,aACJ,UAAAjQ,KAAKiQ,iBAAL,mBAAgBtG,qBAAhB,eAA+BgB,UAA/B,UAAyC3K,KAAKqQ,sBAA9C,iBAAyC,EAAqB1G,qBAA9D,aAAyC,EAAoCgB,SAChF3K,KAAKqQ,eAAe1G,cAAcoK,KAAI,SAACqB,GACtC,IAAMC,EAAY,EAAKpF,UAAUtG,cAAc2H,MAAK,SAACpN,GAAD,OAAOkR,EAAU/O,MAAQnC,EAAEmC,QAC3EgP,IACHD,EAAU5K,IAAM6K,EAAU7K,IAE1B8K,KAAEpV,OAAO,EAAK+P,UAAUtG,eAAe,SAAC4L,GAAD,OAAOA,EAAE1U,MAAQwU,EAAUxU,WAGpEb,KAAKqQ,eAAe1G,cAAcoK,KAAI,SAACqB,GACtC,QAAsBlF,IAAlBkF,EAAU5K,IAAmB,CAAC,IAAD,EAC1B6K,EAAY,EAAKpF,UAAUtG,cAAc6L,OAAO,EAAG,GACzDJ,EAAU5K,IAAV,OAAgB6K,QAAhB,IAAgBA,GAAhB,UAAgBA,EAAY,UAA5B,aAAgB,EAAgB7K,SAGxBxK,KAAKiQ,UAAUtG,cAAcgB,OAAS3K,KAAKqQ,eAAe1G,cAAcgB,OAClF3K,KAAKqQ,eAAe1G,cAAcoK,KAAI,SAACqB,GACtC,IAAMC,EAAY,EAAKpF,UAAUtG,cAAc2H,MAAK,SAACpN,GAAD,OAAOkR,EAAU/O,MAAQnC,EAAEmC,QAC3EgP,IACHD,EAAU5K,IAAM6K,EAAU7K,IAE1B8K,KAAEpV,OAAO,EAAK+P,UAAUtG,eAAe,SAAC4L,GAAD,OAAOA,EAAE1U,MAAQwU,EAAUxU,WAG1Db,KAAKiQ,UAAUtG,cAAcgB,OAAS3K,KAAKqQ,eAAe1G,cAAcgB,QAClF3K,KAAKqQ,eAAe1G,cAAcoK,KAAI,SAACqB,GACtC,IAAMC,EAAY,EAAKpF,UAAUtG,cAAc2H,MAAK,SAACpN,GAAD,OAAOkR,EAAU/O,MAAQnC,EAAEmC,QAC3EgP,IACHD,EAAU5K,IAAM6K,EAAU7K,IAE1B8K,KAAEpV,OAAO,EAAK+P,UAAUtG,eAAe,SAAC4L,GAAD,OAAOA,EAAE1U,MAAQwU,EAAUxU,cAvYxE,uCA+ZkBqD,EAAQ+L,GAAiB,IAAD,OAmBxC,GAlBA/O,QAAQyT,IAAI,wGAA+F1E,GAC3GjQ,KAAKqQ,eAAiBrQ,KAAKsQ,cAE3BtQ,KAAKiQ,UAAYwF,KAAK9N,MAAM8N,KAAK5N,UAAUoI,IAE3CjQ,KAAK4P,KAAO,EACZ5P,KAAK6P,SAAW,EAChB7P,KAAKmQ,cAAgB,EACrBnQ,KAAKoQ,kBAAoB,GAMzBpQ,KAAKuQ,aAAe,CACnBC,SAAU,GACVC,MAAO,IAEJvM,EAAG,CACN,IAAM6C,EAAmB7C,EAErBwR,EAAS3O,EAAK2O,OACZC,EAAe5O,EAAK4O,cAAgB,GACpCC,EAAY7O,EAAK6O,WAAa,GAC3B,OAATA,QAAS,IAATA,KAAW7B,KAAI,SAAC7P,GACf,EAAKyP,gBAAgBzP,MAEhB,OAANwR,QAAM,IAANA,KAAQ3B,KAAI,SAAC7P,GACZ,EAAKwO,aAAaxO,MAEP,OAAZyR,QAAY,IAAZA,KAAc5B,KAAI,SAAC7P,GAClB,EAAKqP,mBAAmBrP,MAK1B,OAFAlE,KAAK6V,0BAEE7V,KAAKqQ,mBApcd,K,yCCNO,SAASyF,GAA2BC,EAAkBC,EAAyBC,EAAqBC,IA9DpG,SAAyBC,EAAgBC,EAAkBL,EAAkBM,EAAwBJ,GAC3G,IACC,IAAIK,EAAOC,EAAKC,EACZR,EAA4BK,EAChCf,KAAEmB,QAAQT,GAAoB,SAAUU,GACvCA,EAAWC,WAEZX,EAAqB,GACrBV,KAAEmB,QAAQN,GAAW,SAAUS,GAC9BN,EAAQ,CAAEO,KAAMD,EAAaC,KAAO,EAAGC,GAAIF,EAAaG,OAAS,GACjER,EAAM,CACLM,KAAMD,EAAaC,KAAO,EAC1BC,GAAIF,EAAaG,OAAS,EAAIH,EAAajM,QAE5C6L,EAAST,EAAYiB,SAASV,EAAOC,EAAK,CACzC9K,UAAW,gBACXwL,MAAOL,EAAaM,UAErBlB,EAAmBxK,KAAKgL,MAEzBlB,KAAEmB,QAAQL,GAAa,SAAUe,GAChC,IAAK5R,MAAM4R,EAAgBC,MAAMC,aAC7B9R,MAAM4R,EAAgBC,MAAME,eAC5B/R,MAAM4R,EAAgBC,MAAMG,aAC5BhS,MAAM4R,EAAgBC,MAAMI,SAAS,CACxClB,EAAQ,CACPO,KAAMM,EAAgBC,MAAMC,UAAY,EACxCP,GAAIK,EAAgBC,MAAMK,YAAc,GAG1C,IAAIC,EAAYP,EAAgBC,MAC3B9B,KAAEqC,QAAQR,EAAgBS,kBAE9BF,EADepC,KAAE7Q,IAAI0S,EAAgBS,gBACvBN,aAGff,EAAM,CACLM,KAAMa,EAAUF,QACbE,EAAUF,QAAU,EAEpBE,EAAUL,UAAY,EACzBP,GAAIY,EAAUG,UACXH,EAAUG,UAEVH,EAAUD,YAAcC,EAAU5F,MAAMnH,QAE5C6L,EAAST,EAAYiB,SAASV,EAAOC,EAAK,CACzC9K,UAAW,gBACXwL,MAAK,OAAEE,QAAF,IAAEA,OAAF,EAAEA,EAAiBD,UAGzBlB,EAAmBxK,KAAKgL,OAKzBP,EAAeD,GACd,MAAO/U,GACRC,QAAQyT,IAAI1T,IAuBb6W,CAAgB5B,EAAIC,UAAWD,EAAIE,YAAaL,EAAaC,EAAoBC,GC/D3E,IAAM8B,GAAkB,SAAC,GAAuE,IAArEC,EAAoE,EAApEA,oBAAqB/H,EAA+C,EAA/CA,UAAWgI,EAAoC,EAApCA,WAAWC,EAAyB,EAAzBA,cAIxEC,EAAgCC,mBAAQ,kBAAM,IAAIzI,KAAyB,IAJsB,EAyBnD0I,mBAAgB,IAzBmC,mBAyB9FC,EAzB8F,KAyB3EC,EAzB2E,KA+B/FC,EAAe,SAACC,EAAwBC,GAAiC,IAAD,IAC7E,IACCxX,QAAQyT,IAAI,6EAAoE1E,GAChF/O,QAAQyT,IAAI,4GAAgG8D,EAAkBtC,UAAUxL,QACxIgO,KAAOC,YAAYH,EAAkBtC,UAAUxL,OAAQ,GACvDzJ,QAAQyT,IAAI,oGAA2F8D,EAAkBrC,aAEzHuC,KAAOC,YAAYH,EAAkBrC,YAAYzL,OAAQ,GACzDzJ,QAAQyT,IAAI,wFAA+E8D,GAC1F,MAAOxX,GACRC,QAAQyT,IAAI1T,GAEb,GAAIwX,EAAkBI,KAAkD,KAA1B,OAAjBJ,QAAiB,IAAjBA,GAAA,UAAAA,EAAmBrC,mBAAnB,eAAgCzL,SAA2D,KAAxB,OAAjB8N,QAAiB,IAAjBA,GAAA,UAAAA,EAAmBtC,iBAAnB,eAA8BxL,QAAe,CAC3H,IAAMmO,EDqBF,SAAoBC,EAAiB1C,EAAwBJ,EAAqB+C,GACxF,IAAIhD,EAA4BK,EAChCf,KAAEmB,QAAQT,GAAoB,SAAUU,GACvCA,EAAWC,WAEZX,EAAqB,GACrB,IAAMjP,EAAmBiS,EACzB9X,QAAQyT,IAAI5N,GACZ,IAAI2O,EAAS3O,EAAK2O,OACZC,EAAe5O,EAAK4O,cAAgB,GACpCC,EAAY7O,EAAK6O,WAAa,GAChCqD,EAAe,IAAIC,IACnBC,EAAsB,IAAID,IAC1BE,EAAS,EA0Cb,OAzCS,OAATxD,QAAS,IAATA,KAAW7B,KAAI,SAAC7P,GACX+U,EAAaI,IAAInV,EAAE2N,SAAS1E,aAAa,GAAG2E,OAC/CqH,EAAoBG,IAAIpV,EAAE2N,SAAS1E,aAAa,GAAG2E,MAAO5N,GAE1D+U,EAAaK,IAAIpV,EAAE2N,SAAS1E,aAAa,GAAG2E,MAAO5N,MAG/C,OAANwR,QAAM,IAANA,KAAQ3B,KAAI,SAAC7P,GACR+U,EAAaI,IAAInV,EAAE2N,SAAS1E,aAAa,GAAG2E,OAC/CqH,EAAoBG,IAAIpV,EAAE2N,SAAS1E,aAAa,GAAG2E,MAAO5N,GAE1D+U,EAAaK,IAAIpV,EAAE2N,SAAS1E,aAAa,GAAG2E,MAAO5N,MAGzC,OAAZyR,QAAY,IAAZA,KAAc5B,KAAI,SAAC7P,GACd+U,EAAaI,IAAInV,EAAE2N,SAAS1E,aAAa,GAAG2E,OAC/CqH,EAAoBG,IAAIpV,EAAE2N,SAAS1E,aAAa,GAAG2E,MAAO5N,GAE1D+U,EAAaK,IAAIpV,EAAE2N,SAAS1E,aAAa,GAAG2E,MAAO5N,MAGlC,OAAnBiV,QAAmB,IAAnBA,KAAqB1C,SAAQ,SAACvS,GAC7BkV,GAAkB,EAClB,IAAM9C,EAAQ,CACbO,KAAM3S,EAAE2N,SAAS1E,aAAa,GAAGkK,UAAY,EAC7CP,GAAI5S,EAAE2N,SAAS1E,aAAa,GAAGsK,YAAc,GAGxClB,EAAM,CACXM,KAAM3S,EAAE2N,SAAS1E,aAAa,GAAGqK,QAAU,EAC3CV,GAAI5S,EAAE2N,SAAS1E,aAAa,GAAG0K,WAG1BrB,EAASuC,EAAW/B,SAASV,EAAOC,EAAK,CAC9C9K,UAAW,gBACXwL,MAAO,sBAERjB,EAAmBxK,KAAKgL,MAGzBP,EAAeD,GACRoD,EC5EoBG,CAAWb,EAAUJ,EAAmBC,EAAsBE,EAAkBI,IAAIhH,UAE7G,OADA3Q,QAAQyT,IAAImE,GACa,IAArBA,EACIL,EAAkBI,IAAIhH,SAEtB,KAIT,OAAO,MAUR2H,qBAAU,WACTtY,QAAQyT,IAAI2D,KACV,CAACA,IAGJ,IAAMmB,EAAe1T,IAAM2T,aAC1B,SAAChB,EAA6BiB,GAC7BzB,EAAcQ,EAASkB,YACvB,IAAMnB,EHkMF,SAAmBpS,GACxB,IAAMwT,EAAY/L,GAAUgM,SAASzT,GASrC,OAPA0H,GAAOgM,MAAQF,EAAUG,OAOlB,CAGLnB,IARU9K,GAAOC,eASjBmI,UAAW0D,EAAUI,OACrB7D,YAAarI,GAAOkM,QGjNKC,CAAUxB,EAASkB,YAC1C9D,GAA2B4C,EAAUJ,EAAmBC,EAAsBE,GACjF,IAAM5G,EAAW2G,EAAaC,EAAmBC,GAC7C7G,GAnBa,SAACA,EAAe5B,EAAekK,GACjD,IAAMC,EAASjC,EAAOkC,iBAAiBxI,EAAU5B,GAE7CmK,GAEHpC,EAAoBoC,EAAOD,GAe1BG,CAAWzI,EAAU5B,EAAUyI,EAASkB,cAG1C,CAAC3J,EAAWqI,EAAmBE,IAE1B+B,EAAOnC,mBAAQ,kBAAM9C,KAAEkF,SAASf,EAAc,OAAO,CAACA,IAI5D,OACC,qBAAKhO,UAAU,gBAAgBgP,MAAO,CAACC,SAAS,SAAhD,SAOC,cAAC,KAAD,CACCpQ,MAAO2N,EACPjN,SAAUuP,EACVI,QAAS,CACRC,KAAM,OACNC,aAAa,EACbC,MAAO,UACPC,QAAS,Q,mBCmXCC,GA3cH,SAACnV,GAEZ,IAAMoV,EAAqC,IAAI/B,IACzCgC,EAAqC,IAAIhC,IAEzCiC,EAAW,CAChBxR,cAAe,GACfC,cAAe,GAOfC,UAAW,CACVsK,WAAW,GAEZ/I,aAAc,KACdrB,oBAAoB,GAlBS,EAoHJsO,mBAAc8C,GApHV,mBAoHvBC,EApHuB,KAoHhBC,EApHgB,OAqHMhD,mBAAiB,IArHvB,mBAqHvBJ,EArHuB,KAqHXC,EArHW,OAsHSG,oBAAS,GAtHlB,mBAsHvBiD,EAtHuB,KAsHZC,EAtHY,KA6HxBC,EAAmB,SAACC,GACzBR,EAActE,QACP,OAAP8E,QAAO,IAAPA,KAAShF,SAAQ,SAACiF,EAAkBC,GACnCV,EAAc3B,IAAIoC,EAAE7a,IAAK8a,OAOrBC,EAAmB,SAACC,GACzBX,EAAcvE,QACP,OAAPkF,QAAO,IAAPA,KAASpF,SAAQ,SAACqF,EAAkBH,GACnCT,EAAc5B,IAAIwC,EAAEjb,IAAK8a,OA8L3BH,EAAiBJ,EAAMzR,eACvBiS,EAAiBR,EAAMxR,eACvB,IAkBImS,EAlBE/D,EAAsBjS,cAAA,uCAAkB,WAAOiW,EAAgBC,GAAvB,SAAAC,EAAA,sDAC7Cb,EAASF,GACTgB,YAAW,WACVX,EAAiBQ,EAAUrS,eAC3BiS,EAAiBI,EAAUpS,eAC3ByR,EAASW,GACT9D,EAAc+D,KACZ,IAP0C,2CAAlB,wDAQzB,IAMG7Q,EAAegQ,EAAMhQ,aAC3BrF,aAAgB,WACf7E,QAAQyT,IAAIyG,KACV,CAAChQ,IAEiB,OAAjBA,IACH2Q,EAAY,cAAC,EAAD,CAAoB3Q,aAAcgQ,EAAMhQ,aAAcjB,cA9DzC,SAACiS,EAAc9R,EAAe+R,GACvDhB,EACCiB,aAAQ,SAACC,GACR,IAAMxV,EAAOwV,EAAMnR,aAEnB,GADArE,EAAKqV,GAAQ9R,EACT+R,EAAQ,CACX,IAAMxb,EAAMkG,EAAKlG,IACjB,GAAIA,EAAM,EAAG,CAEZ,IAAM8a,EAAMT,EAAcsB,IAAI3b,QAClBqP,IAARyL,GAAqBA,GAAO,IAC/BY,EAAM3S,cAAc+R,GAAO5U,EAC3BwV,EAAMxS,oBAAqB,OAEtB,CACN,IAAM4R,EAAMV,EAAcuB,IAAI3b,QAClBqP,IAARyL,GAAqBA,GAAO,IAC/BY,EAAM5S,cAAcgS,GAAO5U,EAC3BwV,EAAMxS,oBAAqB,aA+CjC,IAAM0S,EAAuB1W,SAAa,MA6B1C,OACC,sBAAK0F,UAAU,oBAAf,UACC,sBAAKA,UAAU,yCAAf,UACC,qBAAKA,UAAU,yBAAf,mBACA,wBACCA,UAAU,uFADX,mBAMA,uBAAOlB,KAAK,OAAOsB,KAAK,WAAWb,SAhCrB,SAAC/J,GACjB,IACA,IAAMyb,EAAOzb,EAAEoJ,OAAOsS,MAAM,GACtBC,EAAa,IAAIC,WACvBD,EAAWE,WAAWJ,GACtBE,EAAWG,OAAS,WACnB,IACMC,EADSJ,EAAWxC,OACD1P,MAAM,SAC/BxJ,QAAQyT,IAAI,YAAac,KAAK9N,MAAMqV,EAAU,KAC9C9b,QAAQyT,IAAI,kBAAmBqI,EAAU,IACzC3B,EAAS5F,KAAK9N,MAAMqV,EAAU,KAC9B9E,EAAc8E,EAAU,KAEzBJ,EAAWK,QAAU,WACpB/b,QAAQyT,IAAIiI,EAAWzb,QAExB,MAAMF,GACNC,QAAQyT,IAAI,WAe6CnL,IAAKiT,EAAiBS,UAAU,EAAOzR,UAAU,WACxG,wBACC0R,QArCgB,SAACC,GACpBX,EAAgBzW,QAAQqX,SAqCrB5R,UAAU,yFAFX,sBAOA,wBACC0R,QA9DgB,WACnB,IAAMG,EAAM,CAAC7H,KAAK5N,UAAUuT,GAAQ,QAASnD,GACvCsF,EAAO,IAAIC,KAAKF,EAAK,CAAE/S,KAAM,6BACnCkT,kBAAOF,EAAM,kBA4DV9R,UAAU,2FAFX,wBAQD,sBAAKA,UAAU,WAAWgP,MAAO,CAAExY,OAAQ,OAAQyC,MAAO,SAA1D,UACC,sBAAK+G,UAAU,iCAAiCgP,MAAO,CAAExY,OAAQ,QAAjE,UACC,cAACyb,GAAA,EAAD,CACCC,GAAIrC,EACJsC,QAAS,IACTnS,UAAU,oBACVoS,WAAY,CACXC,MAAO,oCACPC,KAAM,sCAEPC,eAAa,EARd,SAUC,qBAAKvS,UAAU,kBAAf,SACC,cAAC,GAAD,CAAiBuM,oBAAqBA,EAAqB/H,UAAWmL,EAAOnD,WAAYA,EAAYC,cAAeA,QAGtH,wBACCzM,UAAU,0EACV0R,QAAS,WACR5B,GAAkB,SAACH,GAAD,OAAYA,MAHhC,SAME,SAGH,qBAAK3P,UAAU,gBAAf,SACC,cAAC,EAAD,CACC9B,cAAeyR,EAAMzR,cACrBC,cAAewR,EAAMxR,cACrBC,UAAWuR,EAAMvR,UACjBE,mBAAoBqR,EAAMrR,mBAC1B5D,eApSsB,SAAClF,GAG3B,OAFaA,EAAE4K,MAGd,IAAK,mBACJ,IAAMoS,EAAMhd,EAAEid,QAAQxY,QACtB2V,EACCiB,aAAQ,SAACC,GACR,GAAI0B,GACH,GAAIA,aAAepe,OAAS,CAC3BqB,QAAQyT,IAAI,UACZ,IAAMgH,EAAMV,EAAcuB,IAAIyB,EAAIpd,KAClC,QAAYqP,IAARyL,GAAqBA,GAAO,EAAG,CAClC,IAAMwC,EAAK5B,EAAM5S,cAAcgS,GAE/BY,EAAMnR,aAAe+S,QAEhB,GAAIF,aAAepe,OAAS,CAClC,IAAM8b,EAAMT,EAAcsB,IAAIyB,EAAIpd,KAElC,QAAYqP,IAARyL,GAAqBA,GAAO,EAAG,CAClC,IAAMyC,EAAK7B,EAAM3S,cAAc+R,GAC/BY,EAAMnR,aAAegT,SAIvB7B,EAAMnR,aAAe,WA2QtBtB,cA1PqB,SAACzJ,GAC1B,IAAMge,EAAmBhe,EAAIge,iBACvBC,EAAmBje,EAAIie,iBACvBC,EAAkBle,EAAIke,gBAEtBC,GADmBne,EAAIoe,iBACJpe,EAAIme,kBACvBE,EAAkBre,EAAIqe,gBACtBC,EAAoBte,EAAIwJ,UAGxB+U,EAAkB,IAAI1F,IACtB2F,EAAkB,IAAI3F,IAC5BmC,EACCiB,aAAQ,SAACC,GACR,IAAIuC,EAAOvC,EAAM5S,cAEb2U,GACHA,EAAiB7H,SAAQ,SAAC0H,GACzBS,EAAgBtF,IAAI6E,EAAGtd,IAAKsd,GAC5B,IAAMxC,EAAMV,EAAcuB,IAAI2B,EAAGtd,UACrBqP,IAARyL,GAAqBA,GAAO,IAC/BmD,EAAKnD,GAAOwC,EACR5B,EAAMnR,cAAgBmR,EAAMnR,aAAavK,MAAQsd,EAAGtd,MACvD0b,EAAMnR,aAAe+S,OAKrBE,GACHA,EAAiB5H,SAAQ,SAAC5V,GACzB,IAAMsd,EAAKS,EAAgBpC,IAAI3b,GACzB8a,EAAMV,EAAcuB,IAAI3b,GAC1Bsd,QAAcjO,IAARyL,IAETV,EAAc3B,IAAI6E,EAAGtd,IAAKie,EAAKnU,QAC/BmU,EAAKtT,KAAK2S,OAITI,IACHO,EAAOA,EAAKC,QAAO,SAACZ,GACnB,OAAII,EAAgBS,SAASb,EAAGtd,QAKjC0b,EAAM5S,cAAgBmV,EACtBtD,EAAiBsD,IAGlB,IAAIG,EAAO1C,EAAM3S,cACb4U,GACHA,EAAiB/H,SAAQ,SAAC2H,GACzBS,EAAgBvF,IAAI8E,EAAGvd,IAAKud,GAC5B,IAAMzC,EAAMT,EAAcsB,IAAI4B,EAAGvd,UACrBqP,IAARyL,GAAqBA,GAAO,IAC/BsD,EAAKtD,GAAOyC,EACR7B,EAAMnR,cAAgBmR,EAAMnR,aAAavK,MAAQud,EAAGvd,MACvD0b,EAAMnR,aAAegT,OAerBM,IACHO,EAAOA,EAAKF,QAAO,SAACX,GACnB,OAAIM,EAAgBM,SAASZ,EAAGvd,QAKjC0b,EAAM3S,cAAgBqV,EACtBrD,EAAiBqD,IAGdN,IACHpC,EAAM1S,UAAY8U,GAEnBpC,EAAMxS,oBAAqB,WAgL1BgS,SCjeLmD,IAASC,OAAO,cAAC,GAAD,IAASC,SAASC,eAAe,U,uGCHjD,IAAItL,EAAM,CACT,eAAgB,CACf,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,mBAAoB,CACnB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,mBAAoB,CACnB,IACA,GAED,uBAAwB,CACvB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,iCAAkC,CACjC,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,eAAgB,CACf,IACA,GAED,qBAAsB,CACrB,IACA,IAED,WAAY,CACX,IACA,IAED,iBAAkB,CACjB,IACA,EACA,IAED,iBAAkB,CACjB,IACA,IAED,qBAAsB,CACrB,IACA,EACA,EACA,IAED,6BAA8B,CAC7B,IACA,IAED,eAAgB,CACf,IACA,IAED,mBAAoB,CACnB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,eAAgB,CACf,IACA,IAED,qBAAsB,CACrB,IACA,IAED,eAAgB,CACf,IACA,IAED,qBAAsB,CACrB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,eAAgB,CACf,IACA,IAED,mBAAoB,CACnB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,eAAgB,CACf,IACA,IAED,eAAgB,CACf,IACA,EACA,IAED,uBAAwB,CACvB,IACA,IAED,aAAc,CACb,IACA,IAED,qBAAsB,CACrB,IACA,IAED,iBAAkB,CACjB,IACA,EACA,EACA,IAED,6BAA8B,CAC7B,IACA,IAED,yCAA0C,CACzC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,iCAAkC,CACjC,IACA,EACA,EACA,IAED,2BAA4B,CAC3B,IACA,EACA,EACA,IAED,iBAAkB,CACjB,IACA,IAED,eAAgB,CACf,IACA,IAED,6BAA8B,CAC7B,IACA,GAED,qBAAsB,CACrB,IACA,IAED,eAAgB,CACf,IACA,EACA,IAED,mBAAoB,CACnB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,eAAgB,CACf,IACA,IAED,yBAA0B,CACzB,IACA,GAED,+BAAgC,CAC/B,IACA,IAED,iBAAkB,CACjB,IACA,IAED,YAAa,CACZ,IAED,iBAAkB,CACjB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,aAAc,CACb,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mBAAoB,CACnB,IACA,EACA,IAED,iBAAkB,CACjB,IACA,IAED,eAAgB,CACf,IACA,EACA,EACA,EACA,IAED,eAAgB,CACf,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,eAAgB,CACf,IACA,EACA,EACA,GAED,qBAAsB,CACrB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,WAAY,CACX,IACA,IAED,WAAY,CACX,IACA,IAED,eAAgB,CACf,IACA,IAED,eAAgB,CACf,IACA,IAED,iBAAkB,CACjB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,eAAgB,CACf,IACA,IAED,iBAAkB,CACjB,IACA,EACA,IAED,qBAAsB,CACrB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,iBAAkB,CACjB,IACA,EACA,EACA,IAED,2BAA4B,CAC3B,IACA,IAED,qBAAsB,CACrB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,eAAgB,CACf,IACA,EACA,EACA,IAED,qBAAsB,CACrB,IACA,IAED,+BAAgC,CAC/B,IACA,KAED,eAAgB,CACf,IACA,KAED,iBAAkB,CACjB,IACA,KAED,qBAAsB,CACrB,IACA,GAED,mBAAoB,CACnB,IACA,KAED,eAAgB,CACf,IACA,KAED,uBAAwB,CACvB,IACA,KAED,6BAA8B,CAC7B,IACA,KAED,iBAAkB,CACjB,IACA,KAED,iBAAkB,CACjB,IACA,KAED,uBAAwB,CACvB,IACA,EACA,EACA,IAED,mBAAoB,CACnB,IACA,KAED,yBAA0B,CACzB,IACA,KAED,iBAAkB,CACjB,IACA,KAED,qBAAsB,CACrB,IACA,KAED,iBAAkB,CACjB,IACA,IAED,aAAc,CACb,IACA,KAED,yBAA0B,CACzB,IACA,KAED,yBAA0B,CACzB,IACA,KAED,uBAAwB,CACvB,IACA,KAED,iBAAkB,CACjB,IACA,KAED,eAAgB,CACf,IACA,EACA,EACA,EACA,EACA,GAED,iBAAkB,CACjB,IACA,IAED,qBAAsB,CACrB,IACA,KAED,eAAgB,CACf,IACA,KAED,qBAAsB,CACrB,IACA,KAED,mBAAoB,CACnB,IACA,KAED,yCAA0C,CACzC,IACA,IAED,iBAAkB,CACjB,IACA,KAED,eAAgB,CACf,IACA,MAGF,SAASuL,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAE1L,EAAKwL,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAI3e,EAAI,IAAIuE,MAAM,uBAAyB+Z,EAAM,KAEjD,MADAte,EAAE4e,KAAO,mBACH5e,KAIR,IAAI6e,EAAM/L,EAAIwL,GAAMnV,EAAK0V,EAAI,GAC7B,OAAOJ,QAAQK,IAAID,EAAIE,MAAM,GAAGjM,IAAIyL,EAAoBve,IAAI2e,MAAK,WAChE,OAAOJ,EAAoBS,EAAE7V,EAAI,MAGnCkV,EAAoBY,KAAO,WAC1B,OAAOC,OAAOD,KAAKnM,IAEpBuL,EAAoBlV,GAAK,GACzBgW,EAAOC,QAAUf,I","file":"static/js/main.dc9d78a1.chunk.js","sourcesContent":["/*\n *  Copyright (C) 1998-2021 by Northwoods Software Corporation. All Rights Reserved.\n */\n\n/*\n * This is an extension and not part of the main GoJS library.\n * Note that the API for this class may change with any version, even point releases.\n * If you intend to use an extension in production, you should copy the code to your own source directory.\n * Extensions can be found in the GoJS kit under the extensions or extensionsTS folders.\n * See the Extensions intro page (https://gojs.net/latest/intro/extensions.html) for more information.\n */\nimport * as go from \"gojs\";\n\n/**\n * The GuidedDraggingTool class makes guidelines visible as the parts are dragged around a diagram\n * when the selected part is nearly aligned with another part.\n *\n * If you want to experiment with this extension, try the <a href=\"../../extensionsTS/GuidedDragging.html\">Guided Dragging</a> sample.\n * @category Tool Extension\n */\nexport class GuidedDraggingTool extends go.DraggingTool {\n\t// horizontal guidelines\n\tprivate guidelineHtop: go.Part;\n\tprivate guidelineHbottom: go.Part;\n\tprivate guidelineHcenter: go.Part;\n\t// vertical guidelines\n\tprivate guidelineVleft: go.Part;\n\tprivate guidelineVright: go.Part;\n\tprivate guidelineVcenter: go.Part;\n\n\t// properties that the programmer can modify\n\tprivate _guidelineSnapDistance: number = 6;\n\tprivate _isGuidelineEnabled: boolean = true;\n\tprivate _horizontalGuidelineColor: string = \"gray\";\n\tprivate _verticalGuidelineColor: string = \"gray\";\n\tprivate _centerGuidelineColor: string = \"gray\";\n\tprivate _guidelineWidth: number = 1;\n\tprivate _searchDistance: number = 1000;\n\tprivate _isGuidelineSnapEnabled: boolean = true;\n\n\t/**\n\t * Constructs a GuidedDraggingTool and sets up the temporary guideline parts.\n\t */\n\tconstructor() {\n\t\tsuper();\n\n\t\tconst partProperties = { layerName: \"Tool\", isInDocumentBounds: false };\n\t\tconst shapeProperties = { stroke: \"gray\", isGeometryPositioned: true };\n\n\t\tconst $ = go.GraphObject.make;\n\t\t// temporary parts for horizonal guidelines\n\t\tthis.guidelineHtop = $(go.Part, partProperties, $(go.Shape, shapeProperties, { geometryString: \"M0 0 100 0\" }));\n\t\tthis.guidelineHbottom = $(go.Part, partProperties, $(go.Shape, shapeProperties, { geometryString: \"M0 0 100 0\" }));\n\t\tthis.guidelineHcenter = $(go.Part, partProperties, $(go.Shape, shapeProperties, { geometryString: \"M0 0 100 0\" }));\n\t\t// temporary parts for vertical guidelines\n\t\tthis.guidelineVleft = $(go.Part, partProperties, $(go.Shape, shapeProperties, { geometryString: \"M0 0 0 100\" }));\n\t\tthis.guidelineVright = $(go.Part, partProperties, $(go.Shape, shapeProperties, { geometryString: \"M0 0 0 100\" }));\n\t\tthis.guidelineVcenter = $(go.Part, partProperties, $(go.Shape, shapeProperties, { geometryString: \"M0 0 0 100\" }));\n\t}\n\n\t/**\n\t * Gets or sets the margin of error for which guidelines show up.\n\t *\n\t * The default value is 6.\n\t * Guidelines will show up when the aligned nods are ± 6px away from perfect alignment.\n\t */\n\tget guidelineSnapDistance(): number {\n\t\treturn this._guidelineSnapDistance;\n\t}\n\tset guidelineSnapDistance(val: number) {\n\t\tif (typeof val !== \"number\" || isNaN(val) || val < 0) throw new Error(\"new value for GuideddraggingTool.guidelineSnapDistance must be a non-negative number\");\n\t\tif (this._guidelineSnapDistance !== val) {\n\t\t\tthis._guidelineSnapDistance = val;\n\t\t}\n\t}\n\n\t/**\n\t * Gets or sets whether the guidelines are enabled or disable.\n\t *\n\t * The default value is true.\n\t */\n\tget isGuidelineEnabled(): boolean {\n\t\treturn this._isGuidelineEnabled;\n\t}\n\tset isGuidelineEnabled(val: boolean) {\n\t\tif (typeof val !== \"boolean\") throw new Error(\"new value for GuidedDraggingTool.isGuidelineEnabled must be a boolean value.\");\n\t\tif (this._isGuidelineEnabled !== val) {\n\t\t\tthis._isGuidelineEnabled = val;\n\t\t}\n\t}\n\n\t/**\n\t * Gets or sets the color of horizontal guidelines.\n\t *\n\t * The default value is \"gray\".\n\t */\n\tget horizontalGuidelineColor(): string {\n\t\treturn this._horizontalGuidelineColor;\n\t}\n\tset horizontalGuidelineColor(val: string) {\n\t\tif (this._horizontalGuidelineColor !== val) {\n\t\t\tthis._horizontalGuidelineColor = val;\n\t\t\t(this.guidelineHbottom.elements.first() as go.Shape).stroke = this._horizontalGuidelineColor;\n\t\t\t(this.guidelineHtop.elements.first() as go.Shape).stroke = this._horizontalGuidelineColor;\n\t\t}\n\t}\n\n\t/**\n\t * Gets or sets the color of vertical guidelines.\n\t *\n\t * The default value is \"gray\".\n\t */\n\tget verticalGuidelineColor(): string {\n\t\treturn this._verticalGuidelineColor;\n\t}\n\tset verticalGuidelineColor(val: string) {\n\t\tif (this._verticalGuidelineColor !== val) {\n\t\t\tthis._verticalGuidelineColor = val;\n\t\t\t(this.guidelineVleft.elements.first() as go.Shape).stroke = this._verticalGuidelineColor;\n\t\t\t(this.guidelineVright.elements.first() as go.Shape).stroke = this._verticalGuidelineColor;\n\t\t}\n\t}\n\n\t/**\n\t * Gets or sets the color of center guidelines.\n\t *\n\t * The default value is \"gray\".\n\t */\n\tget centerGuidelineColor(): string {\n\t\treturn this._centerGuidelineColor;\n\t}\n\tset centerGuidelineColor(val: string) {\n\t\tif (this._centerGuidelineColor !== val) {\n\t\t\tthis._centerGuidelineColor = val;\n\t\t\t(this.guidelineVcenter.elements.first() as go.Shape).stroke = this._centerGuidelineColor;\n\t\t\t(this.guidelineHcenter.elements.first() as go.Shape).stroke = this._centerGuidelineColor;\n\t\t}\n\t}\n\n\t/**\n\t * Gets or sets the width guidelines.\n\t *\n\t * The default value is 1.\n\t */\n\tget guidelineWidth(): number {\n\t\treturn this._guidelineWidth;\n\t}\n\tset guidelineWidth(val: number) {\n\t\tif (typeof val !== \"number\" || isNaN(val) || val < 0) throw new Error(\"New value for GuidedDraggingTool.guidelineWidth must be a non-negative number.\");\n\t\tif (this._guidelineWidth !== val) {\n\t\t\tthis._guidelineWidth = val;\n\t\t\t(this.guidelineVcenter.elements.first() as go.Shape).strokeWidth = val;\n\t\t\t(this.guidelineHcenter.elements.first() as go.Shape).strokeWidth = val;\n\t\t\t(this.guidelineVleft.elements.first() as go.Shape).strokeWidth = val;\n\t\t\t(this.guidelineVright.elements.first() as go.Shape).strokeWidth = val;\n\t\t\t(this.guidelineHbottom.elements.first() as go.Shape).strokeWidth = val;\n\t\t\t(this.guidelineHtop.elements.first() as go.Shape).strokeWidth = val;\n\t\t}\n\t}\n\n\t/**\n\t * Gets or sets the distance around the selected part to search for aligned parts.\n\t *\n\t * The default value is 1000.\n\t * Set this to Infinity if you want to search the entire diagram no matter how far away.\n\t */\n\tget searchDistance(): number {\n\t\treturn this._searchDistance;\n\t}\n\tset searchDistance(val: number) {\n\t\tif (typeof val !== \"number\" || isNaN(val) || val <= 0) throw new Error(\"new value for GuidedDraggingTool.searchDistance must be a positive number.\");\n\t\tif (this._searchDistance !== val) {\n\t\t\tthis._searchDistance = val;\n\t\t}\n\t}\n\n\t/**\n\t * Gets or sets whether snapping to guidelines is enabled.\n\t *\n\t * The default value is true.\n\t */\n\tget isGuidelineSnapEnabled(): boolean {\n\t\treturn this._isGuidelineSnapEnabled;\n\t}\n\tset isGuidelineSnapEnabled(val: boolean) {\n\t\tif (typeof val !== \"boolean\") throw new Error(\"new value for GuidedDraggingTool.isGuidelineSnapEnabled must be a boolean.\");\n\t\tif (this._isGuidelineSnapEnabled !== val) {\n\t\t\tthis._isGuidelineSnapEnabled = val;\n\t\t}\n\t}\n\n\t/**\n\t * Removes all of the guidelines from the grid.\n\t */\n\tpublic clearGuidelines(): void {\n\t\tthis.diagram.remove(this.guidelineHbottom);\n\t\tthis.diagram.remove(this.guidelineHcenter);\n\t\tthis.diagram.remove(this.guidelineHtop);\n\t\tthis.diagram.remove(this.guidelineVleft);\n\t\tthis.diagram.remove(this.guidelineVright);\n\t\tthis.diagram.remove(this.guidelineVcenter);\n\t}\n\n\t/**\n\t * Calls the base method and removes the guidelines from the graph.\n\t */\n\tpublic doDeactivate(): void {\n\t\tsuper.doDeactivate();\n\t\t// clear any guidelines when dragging is done\n\t\tthis.clearGuidelines();\n\t}\n\n\t/**\n\t * Shows vertical and horizontal guidelines for the dragged part.\n\t */\n\tpublic doDragOver(pt: go.Point, obj: go.GraphObject): void {\n\t\t// clear all existing guidelines in case either show... method decides to show a guideline\n\t\tthis.clearGuidelines();\n\n\t\t// gets the selected part\n\t\tconst draggingParts = this.copiedParts || this.draggedParts;\n\t\tif (draggingParts === null) return;\n\t\tconst partItr = draggingParts.iterator;\n\t\tif (partItr.next()) {\n\t\t\tconst part = partItr.key;\n\t\t\ttry {\n\t\t\t\tthis.showHorizontalMatches(part, this.isGuidelineEnabled, false);\n\t\t\t\tthis.showVerticalMatches(part, this.isGuidelineEnabled, false);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * On a mouse-up, snaps the selected part to the nearest guideline.\n\t * If not snapping, the part remains at its position.\n\t */\n\tpublic doDropOnto(pt: go.Point, obj: go.GraphObject): void {\n\t\tthis.clearGuidelines();\n\n\t\t// gets the selected (perhaps copied) Part\n\t\tconst draggingParts = this.copiedParts || this.draggedParts;\n\t\tif (draggingParts === null) return;\n\t\tconst partItr = draggingParts.iterator;\n\t\tif (partItr.next()) {\n\t\t\tconst part = partItr.key;\n\n\t\t\t// snaps only when the mouse is released without shift modifier\n\t\t\tconst e = this.diagram.lastInput;\n\t\t\tconst snap = this.isGuidelineSnapEnabled && !e.shift;\n\t\t\ttry {\n\t\t\t\tthis.showHorizontalMatches(part, false, snap); // false means don't show guidelines\n\t\t\t\tthis.showVerticalMatches(part, false, snap);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * When nodes are shifted due to being guided upon a drop, make sure all connected link routes are invalidated,\n\t * since the node is likely to have moved a different amount than all its connected links in the regular\n\t * operation of the DraggingTool.\n\t */\n\tpublic invalidateLinks(node: go.Part): void {\n\t\tif (node instanceof go.Node) node.invalidateConnectedLinks();\n\t}\n\n\t/**\n\t * This finds parts that are aligned near the selected part along horizontal lines. It compares the selected\n\t * part to all parts within a rectangle approximately twice the {@link #searchDistance} wide.\n\t * The guidelines appear when a part is aligned within a margin-of-error equal to {@link #guidelineSnapDistance}.\n\t * @param {Node} part\n\t * @param {boolean} guideline if true, show guideline\n\t * @param {boolean} snap if true, snap the part to where the guideline would be\n\t */\n\tpublic showHorizontalMatches(part: go.Part, guideline: boolean, snap: boolean): void {\n\t\tconst objBounds = part.locationObject.getDocumentBounds();\n\t\tconst p0 = objBounds.y;\n\t\tconst p1 = objBounds.y + objBounds.height / 2;\n\t\tconst p2 = objBounds.y + objBounds.height;\n\n\t\tconst marginOfError = this.guidelineSnapDistance;\n\t\tconst distance = this.searchDistance;\n\t\t// compares with parts within narrow vertical area\n\t\tconst area = objBounds.copy();\n\t\tarea.inflate(distance, marginOfError + 1);\n\t\tconst otherObjs = this.diagram.findObjectsIn(\n\t\t\tarea,\n\t\t\t(obj) => obj.part as go.Part,\n\t\t\t(p) => p instanceof go.Part && !p.isSelected && !(p instanceof go.Link) && p.isTopLevel && p.layer !== null && !p.layer.isTemporary,\n\t\t\ttrue\n\t\t) as go.Set<go.Part>;\n\n\t\tlet bestDiff: number = marginOfError;\n\t\tlet bestObj: any = null; // TS 2.6 won't let this be go.Part | null\n\t\tlet bestSpot: go.Spot = go.Spot.Default;\n\t\tlet bestOtherSpot: go.Spot = go.Spot.Default;\n\t\t// horizontal line -- comparing y-values\n\t\totherObjs.each((other) => {\n\t\t\tif (other === part) return; // ignore itself\n\n\t\t\tconst otherBounds = other.locationObject.getDocumentBounds();\n\t\t\tconst q0 = otherBounds.y;\n\t\t\tconst q1 = otherBounds.y + otherBounds.height / 2;\n\t\t\tconst q2 = otherBounds.y + otherBounds.height;\n\n\t\t\t// compare center with center of OTHER part\n\t\t\tif (Math.abs(p1 - q1) < bestDiff) {\n\t\t\t\tbestDiff = Math.abs(p1 - q1);\n\t\t\t\tbestObj = other;\n\t\t\t\tbestSpot = go.Spot.Center;\n\t\t\t\tbestOtherSpot = go.Spot.Center;\n\t\t\t}\n\t\t\t// compare top side with top and bottom sides of OTHER part\n\t\t\tif (Math.abs(p0 - q0) < bestDiff) {\n\t\t\t\tbestDiff = Math.abs(p0 - q0);\n\t\t\t\tbestObj = other;\n\t\t\t\tbestSpot = go.Spot.Top;\n\t\t\t\tbestOtherSpot = go.Spot.Top;\n\t\t\t} else if (Math.abs(p0 - q2) < bestDiff) {\n\t\t\t\tbestDiff = Math.abs(p0 - q2);\n\t\t\t\tbestObj = other;\n\t\t\t\tbestSpot = go.Spot.Top;\n\t\t\t\tbestOtherSpot = go.Spot.Bottom;\n\t\t\t}\n\t\t\t// compare bottom side with top and bottom sides of OTHER part\n\t\t\tif (Math.abs(p2 - q0) < bestDiff) {\n\t\t\t\tbestDiff = Math.abs(p2 - q0);\n\t\t\t\tbestObj = other;\n\t\t\t\tbestSpot = go.Spot.Bottom;\n\t\t\t\tbestOtherSpot = go.Spot.Top;\n\t\t\t} else if (Math.abs(p2 - q2) < bestDiff) {\n\t\t\t\tbestDiff = Math.abs(p2 - q2);\n\t\t\t\tbestObj = other;\n\t\t\t\tbestSpot = go.Spot.Bottom;\n\t\t\t\tbestOtherSpot = go.Spot.Bottom;\n\t\t\t}\n\t\t});\n\n\t\tif (bestObj !== null) {\n\t\t\tconst offsetX = objBounds.x - part.actualBounds.x;\n\t\t\tconst offsetY = objBounds.y - part.actualBounds.y;\n\t\t\tconst bestBounds = bestObj.locationObject.getDocumentBounds();\n\t\t\t// line extends from x0 to x2\n\t\t\tconst x0 = Math.min(objBounds.x, bestBounds.x) - 10;\n\t\t\tconst x2 = Math.max(objBounds.x + objBounds.width, bestBounds.x + bestBounds.width) + 10;\n\t\t\t// find bestObj's desired Y\n\t\t\tconst bestPoint = new go.Point().setRectSpot(bestBounds, bestOtherSpot);\n\t\t\tif (bestSpot === go.Spot.Center) {\n\t\t\t\tif (snap) {\n\t\t\t\t\t// call Part.move in order to automatically move member Parts of Groups\n\t\t\t\t\tpart.move(new go.Point(objBounds.x - offsetX, bestPoint.y - objBounds.height / 2 - offsetY));\n\t\t\t\t\tthis.invalidateLinks(part);\n\t\t\t\t}\n\t\t\t\tif (guideline) {\n\t\t\t\t\tthis.guidelineHcenter.position = new go.Point(x0, bestPoint.y);\n\t\t\t\t\tthis.guidelineHcenter.elt(0).width = x2 - x0;\n\t\t\t\t\tthis.diagram.add(this.guidelineHcenter);\n\t\t\t\t}\n\t\t\t} else if (bestSpot === go.Spot.Top) {\n\t\t\t\tif (snap) {\n\t\t\t\t\tpart.move(new go.Point(objBounds.x - offsetX, bestPoint.y - offsetY));\n\t\t\t\t\tthis.invalidateLinks(part);\n\t\t\t\t}\n\t\t\t\tif (guideline) {\n\t\t\t\t\tthis.guidelineHtop.position = new go.Point(x0, bestPoint.y);\n\t\t\t\t\tthis.guidelineHtop.elt(0).width = x2 - x0;\n\t\t\t\t\tthis.diagram.add(this.guidelineHtop);\n\t\t\t\t}\n\t\t\t} else if (bestSpot === go.Spot.Bottom) {\n\t\t\t\tif (snap) {\n\t\t\t\t\tpart.move(new go.Point(objBounds.x - offsetX, bestPoint.y - objBounds.height - offsetY));\n\t\t\t\t\tthis.invalidateLinks(part);\n\t\t\t\t}\n\t\t\t\tif (guideline) {\n\t\t\t\t\tthis.guidelineHbottom.position = new go.Point(x0, bestPoint.y);\n\t\t\t\t\tthis.guidelineHbottom.elt(0).width = x2 - x0;\n\t\t\t\t\tthis.diagram.add(this.guidelineHbottom);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * This finds parts that are aligned near the selected part along vertical lines. It compares the selected\n\t * part to all parts within a rectangle approximately twice the {@link #searchDistance} tall.\n\t * The guidelines appear when a part is aligned within a margin-of-error equal to {@link #guidelineSnapDistance}.\n\t * @param {Part} part\n\t * @param {boolean} guideline if true, show guideline\n\t * @param {boolean} snap if true, don't show guidelines but just snap the part to where the guideline would be\n\t */\n\tpublic showVerticalMatches(part: go.Part, guideline: boolean, snap: boolean): void {\n\t\tconst objBounds = part.locationObject.getDocumentBounds();\n\t\tconst p0 = objBounds.x;\n\t\tconst p1 = objBounds.x + objBounds.width / 2;\n\t\tconst p2 = objBounds.x + objBounds.width;\n\n\t\tconst marginOfError = this.guidelineSnapDistance;\n\t\tconst distance = this.searchDistance;\n\t\t// compares with parts within narrow vertical area\n\t\tconst area = objBounds.copy();\n\t\tarea.inflate(marginOfError + 1, distance);\n\t\tconst otherObjs = this.diagram.findObjectsIn(\n\t\t\tarea,\n\t\t\t(obj) => obj.part as go.Part,\n\t\t\t(p) => p instanceof go.Part && !p.isSelected && !(p instanceof go.Link) && p.isTopLevel && p.layer !== null && !p.layer.isTemporary,\n\t\t\ttrue\n\t\t) as go.Set<go.Part>;\n\n\t\tlet bestDiff: number = marginOfError;\n\t\tlet bestObj: any = null; // TS 2.6 won't let this be go.Part | null\n\t\tlet bestSpot: go.Spot = go.Spot.Default;\n\t\tlet bestOtherSpot: go.Spot = go.Spot.Default;\n\t\t// vertical line -- comparing x-values\n\t\totherObjs.each((other) => {\n\t\t\tif (other === part) return; // ignore itself\n\n\t\t\tconst otherBounds = other.locationObject.getDocumentBounds();\n\t\t\tconst q0 = otherBounds.x;\n\t\t\tconst q1 = otherBounds.x + otherBounds.width / 2;\n\t\t\tconst q2 = otherBounds.x + otherBounds.width;\n\n\t\t\t// compare center with center of OTHER part\n\t\t\tif (Math.abs(p1 - q1) < bestDiff) {\n\t\t\t\tbestDiff = Math.abs(p1 - q1);\n\t\t\t\tbestObj = other;\n\t\t\t\tbestSpot = go.Spot.Center;\n\t\t\t\tbestOtherSpot = go.Spot.Center;\n\t\t\t}\n\t\t\t// compare left side with left and right sides of OTHER part\n\t\t\tif (Math.abs(p0 - q0) < bestDiff) {\n\t\t\t\tbestDiff = Math.abs(p0 - q0);\n\t\t\t\tbestObj = other;\n\t\t\t\tbestSpot = go.Spot.Left;\n\t\t\t\tbestOtherSpot = go.Spot.Left;\n\t\t\t} else if (Math.abs(p0 - q2) < bestDiff) {\n\t\t\t\tbestDiff = Math.abs(p0 - q2);\n\t\t\t\tbestObj = other;\n\t\t\t\tbestSpot = go.Spot.Left;\n\t\t\t\tbestOtherSpot = go.Spot.Right;\n\t\t\t}\n\t\t\t// compare right side with left and right sides of OTHER part\n\t\t\tif (Math.abs(p2 - q0) < bestDiff) {\n\t\t\t\tbestDiff = Math.abs(p2 - q0);\n\t\t\t\tbestObj = other;\n\t\t\t\tbestSpot = go.Spot.Right;\n\t\t\t\tbestOtherSpot = go.Spot.Left;\n\t\t\t} else if (Math.abs(p2 - q2) < bestDiff) {\n\t\t\t\tbestDiff = Math.abs(p2 - q2);\n\t\t\t\tbestObj = other;\n\t\t\t\tbestSpot = go.Spot.Right;\n\t\t\t\tbestOtherSpot = go.Spot.Right;\n\t\t\t}\n\t\t});\n\n\t\tif (bestObj !== null) {\n\t\t\tconst offsetX = objBounds.x - part.actualBounds.x;\n\t\t\tconst offsetY = objBounds.y - part.actualBounds.y;\n\t\t\tconst bestBounds = bestObj.locationObject.getDocumentBounds();\n\t\t\t// line extends from y0 to y2\n\t\t\tconst y0 = Math.min(objBounds.y, bestBounds.y) - 10;\n\t\t\tconst y2 = Math.max(objBounds.y + objBounds.height, bestBounds.y + bestBounds.height) + 10;\n\t\t\t// find bestObj's desired X\n\t\t\tconst bestPoint = new go.Point().setRectSpot(bestBounds, bestOtherSpot);\n\t\t\tif (bestSpot === go.Spot.Center) {\n\t\t\t\tif (snap) {\n\t\t\t\t\t// call Part.move in order to automatically move member Parts of Groups\n\t\t\t\t\tpart.move(new go.Point(bestPoint.x - objBounds.width / 2 - offsetX, objBounds.y - offsetY));\n\t\t\t\t\tthis.invalidateLinks(part);\n\t\t\t\t}\n\t\t\t\tif (guideline) {\n\t\t\t\t\tthis.guidelineVcenter.position = new go.Point(bestPoint.x, y0);\n\t\t\t\t\tthis.guidelineVcenter.elt(0).height = y2 - y0;\n\t\t\t\t\tthis.diagram.add(this.guidelineVcenter);\n\t\t\t\t}\n\t\t\t} else if (bestSpot === go.Spot.Left) {\n\t\t\t\tif (snap) {\n\t\t\t\t\tpart.move(new go.Point(bestPoint.x - offsetX, objBounds.y - offsetY));\n\t\t\t\t\tthis.invalidateLinks(part);\n\t\t\t\t}\n\t\t\t\tif (guideline) {\n\t\t\t\t\tthis.guidelineVleft.position = new go.Point(bestPoint.x, y0);\n\t\t\t\t\tthis.guidelineVleft.elt(0).height = y2 - y0;\n\t\t\t\t\tthis.diagram.add(this.guidelineVleft);\n\t\t\t\t}\n\t\t\t} else if (bestSpot === go.Spot.Right) {\n\t\t\t\tif (snap) {\n\t\t\t\t\tpart.move(new go.Point(bestPoint.x - objBounds.width - offsetX, objBounds.y - offsetY));\n\t\t\t\t\tthis.invalidateLinks(part);\n\t\t\t\t}\n\t\t\t\tif (guideline) {\n\t\t\t\t\tthis.guidelineVright.position = new go.Point(bestPoint.x, y0);\n\t\t\t\t\tthis.guidelineVright.elt(0).height = y2 - y0;\n\t\t\t\t\tthis.diagram.add(this.guidelineVright);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n *  Copyright (C) 1998-2021 by Northwoods Software Corporation. All Rights Reserved.\n */\n\nimport * as go from \"gojs\";\nimport { ReactDiagram } from \"gojs-react\";\nimport * as React from \"react\";\n\nimport { GuidedDraggingTool } from \"../GuidedDraggingTool\";\n\nimport \"./Diagram.css\";\n\ninterface DiagramProps {\n\tnodeDataArray: Array<go.ObjectData>;\n\tlinkDataArray: Array<go.ObjectData>;\n\tmodelData: go.ObjectData;\n\tskipsDiagramUpdate: boolean;\n\tonDiagramEvent: (e: go.DiagramEvent) => void;\n\tonModelChange: (e: go.IncrementalData) => void;\n}\n\nexport class DiagramWrapper extends React.Component<DiagramProps, {}> {\n\t/**\n\t * Ref to keep a reference to the Diagram component, which provides access to the GoJS diagram via getDiagram().\n\t */\n\tprivate diagramRef: React.RefObject<ReactDiagram>;\n\n\t/** @internal */\n\tconstructor(props: DiagramProps) {\n\t\tsuper(props);\n\t\tthis.diagramRef = React.createRef();\n\t}\n\n\t/**\n\t * Get the diagram reference and add any desired diagram listeners.\n\t * Typically the same function will be used for each listener, with the function using a switch statement to handle the events.\n\t */\n\tpublic componentDidMount() {\n\t\tif (!this.diagramRef.current) return;\n\t\tconst diagram = this.diagramRef.current.getDiagram();\n\t\tif (diagram instanceof go.Diagram) {\n\t\t\tdiagram.addDiagramListener(\"ChangedSelection\", this.props.onDiagramEvent);\n\t\t}\n\t}\n\n\t/**\n\t * Get the diagram reference and remove listeners that were added during mounting.\n\t */\n\tpublic componentWillUnmount() {\n\t\tif (!this.diagramRef.current) return;\n\t\tconst diagram = this.diagramRef.current.getDiagram();\n\t\tif (diagram instanceof go.Diagram) {\n\t\t\tdiagram.removeDiagramListener(\"ChangedSelection\", this.props.onDiagramEvent);\n\t\t}\n\t}\n\n\t/**\n\t * Diagram initialization method, which is passed to the ReactDiagram component.\n\t * This method is responsible for making the diagram and initializing the model, any templates,\n\t * and maybe doing other initialization tasks like customizing tools.\n\t * The model's data should not be set here, as the ReactDiagram component handles that.\n\t */\n\tprivate initDiagram(): go.Diagram {\n\t\tconst $ = go.GraphObject.make;\n\t\t// set your license key here before creating the diagram: go.Diagram.licenseKey = \"...\";\n\t\tconst diagram = $(go.Diagram, {\n\t\t\t\"undoManager.isEnabled\": true, // must be set to allow for model change listening\n\t\t\t// 'undoManager.maxHistoryLength': 0,  // uncomment disable undo/redo functionality\n\t\t\t\"clickCreatingTool.archetypeNodeData\": {\n\t\t\t\ttext: \"new node\",\n\t\t\t\tcolor: \"lightblue\",\n\t\t\t},\n\t\t\tdraggingTool: new GuidedDraggingTool(), // defined in GuidedDraggingTool.ts\n\t\t\t\"draggingTool.horizontalGuidelineColor\": \"blue\",\n\t\t\t\"draggingTool.verticalGuidelineColor\": \"blue\",\n\t\t\t\"draggingTool.centerGuidelineColor\": \"green\",\n\t\t\t\"draggingTool.guidelineWidth\": 1,\n\t\t\tlayout: $(go.ForceDirectedLayout,{isInitial:false,setsPortSpots:false,}),\n\t\t\tmodel: $(go.GraphLinksModel, {\n\t\t\t\tlinkKeyProperty: \"key\", // IMPORTANT! must be defined for merges and data sync when using GraphLinksModel\n\t\t\t\t// positive keys for nodes\n\t\t\t\tmakeUniqueKeyFunction: (m: go.Model, data: any) => {\n\t\t\t\t\tlet k = data.key || 1;\n\t\t\t\t\twhile (m.findNodeDataForKey(k)) k++;\n\t\t\t\t\tdata.key = k;\n\t\t\t\t\treturn k;\n\t\t\t\t},\n\t\t\t\t// negative keys for links\n\t\t\t\tmakeUniqueLinkKeyFunction: (m: go.GraphLinksModel, data: any) => {\n\t\t\t\t\tlet k = data.key || -1;\n\t\t\t\t\twhile (m.findLinkDataForKey(k)) k--;\n\t\t\t\t\tdata.key = k;\n\t\t\t\t\treturn k;\n\t\t\t\t},\n\t\t\t}),\n\t\t});\n\n\t\t// define a simple Node template\n\n\t\tfunction parseType(s: any) {\n\t\t\tswitch (s) {\n\t\t\t\tcase \"H\":\n\t\t\t\t\treturn go.Panel.Horizontal;\n\t\t\t\tcase \"V\":\n\t\t\t\t\treturn go.Panel.Vertical;\n\t\t\t\tcase \"A\":\n\t\t\t\t\treturn go.Panel.Auto;\n\t\t\t\tdefault:\n\t\t\t\t\treturn go.Panel.Auto;\n\t\t\t}\n\t\t}\n\t\tfunction routingHandle(s: any) {\n\t\t\tswitch (s) {\n\t\t\t\tcase \"N\":\n\t\t\t\t\treturn go.Link.Normal;\n\n\t\t\t\tcase \"A\":\n\t\t\t\t\treturn go.Link.AvoidsNodes;\n\t\t\t\tdefault:\n\t\t\t\t\treturn go.Link.Normal;\n\t\t\t}\n\t\t}\n\t\tdiagram.nodeTemplate = $(\n\t\t\tgo.Node,\n\t\t\t\"Auto\",\n\t\t\tnew go.Binding(\"type\", \"type\", parseType),\n\t\t\t{ background: \"transparent\" },\n\t\t\tnew go.Binding(\"background\", \"background\"), // the Shape will go around the TextBlock\n\t\t\tnew go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\n\t\t\t$(\n\t\t\t\tgo.Shape,\n\t\t\t\t{\n\t\t\t\t\tfill: \"white\",\n\t\t\t\t\tstrokeWidth: 1,\n\t\t\t\t\t// set the port properties:\n\t\t\t\t\tportId: \"\",\n\t\t\t\t\tstrokeJoin: \"round\",\n\t\t\t\t\t//, fromLinkable: true, toLinkable: true, cursor: 'pointer'x\n\t\t\t\t},\n\t\t\t\t// Shape.fill is bound to Node.data.color\n\t\t\t\tnew go.Binding(\"fill\", \"color\"),\n\t\t\t\tnew go.Binding(\"figure\", \"fig\"),\n\t\t\t\tnew go.Binding(\"width\", \"width\"),\n\t\t\t\tnew go.Binding(\"height\", \"height\")\n\t\t\t),\n\n\t\t\t$(\n\t\t\t\tgo.TextBlock,\n\t\t\t\t{ margin: 8, editable: true, font: \"400 .875rem Roboto, sans-serif\" }, // some room around the text\n\t\t\t\tnew go.Binding(\"text\").makeTwoWay(),\n\t\t\t\tnew go.Binding(\"margin\")\n\t\t\t)\n\t\t);\n\n\t\t// relinking depends on modelData\n\t\t// diagram.linkTemplate =\n\t\t//   $(go.Link,\n\t\t//     new go.Binding('relinkableFrom', 'canRelink').ofModel(),\n\t\t//     new go.Binding('relinkableTo', 'canRelink').ofModel(),\n\t\t//     $(go.Shape),\n\t\t//     $(go.Shape, { toArrow: 'Standard' })\n\t\t//   );\n\t\t// diagram.groupTemplate = $(\n\t\t// \tgo.Group,\n\t\t// \t\"Spot\",\n\t\t// \t{ layout: $(go.CircularLayout, { spacing: 20, sweepAngle: 360 }) },\n\t\t// \t$(\n\t\t// \t\tgo.Panel,\n\t\t// \t\t\"Auto\",\n\t\t// \t\tnew go.Binding(\"type\", \"type\", parseType),\n\t\t// \t\t{ background: \"transparent\" },\n\t\t// \t\tnew go.Binding(\"background\", \"background\"), // the Shape will go around the TextBlock\n\t\t// \t\tnew go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\n\t\t// \t\t$(\n\t\t// \t\t\tgo.Shape,\n\t\t// \t\t\t{\n\t\t// \t\t\t\tfill: \"white\",\n\t\t// \t\t\t\tstrokeWidth: 1,\n\t\t// \t\t\t\t// set the port properties:\n\t\t// \t\t\t\tportId: \"\",\n\t\t// \t\t\t\tstrokeJoin: \"round\",\n\t\t// \t\t\t\t//, fromLinkable: true, toLinkable: true, cursor: 'pointer'x\n\t\t// \t\t\t},\n\t\t// \t\t\t// Shape.fill is bound to Node.data.color\n\t\t// \t\t\tnew go.Binding(\"fill\", \"color\"),\n\t\t// \t\t\tnew go.Binding(\"figure\", \"fig\"),\n\t\t// \t\t\tnew go.Binding(\"width\", \"width\"),\n\t\t// \t\t\tnew go.Binding(\"height\", \"height\")\n\t\t// \t\t),\n\t\t// \t\t$(\n\t\t// \t\t\tgo.TextBlock,\n\t\t// \t\t\t{ margin: 8, editable: true, font: \"400 .875rem Roboto, sans-serif\" }, // some room around the text\n\t\t// \t\t\tnew go.Binding(\"text\").makeTwoWay(),\n\t\t// \t\t\tnew go.Binding(\"margin\")\n\t\t// \t\t)\n\t\t// \t)\n\t\t// );\n\t\tdiagram.groupTemplate = $(\n\t\t\tgo.Group,\n\t\t\t\"Vertical\",\n\t\t\tnew go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\n\t\t\t$(\n\t\t\t\tgo.Panel,\n\t\t\t\t\"Auto\",\n\t\t\t\tnew go.Binding(\"type\", \"type\", parseType),\n\t\t\t\t{ background: \"transparent\" },\n\t\t\t\tnew go.Binding(\"background\", \"background\"), // the Shape will go around the TextBlock\n\t\t\t\t$(\n\t\t\t\t\tgo.Shape,\n\t\t\t\t\t{\n\t\t\t\t\t\tfill: \"white\",\n\t\t\t\t\t\tstrokeWidth: 1,\n\t\t\t\t\t\t// set the port properties:\n\t\t\t\t\t\tportId: \"\",\n\t\t\t\t\t\tstrokeJoin: \"round\",\n\t\t\t\t\t\t//, fromLinkable: true, toLinkable: true, cursor: 'pointer'x\n\t\t\t\t\t},\n\t\t\t\t\t// Shape.fill is bound to Node.data.color\n\t\t\t\t\tnew go.Binding(\"fill\", \"color\"),\n\t\t\t\t\tnew go.Binding(\"figure\", \"fig\"),\n\t\t\t\t\tnew go.Binding(\"width\", \"width\"),\n\t\t\t\t\tnew go.Binding(\"height\", \"height\")\n\t\t\t\t),\n\t\t\t\t$(\n\t\t\t\t\tgo.TextBlock,\n\t\t\t\t\t{ margin: 8, editable: true, font: \"400 .875rem Roboto, sans-serif\" }, // some room around the text\n\t\t\t\t\tnew go.Binding(\"text\").makeTwoWay(),\n\t\t\t\t\tnew go.Binding(\"margin\")\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\n\t\tdiagram.linkTemplate = $(\n\t\t\tgo.Link, // the whole link panel\n\t\t\t{\n\t\t\t\tselectionAdorned: true,\n\t\t\t\tlayerName: \"Foreground\",\n\t\t\t\treshapable: true,\n\t\t\t\trouting: go.Link.Orthogonal,\n\t\t\t\tcorner: 10,\n\t\t\t\tangle: 360,\n\t\t\t\tcurve: go.Link.JumpOver,\n\t\t\t\tsegmentOrientation: go.Link.None,\n\t\t\t},\n\t\t\tnew go.Binding(\"fromSpot\", \"fromSpot\", go.Spot.parse),\n\t\t\tnew go.Binding(\"toSpot\", \"toSpot\", go.Spot.parse),\n\t\t\t//new go.Binding('segmentOrientation','seg'),\n\t\t\tnew go.Binding(\"routing\", \"routing\", routingHandle),\n\t\t\t$(go.Shape,new go.Binding('strokeDashArray', 'dash')),\n\t\t\t$(\n\t\t\t\tgo.Shape, // the link shape\n\t\t\t\t{ stroke: \"#303B45\", strokeWidth: 2.5, toArrow: \"\" },\n\t\t\t\tnew go.Binding(\"toArrow\", \"arrow\")\n\t\t\t),\n\t\t\t$(\n\t\t\t\tgo.TextBlock, // the \"from\" label\n\t\t\t\t{\n\t\t\t\t\ttextAlign: \"center\",\n\t\t\t\t\tfont: \"bold 14px sans-serif\",\n\t\t\t\t\tstroke: \"#1967B3\",\n\t\t\t\t\tsegmentIndex: 0,\n\t\t\t\t\tsegmentOffset: new go.Point(NaN, NaN),\n\t\t\t\t\tsegmentOrientation: go.Link.None,\n\t\t\t\t\tangle: 360,\n\t\t\t\t},\n\t\t\t\tnew go.Binding(\"alignmentFocus\", \"align\"),\n\t\t\t\tnew go.Binding(\"text\", \"text\")\n\t\t\t),\n\t\t\t$(\n\t\t\t\tgo.TextBlock, // the \"to\" label\n\t\t\t\t{\n\t\t\t\t\ttextAlign: \"center\",\n\t\t\t\t\tfont: \"bold 14px sans-serif\",\n\t\t\t\t\tstroke: \"#1967B3\",\n\t\t\t\t\tsegmentIndex: -1,\n\t\t\t\t\tsegmentOffset: new go.Point(NaN, NaN),\n\t\t\t\t\tsegmentOrientation: go.Link.OrientUpright,\n\t\t\t\t},\n\t\t\t\tnew go.Binding(\"text\", \"toText\")\n\t\t\t)\n\t\t);\n\n\t\treturn diagram;\n\t}\n\n\tpublic render() {\n\t\treturn (\n\t\t\t<ReactDiagram\n\t\t\t\tref={this.diagramRef}\n\t\t\t\tdivClassName=\"diagram-component\"\n\t\t\t\tinitDiagram={this.initDiagram}\n\t\t\t\tnodeDataArray={this.props.nodeDataArray}\n\t\t\t\tlinkDataArray={this.props.linkDataArray}\n\t\t\t\tmodelData={this.props.modelData}\n\t\t\t\tonModelChange={this.props.onModelChange}\n\t\t\t\tskipsDiagramUpdate={this.props.skipsDiagramUpdate}\n\t\t\t/>\n\t\t);\n\t}\n}\n","/*\n*  Copyright (C) 1998-2021 by Northwoods Software Corporation. All Rights Reserved.\n*/\n\nimport * as React from 'react';\nimport './Inspector.css';\n\ninterface InspectorRowProps {\n  id: string;\n  value: string;\n  onInputChange: (key: string, value: string, isBlur: boolean) => void;\n}\n\nexport class InspectorRow extends React.PureComponent<InspectorRowProps, {}> {\n  constructor(props: InspectorRowProps) {\n    super(props);\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  private handleInputChange(e: any) {\n    this.props.onInputChange(this.props.id, e.target.value, e.type === 'blur');\n  }\n\n  private formatLocation(loc: string): string {\n    \n    const locArr = loc.split(' ');\n    if (locArr.length === 2) {\n      const x = parseFloat(locArr[0]);\n      const y = parseFloat(locArr[1]);\n      if (!isNaN(x) && !isNaN(y)) {\n        return `${x.toFixed(0)} ${y.toFixed(0)}`;\n      }\n    }\n    return loc;\n  }\n\n  public render() {\n    let val = this.props.value;\n    if (this.props?.id === 'loc' &&  this.props.value) {\n      val = this.formatLocation(this.props.value);\n    }\n    return (\n      <tr>\n        <td>{this.props.id}</td>\n        <td>\n          <input\n            disabled={this.props.id === 'key'}\n            value={val}\n            onChange={this.handleInputChange}\n            onBlur={this.handleInputChange}>\n          </input>\n        </td>\n      </tr>\n    );\n  }\n}\n","/*\n*  Copyright (C) 1998-2021 by Northwoods Software Corporation. All Rights Reserved.\n*/\n\nimport * as React from 'react';\n\nimport { InspectorRow } from './InspectorRow';\n\nimport './Inspector.css';\n\ninterface SelectionInspectorProps {\n  selectedData: any;\n  onInputChange: (id: string, value: string, isBlur: boolean) => void;\n}\n\nexport class SelectionInspector extends React.PureComponent<SelectionInspectorProps, {}> {\n  /**\n   * Render the object data, passing down property keys and values.\n   */\n  private renderObjectDetails() {\n    const selObj = this.props.selectedData;\n    const dets = [];\n    for (const k in selObj) {\n      const val = selObj[k];\n      const row = <InspectorRow\n                    key={k}\n                    id={k}\n                    value={val}\n                    onInputChange={this.props.onInputChange} />;\n      if (k === 'key') {\n        dets.unshift(row); // key always at start\n      } else {\n        dets.push(row);\n      }\n    }\n    return dets;\n  }\n\n  public render() {\n    return (\n      <div id='myInspectorDiv' className='inspector'>\n        <table>\n          <tbody>\n            {this.renderObjectDetails()}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","import { createToken, Lexer, CstParser } from \"chevrotain\"\r\n\r\nconst True = createToken({ name: \"True\", pattern: /true/ })\r\nconst False = createToken({ name: \"False\", pattern: /false/ })\r\n// const Null = createToken({ name: \"Null\", pattern: /null/ })\r\nconst LCurly = createToken({ name: \"LCurly\", pattern: /{/ })\r\nconst RCurly = createToken({ name: \"RCurly\", pattern: /}/ })\r\nconst LSquare = createToken({ name: \"LSquare\", pattern: /\\[/ })\r\nconst RSquare = createToken({ name: \"RSquare\", pattern: /]/ })\r\nconst LRound = createToken({ name: \"LRound\", pattern: /\\(/ })\r\nconst RRound = createToken({ name: \"RRound\", pattern: /\\)/ })\r\nconst Comma = createToken({ name: \"Comma\", pattern: /,/ })\r\nconst Colon = createToken({ name: \"Colon\", pattern: /:/ })\r\nconst SemiColon = createToken({ name: \"SemiColon\", pattern: /;/ })\r\nconst ENTITY = createToken({ name: \"ENTITY\", pattern: /ENTITY/ })\r\nconst COVERAGE = createToken({ name: \"COVERAGE\", pattern: /COVERAGE/ })\r\nconst CHILD = createToken({ name: \"CHILD\", pattern: /CHILD/ })\r\nconst COMPOSITE = createToken({ name: \"COMPOSITE\", pattern: /COMPOSITE/ })\r\nconst WEAK = createToken({ name: \"WEAK\", pattern: /WEAK/ })\r\nconst RELATIONSHIP = createToken({ name: \"RELATIONSHIP\", pattern: /RELATIONSHIP/ })\r\nconst CALCULATED = createToken({ name: \"CALCULATED\", pattern: /CALCULATED/ })\r\nconst ATTRIBUTES = createToken({ name: \"ATTRIBUTES\", pattern: /ATTRIBUTES/ })\r\nconst IDENTIFIER = createToken({ name: \"IDENTIFIER\", pattern: /IDENTIFIER/ })\r\nconst BY = createToken({ name: \"BY\", pattern: /BY/ })\r\n\r\n// const StringLiteral = createToken({\r\n//   name: \"StringLiteral\",\r\n//   pattern: /\"(:?[^\\\\\"]|\\\\(:?[bfnrtv\"\\\\/]|u[0-9a-fA-F]{4}))*\"/\r\n// })\r\nconst StringEntity = createToken({\r\n  name: \"StringEntity\",\r\n  pattern: /[a-zA-Z]\\w*/\r\n})\r\nconst sqlExpretion = createToken({\r\n  name: \"sqlExpretion\",\r\n  pattern: /'.*?'/\r\n})\r\n// const NumberLiteral = createToken({\r\n//   name: \"NumberLiteral\",\r\n//   pattern: /-?(0|[1-9]\\d*)(\\.\\d+)?([eE][+-]?\\d+)?/\r\n// })\r\n\r\nconst RelationNumber = createToken({\r\n  name: \"RelationNumber\",\r\n  pattern: /0|1|\\bn\\b|\\bN\\b/\r\n})\r\nconst JERARQUIA = createToken({\r\n  name: \"JERARQUIA\",\r\n  pattern: /\\bTOTAL\\b|\\bPARTIAL\\b/\r\n})\r\nconst OF = createToken({\r\n  name: \"OF\",\r\n  pattern: /OF/\r\n})\r\nconst COVERTURA = createToken({\r\n  name: \"COVERTURA\",\r\n  pattern: /\\bEXCLUSIVE\\b|\\bOVERLAPPING\\b/\r\n})\r\n\r\nconst WhiteSpace = createToken({\r\n  name: \"WhiteSpace\",\r\n  pattern: /[ \\t\\n\\r]+/,\r\n  group: Lexer.SKIPPED\r\n})\r\n\r\n\r\nconst allTokens = [ \r\n  LCurly,\r\n  \r\n  RCurly,\r\n  LSquare,\r\n  RSquare,\r\n  Comma,\r\n  Colon,\r\n  True,\r\n  False,\r\n  LRound,\r\n  RRound,\r\n  SemiColon,\r\n  ENTITY,\r\n  COVERAGE,\r\n  CHILD,\r\n  WEAK,\r\n  BY,\r\n  IDENTIFIER,\r\n  COMPOSITE,\r\n  RELATIONSHIP,\r\n  CALCULATED,\r\n  ATTRIBUTES,\r\n  JERARQUIA,\r\n  OF,\r\n  COVERTURA,\r\n  sqlExpretion,\r\n  WhiteSpace,\r\n  RelationNumber,\r\n  StringEntity,\r\n]\r\nconst JsonLexer = new Lexer(allTokens)\r\n\r\nexport class JsonParserTypeScript extends CstParser {\r\n  constructor() {\r\n    super(allTokens)\r\n    this.performSelfAnalysis()\r\n  }\r\n\r\n\r\n  //Empezando con las reglas\r\n  public TypeOfObject = this.RULE(\"TypeOfObject\", () => {\r\n    this.MANY_SEP({\r\n      SEP: SemiColon,\r\n      DEF: () => {\r\n        this.OR([\r\n          { ALT: () => this.SUBRULE(this.entity) },\r\n          { ALT: () => this.SUBRULE(this.composite) },\r\n          { ALT: () => this.SUBRULE(this.relationship) }\r\n        ])\r\n      }\r\n    })\r\n  })\r\n\r\n  private entity = this.RULE(\"Entity\", () => {\r\n    this.CONSUME(ENTITY)\r\n    this.CONSUME(StringEntity)\r\n    this.OPTION(()=>\r\n      this.OR([\r\n        { ALT: () => this.SUBRULE(this.child) },\r\n        { ALT: () => this.SUBRULE(this.coverage) },\r\n        { ALT: () => this.SUBRULE(this.weak) },\r\n      ]))\r\n    this.CONSUME(LCurly)\r\n    this.MANY_SEP({\r\n      SEP: Comma,\r\n      DEF: () => {\r\n        this.SUBRULE(this.propertyEntity)\r\n      }\r\n    })\r\n    this.CONSUME(RCurly)\r\n  })\r\n\r\n  private propertyEntity = this.RULE(\"PropertyEntity\", () => {\r\n    this.CONSUME(StringEntity)\r\n    this.OPTION(()=>\r\n    this.OR([\r\n      { ALT: () => this.CONSUME(IDENTIFIER) },\r\n      { ALT: () => this.SUBRULE(this.manys) },\r\n      {ALT : () => this.SUBRULE(this.calculated)}\r\n    ]))\r\n  })\r\n  // private Calculated = this.RULE(\"propertyEntity\", () => {\r\n  //   this.CONSUME(CALCULATED)\r\n  //   this.CONSUME(BY)\r\n  //   // this.OR([\r\n  //   //   { ALT: () => this.CONSUME(IDENTIFIER) },\r\n  //   // ])\r\n  // })\r\n  \r\n\r\n  private relationship = this.RULE(\"Relationship\", () => {\r\n    this.CONSUME(RELATIONSHIP)\r\n    this.CONSUME(StringEntity)\r\n    this.CONSUME(LCurly)\r\n    this.MANY_SEP({\r\n      SEP: Comma,\r\n      DEF: () => {\r\n        this.SUBRULE(this.relation)\r\n      }\r\n    })\r\n    this.OPTION({\r\n      DEF: ()=>{\r\n       this.SUBRULE(this.attributesRelation)\r\n      }\r\n    })\r\n    this.CONSUME(RCurly)\r\n  })\r\n\r\n  private relation = this.RULE(\"Relation\", () => {\r\n    \r\n    this.CONSUME(StringEntity)\r\n    this.CONSUME(LRound)\r\n    this.CONSUME1(RelationNumber)\r\n    this.CONSUME(Comma)\r\n    this.CONSUME2(RelationNumber)\r\n    this.CONSUME(RRound)\r\n  })\r\n  private attributesRelation = this.RULE(\"AttributesRelation\", () => {\r\n    this.CONSUME(ATTRIBUTES)\r\n    this.CONSUME(LCurly)\r\n    this.MANY_SEP({\r\n      SEP: Comma,\r\n      DEF: () => {\r\n        this.SUBRULE(this.propertyEntity)\r\n      }\r\n    })\r\n    this.CONSUME(RCurly)\r\n  })\r\n  private manys = this.RULE(\"Manys\", () => {    \r\n    this.CONSUME(LRound)\r\n    this.CONSUME1(RelationNumber)\r\n    this.CONSUME(Comma)\r\n    this.CONSUME2(RelationNumber)\r\n    this.CONSUME(RRound)\r\n  })\r\n\r\n  private child = this.RULE(\"Child\", () => {\r\n    \r\n    this.CONSUME(CHILD)\r\n    this.CONSUME(OF)\r\n    this.CONSUME(StringEntity)\r\n  })\r\n  private weak = this.RULE(\"Weak\", () => {\r\n    \r\n    this.CONSUME(WEAK)\r\n    this.CONSUME(OF)\r\n    this.CONSUME(StringEntity)\r\n  })\r\n  private coverage = this.RULE(\"Coverage\", () => {\r\n    \r\n    this.CONSUME(COVERAGE)\r\n    this.CONSUME(LRound)\r\n    this.CONSUME(JERARQUIA)\r\n    this.CONSUME(Comma)\r\n    this.CONSUME(COVERTURA)\r\n    this.CONSUME(RRound)\r\n  })\r\n\r\n  \r\n  //Compuesto\r\n  private composite= this.RULE(\"Composite\", () => {\r\n    this.CONSUME(COMPOSITE)\r\n    this.CONSUME(StringEntity)\r\n    this.CONSUME(LCurly)\r\n    this.AT_LEAST_ONE_SEP({\r\n      SEP: Comma,\r\n      DEF: () => \r\n        this.SUBRULE(this.propierties)\r\n    })\r\n    this.CONSUME(RCurly)\r\n  })\r\n\r\n  \r\n  private calculated=this.RULE(\"Calculated\", () => {\r\n    this.CONSUME(CALCULATED)\r\n    this.CONSUME(BY)\r\n    this.CONSUME(sqlExpretion)\r\n  })\r\n\r\n\r\n  private propierties=this.RULE(\"Propierties\", () => {\r\n    this.CONSUME(StringEntity)\r\n  })\r\n\r\n\r\n  /*private objectItem = this.RULE(\"objectItem\", () => {\r\n    this.CONSUME(StringLiteral)\r\n    this.CONSUME(Colon)\r\n    this.SUBRULE(this.value)\r\n  })\r\n\r\n  private array = this.RULE(\"array\", () => {\r\n    this.CONSUME(LSquare)\r\n    this.MANY_SEP({\r\n      SEP: Comma,\r\n      DEF: () => {\r\n        this.SUBRULE(this.value)\r\n      }\r\n    })\r\n    this.CONSUME(RSquare)\r\n  })\r\n\r\n  private value = this.RULE(\"value\", () => {\r\n    this.OR([\r\n      { ALT: () => this.CONSUME(StringLiteral) },\r\n      { ALT: () => this.CONSUME(NumberLiteral) },\r\n      { ALT: () => this.SUBRULE(this.object) },\r\n      { ALT: () => this.SUBRULE(this.array) },\r\n      { ALT: () => this.CONSUME(True) },\r\n      { ALT: () => this.CONSUME(False) },\r\n      { ALT: () => this.CONSUME(Null) }\r\n    ])\r\n  })*/\r\n}\r\n\r\n// reuse the same parser instance.\r\nexport const parser = new JsonParserTypeScript()\r\n\r\nexport function parseJson(text:any) {\r\n  const lexResult = JsonLexer.tokenize(text)\r\n  // setting a new input will RESET the parser instance's state.\r\n  parser.input = lexResult.tokens\r\n  // any top level rule may be used as an entry point\r\n  const cst = parser.TypeOfObject()\r\n\r\n  // this would be a TypeScript compilation error because our parser now has a clear API.\r\n  // let value = parser.json_OopsTypo()\r\n\r\n  return {\r\n    // This is a pure grammar, the value will be undefined until we add embedded actions\r\n    // or enable automatic CST creation.\r\n    cst: cst,\r\n    lexErrors: lexResult.errors,\r\n    parseErrors: parser.errors\r\n  }\r\n}\r\n","import CodeMirror from \"codemirror\";\r\nimport * as go from \"gojs\";\r\nimport _, { xor } from \"lodash\";\r\nimport { type } from \"os\";\r\nimport { Children } from \"react\";\r\nimport { Children6, Children9, Composite, Entity, PropertyEntity, Relation, Relationship, RootObject } from \"./IParse\";\r\ninterface ArrayOfComposites {\r\n\tnombre: string;\r\n\tatributes: string[];\r\n}\r\n\r\ninterface EntidadVisualisacion {\r\n\tkey: number;\r\n\tnombre: string;\r\n\tparent: number | null;\r\n\tatributes: AtributesVisualisacion[];\r\n}\r\ninterface CompositeVisualisacion {\r\n\tatributes: AtributesVisualisacion[];\r\n}\r\ninterface AtributesVisualisacion {\r\n\tkey: number;\r\n\tnombre: string;\r\n\tidentity: boolean;\r\n\tcomposite?: CompositeVisualisacion;\r\n}\r\ninterface LinkVisualisacion {\r\n\tkey: number;\r\n\tfrom: number;\r\n\tto: number;\r\n}\r\n\r\ninterface VisualisacionDeNodos {\r\n\tEntities: EntidadVisualisacion[];\r\n\tlinks: LinkVisualisacion[];\r\n}\r\ninterface InitialStateOfData {\r\n\tnodeDataArray: INodeDataArray[];\r\n\tlinkDataArray: IlinkDataArray[];\r\n\tmodelData: object;\r\n\tselectedData: any;\r\n\tskipsDiagramUpdate: boolean;\r\n}\r\ninterface INodeDataArray {\r\n\tkey: number;\r\n\ttext: string;\r\n\tcolor: string;\r\n\ttype?: string;\r\n\tgroup?: number;\r\n\tisGroup?: boolean;\r\n\tmargin?: number;\r\n\tloc?: string;\r\n\tfig?: string;\r\n\theight?: number;\r\n\twidth?: number;\r\n}\r\ninterface IlinkDataArray {\r\n\tKey: number;\r\n\tfrom: number;\r\n\tto: number;\r\n\t//arrow?: string;\r\n\trouting?: string;\r\n\ttext?: string;\r\n\tdash?:any;\r\n\t//toText?: string;\r\n\tfromSpot?: string;\r\n\ttoSpot?: string;\r\n\talign?: object;\r\n}\r\n\r\nexport class ActionsFunctionsClass {\r\n\tKeys = 0;\r\n\tKeysLink = 0;\r\n\tlocation = { H: 0, W: 0 };\r\n\tstateData: InitialStateOfData = undefined as any;\r\n\r\n\ttotalLocation = 0;\r\n\tarrayOfComposites: ArrayOfComposites[] = [];\r\n\tFinalDataNodes: InitialStateOfData = this.initialData();\r\n\tArrayOfNodes: VisualisacionDeNodos = {\r\n\t\tEntities: [],\r\n\t\tlinks: [],\r\n\t};\r\n\r\n\tconstructor() {}\r\n\r\n\tGetLocation = () => {};\r\n\tgetAnCompositeOnArray(data: string) {\r\n\t\tlet returnData;\r\n\t\treturnData = this.arrayOfComposites.find((element) => element.nombre === data);\r\n\t\treturn returnData;\r\n\t}\r\n\tTotalLocation = (number: number) => {\r\n\t\tthis.totalLocation = number * 200;\r\n\t};\r\n\tGetKey = (): number => {\r\n\t\treturn (this.Keys = this.Keys + 1);\r\n\t};\r\n\tGetKeyForLink = (): number => {\r\n\t\treturn (this.KeysLink = this.KeysLink + -1);\r\n\t};\r\n\r\n\tinitialData() {\r\n\t\treturn (this.FinalDataNodes = {\r\n\t\t\tnodeDataArray: [],\r\n\t\t\tlinkDataArray: [],\r\n\t\t\tmodelData: {\r\n\t\t\t\tcanRelink: true,\r\n\t\t\t},\r\n\t\t\tselectedData: true,\r\n\t\t\tskipsDiagramUpdate: false,\r\n\t\t});\r\n\t}\r\n\r\n\tcreateNodeGo = (node: INodeDataArray) => {\r\n\t\treturn {\r\n\t\t\tkey: node.key,\r\n\t\t\ttext: node.text,\r\n\t\t\tcolor: node.color,\r\n\t\t\ttype: node.type || \"A\",\r\n\t\t\tmargin: node.margin || 8,\r\n\t\t\tloc: node.loc,\r\n\t\t\tisGroup: node.isGroup || undefined,\r\n\t\t\tfig: node.fig || \"RoundedRectangle\",\r\n\t\t\theight: node.height,\r\n\t\t\twidth: node.width\r\n\t\t};\r\n\t};\r\n\thandleChild = (data: Children9) => {};\r\n\thandleCoverage = (data: Children9) => {};\r\n\thandleWeak = (data: Children9, key: number) => {\r\n\t\tconst entiNode = this.ArrayOfNodes.Entities.find((x) => x.key == key);\r\n\t\tconst atributeNode = entiNode?.atributes?.find((x) => x.identity === true);\r\n\t\tconst entiNumber = this.searchEntityNodeInArrayOfNodes(data.Weak![0].children.StringEntity[0].image) as number;\r\n\t\tconst enti = this.ArrayOfNodes.Entities.find((x) => x.key == entiNumber);\r\n\t\tconst atribute = enti?.atributes?.find((x) => x.identity === true);\r\n\t\t//console.log(enti);\r\n\t\tthis.FinalDataNodes.linkDataArray.push(\r\n\t\t\tthis.createPropertiesGo({\r\n\t\t\t\tKey: this.GetKeyForLink(),\r\n\t\t\t\tto: atributeNode?.key!,\r\n\t\t\t\tfrom: atribute?.key!,\r\n\t\t\t\t//arrow: \"Standard\",\r\n\t\t\t\trouting: \"N\",\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\tcreatePropertiesGo(data: IlinkDataArray): IlinkDataArray {\r\n\t\treturn {\r\n\t\t\tKey: data.Key,\r\n\t\t\talign: data.align || undefined,\r\n\t\t\t//arrow: data.arrow || undefined,\r\n\t\t\tfrom: data.from,\r\n\t\t\trouting: data.routing || undefined,\r\n\t\t\tfromSpot: data.fromSpot || undefined,\r\n\t\t\ttext: data.text || undefined,\r\n\t\t\tdash:data.dash || undefined,\r\n\t\t\t// toText: data.toText || undefined\r\n\t\t\tto: data.to,\r\n\t\t\ttoSpot: data.toSpot || undefined,\r\n\t\t};\r\n\t}\r\n\thandlePropertiesOfComposite(data: string, key: number) {\r\n\t\tlet c: INodeDataArray = {\r\n\t\t\tkey: this.GetKey(),\r\n\t\t\ttext: data,\r\n\t\t\tmargin: 15,\r\n\t\t\ttype: \"H\",\r\n\t\t\tcolor: \"transparent\",\r\n\t\t\tfig: \"Ellipse\",\r\n\t\t\theight: 15,\r\n\t\t\tgroup: key,\r\n\t\t\twidth: 15,\r\n\t\t};\r\n\t\tthis.FinalDataNodes.nodeDataArray.push(c);\r\n\t\tthis.FinalDataNodes.linkDataArray.push(\r\n\t\t\tthis.createPropertiesGo({\r\n\t\t\t\tKey: this.GetKeyForLink(),\r\n\t\t\t\tto: c.key,\r\n\t\t\t\tfrom: key,\r\n\t\t\t\t//arrow: \"Standard\",\r\n\t\t\t\trouting: \"N\",\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\tmoreThanOneIdentifier(keyOfParent: number, keyIdentifier: number) {\r\n\t\tconst entidadPadre = this.ArrayOfNodes?.Entities?.find((x) => x.key == keyOfParent);\r\n\t\tconst otroIdentificador = entidadPadre?.atributes?.find((x) => x.identity === true);\r\n\t\tif (otroIdentificador && otroIdentificador.key!==keyIdentifier) {\r\n\t\t\tthis.FinalDataNodes?.linkDataArray?.push(\r\n\t\t\t\tthis.createPropertiesGo({\r\n\t\t\t\t\tKey: this.GetKeyForLink(),\r\n\t\t\t\t\tto: keyIdentifier,\r\n\t\t\t\t\tfrom: otroIdentificador.key,\r\n\t\t\t\t\t//arrow: \"Standard\",\r\n\t\t\t\t\trouting: \"N\",\r\n\t\t\t\t\ttext: undefined,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\thandleProperties(data: PropertyEntity[], key: number) {\r\n\t\tconsole.log(data);\r\n\t\tif (data) {\r\n\t\t\tdata.map((x) => {\r\n\t\t\t\tlet c: INodeDataArray = {\r\n\t\t\t\t\tkey: this.GetKey(),\r\n\t\t\t\t\ttext: x.children.StringEntity[0].image,\r\n\t\t\t\t\tmargin: 15,\r\n\t\t\t\t\ttype: \"H\",\r\n\t\t\t\t\tcolor: x.children.IDENTIFIER ? \"black\" : \"transparent\",\r\n\t\t\t\t\tfig: \"Ellipse\",\r\n\t\t\t\t\theight: 15,\r\n\t\t\t\t\tgroup: key,\r\n\t\t\t\t\twidth: 15,\r\n\t\t\t\t};\r\n\t\t\t\t// const resultado = this.nodeIsExistinInPropertyOfNode(c, this.FinalDataNodes);\r\n\r\n\t\t\t\t// if (resultado) {\r\n\t\t\t\t// \tconsole.log(resultado);\r\n\t\t\t\t// \tconsole.log(c);\r\n\t\t\t\t// \tc.loc = resultado.loc;\r\n\t\t\t\t// }\r\n\t\t\t\tconst compositeInfo = this.getAnCompositeOnArray(c.text);\r\n\t\t\t\tif (compositeInfo !== undefined) {\r\n\t\t\t\t\tc.margin = undefined;\r\n\t\t\t\t\tc.type = undefined;\r\n\t\t\t\t\tc.isGroup = true;\r\n\t\t\t\t\tc.height = undefined;\r\n\t\t\t\t\tc.width = undefined;\r\n\t\t\t\t}\r\n\t\t\t\tthis.FinalDataNodes.nodeDataArray.push(c);\r\n\t\t\t\tif (compositeInfo) {\r\n\t\t\t\t\tcompositeInfo.atributes.map((element) => {\r\n\t\t\t\t\t\tthis.handlePropertiesOfComposite(element, c.key);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tlet enti = this.ArrayOfNodes.Entities.find((x) => x.key == key);\r\n\t\t\t\tif(enti){\r\n\t\t\t\tenti!.atributes.push({\r\n\t\t\t\t\tkey: c.key,\r\n\t\t\t\t\tnombre: c.text,\r\n\t\t\t\t\tidentity: x.children.IDENTIFIER ? true : false,\r\n\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.FinalDataNodes.linkDataArray.push(\r\n\t\t\t\t\tthis.createPropertiesGo({\r\n\t\t\t\t\t\tKey: this.GetKeyForLink(),\r\n\t\t\t\t\t\tto: c.key,\r\n\t\t\t\t\t\tfrom: key,\r\n\t\t\t\t\t\t//arrow: \"Standard\",\r\n\t\t\t\t\t\trouting: \"N\",\r\n\t\t\t\t\t\tdash: x.children.Calculated ? [5,5]:undefined,\r\n\t\t\t\t\t\ttext: this.handleCardinality(x.children),\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tif (x.children.IDENTIFIER) {\r\n\t\t\t\t\tthis.moreThanOneIdentifier(key, c.key);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleCardinality(child: Children6): string | undefined {\r\n\t\tif (child.Manys) {\r\n\t\t\treturn `(${child.Manys[0].children.RelationNumber[0].image} , ${child.Manys[0].children.RelationNumber[1].image})`;\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\thandleRelations(data: Relation[], key: number) {\r\n\t\tdata?.map((x) => {\r\n\t\t\tconst linking: IlinkDataArray = {\r\n\t\t\t\tKey: this.GetKeyForLink(),\r\n\t\t\t\tto: key,\r\n\t\t\t\tfrom: this.searchEntityNodeInArrayOfNodes(x.children.StringEntity[0].image) as number,\r\n\t\t\t\trouting: \"N\",\r\n\t\t\t\ttext: `(${x.children.RelationNumber[0].image} , ${x.children.RelationNumber[1].image})`,\r\n\t\t\t\t//toText: ,\r\n\t\t\t};\r\n\t\t\tthis.FinalDataNodes.linkDataArray.push(this.createPropertiesGo(linking));\r\n\t\t\tthis.ArrayOfNodes.links.push({\r\n\t\t\t\tkey: linking.Key,\r\n\t\t\t\tto: key,\r\n\t\t\t\tfrom: this.searchEntityNodeInArrayOfNodes(x.children.StringEntity[0].image) as number,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tsearchEntityNodeInArrayOfNodes = (buscar: string) => {\r\n\t\tconst entity = this.ArrayOfNodes.Entities.find((x) => x.nombre == buscar);\r\n\t\treturn entity?.key;\r\n\t};\r\n\tsearchParentNodeInArrayOfNodes = (buscar: string) => {\r\n\t\tconst search = this.searchEntityNodeInArrayOfNodes(buscar);\r\n\t\tconst entity = this.ArrayOfNodes.Entities.find((x) => x.parent == search);\r\n\t\treturn entity?.key;\r\n\t};\r\n\tcreateTriangle(parent: number, coverage: string) {\r\n\t\tlet x: INodeDataArray | null = {\r\n\t\t\tkey: this.GetKey(),\r\n\t\t\ttext: coverage,\r\n\t\t\tcolor: \"lawngreen\",\r\n\t\t\tisGroup: true,\r\n\t\t\theight: undefined,\r\n\t\t\twidth: undefined,\r\n\t\t\ttype: \"A\",\r\n\t\t\tmargin: 5,\r\n\t\t\tfig: \"TriangleUp\",\r\n\t\t};\r\n\t\t//creo el nodo padre para despues darle sus propiedades que tambien van a ser nodos hijos\r\n\t\t// const resultado = this.nodeIsExistinInDataNode(x, this.FinalDataNodes);\r\n\r\n\t\t// if (resultado) {\r\n\t\t// \tx.loc = resultado.loc;\r\n\t\t// }\r\n\t\tthis.FinalDataNodes.nodeDataArray.push(this.createNodeGo(x));\r\n\t\tthis.ArrayOfNodes.Entities.push({\r\n\t\t\tkey: x.key,\r\n\t\t\tnombre: x.text,\r\n\t\t\tparent: parent,\r\n\t\t\tatributes: [],\r\n\t\t});\r\n\t\treturn x;\r\n\t}\r\n\tentityAction = (entities: Entity) => {\r\n\t\tlet x: INodeDataArray | null = null;\r\n\t\tif (entities.children) {\r\n\t\t\tx = {\r\n\t\t\t\tkey: this.GetKey(),\r\n\t\t\t\ttext: entities.children.StringEntity[0].image,\r\n\t\t\t\tcolor: \"pink\",\r\n\t\t\t\tisGroup: true,\r\n\t\t\t};\r\n\t\t\t// const resultado = this.nodeIsExistinInDataNode(x, this.FinalDataNodes);\r\n\t\t\t// if (resultado) {\r\n\t\t\t// \tx.loc = resultado.loc;\r\n\t\t\t// }\r\n\t\t\tthis.FinalDataNodes.nodeDataArray.push(this.createNodeGo(x));\r\n\r\n\t\t\tthis.ArrayOfNodes.Entities.push({\r\n\t\t\t\tkey: x.key,\r\n\t\t\t\tnombre: x.text,\r\n\t\t\t\tparent: null,\r\n\t\t\t\tatributes: [],\r\n\t\t\t});\r\n\r\n\t\t\tif (x !== null) {\r\n\t\t\t\t//nnodos hijos del nodo padre x\r\n\t\t\t\tthis.handleProperties(entities?.children?.PropertyEntity, x!.key);\r\n\t\t\t}\r\n\t\t\tif (entities.children.Coverage) {\r\n\t\t\t\tconst triangle = this.createTriangle(\r\n\t\t\t\t\tx.key,\r\n\t\t\t\t\t`(${entities.children.Coverage[0].children.JERARQUIA[0].image.substring(0, 1)}, ${entities.children.Coverage[0].children.COVERTURA[0].image.substring(0, 1)})`\r\n\t\t\t\t);\r\n\t\t\t\tconst linkToChildren: IlinkDataArray = {\r\n\t\t\t\t\tKey: this.GetKeyForLink(),\r\n\t\t\t\t\tto: x.key,\r\n\t\t\t\t\tfrom: triangle.key,\r\n\t\t\t\t\tfromSpot: \"Top\",\r\n\t\t\t\t\ttoSpot: \"Bottom\",\r\n\t\t\t\t};\r\n\t\t\t\tthis.FinalDataNodes.linkDataArray.push(this.createPropertiesGo(linkToChildren));\r\n\t\t\t}\r\n\t\t\tif (entities.children.Child) {\r\n\t\t\t\tconst linkingToParent: IlinkDataArray = {\r\n\t\t\t\t\tKey: this.GetKeyForLink(),\r\n\t\t\t\t\tto: this.searchParentNodeInArrayOfNodes(entities.children.Child[0].children.StringEntity[0].image) as number,\r\n\t\t\t\t\tfrom: x.key,\r\n\t\t\t\t\tfromSpot: \"Top\",\r\n\t\t\t\t\ttoSpot: \"Bottom\",\r\n\t\t\t\t};\r\n\t\t\t\tthis.FinalDataNodes.linkDataArray.push(this.createPropertiesGo(linkingToParent));\r\n\t\t\t} else if (entities.children.Coverage) {\r\n\t\t\t\t//  this.handleCoverage(entities.children);\r\n\t\t\t} else if (entities.children.Weak) {\r\n\t\t\t\tthis.handleWeak(entities.children, x.key);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tRelationshipAction = (relationship: Relationship) => {\r\n\t\tlet x: INodeDataArray | null = null;\r\n\t\tif (relationship.children) {\r\n\t\t\tx = {\r\n\t\t\t\tkey: this.GetKey(),\r\n\t\t\t\ttext: relationship.children.StringEntity[0].image,\r\n\t\t\t\tcolor: \"lightblue\",\r\n\t\t\t\tmargin: 2,\r\n\t\t\t\tfig: \"Diamond\",\r\n\t\t\t};\r\n\t\t\t// const resultado = this.nodeIsExistinInDataNode(x, this.FinalDataNodes);\r\n\t\t\t// if (resultado) {\r\n\t\t\t// \tx.loc = resultado.loc;\r\n\t\t\t// }\r\n\t\t\tthis.FinalDataNodes.nodeDataArray.push(this.createNodeGo(x));\r\n\t\t\tif(relationship.children.AttributesRelation){\r\n\t\t\t\tthis.handleProperties(relationship.children.AttributesRelation[0].children.PropertyEntity,x.key)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (relationship.children && x !== null) {\r\n\t\t\tthis.handleRelations(relationship.children.Relation, x!.key);\r\n\t\t}\r\n\t};\r\n\r\n\tcompositeAction = (datos: Composite) => {\r\n\t\tconst variables = datos.children.Propierties.map((x) => {\r\n\t\t\treturn x.children.StringEntity[0].image;\r\n\t\t});\r\n\t\tif (variables) {\r\n\t\t\tconst variable: ArrayOfComposites = {\r\n\t\t\t\tnombre: datos.children.StringEntity[0].image,\r\n\t\t\t\tatributes: variables,\r\n\t\t\t};\r\n\t\t\tthis.arrayOfComposites.push(variable);\r\n\t\t}\r\n\t};\r\n\taddNodeData = () => {};\r\n\t// nodeIsExistinInDataNode(node: INodeDataArray, finalDataNodes: InitialStateOfData) {\r\n\t// \tif (this.stateData) {\r\n\t// \t\tconst resul = this.stateData.nodeDataArray.find((f) => node.text === f.text || node.key === f.key);\r\n\t// \t\t_.remove(this.stateData.nodeDataArray, (x) => x.key === resul?.key);\r\n\t// \t\tif (resul) {\r\n\t// \t\t\treturn resul;\r\n\t// \t\t}\r\n\t// \t}\r\n\t// \treturn false;\r\n\t// }\r\n\tnodeIsExistinInDataNode() {\r\n\t\tif (this.stateData) {\r\n\t\t\tif (this.stateData?.nodeDataArray?.length == this.FinalDataNodes?.nodeDataArray?.length) {\r\n\t\t\t\tthis.FinalDataNodes.nodeDataArray.map((nodoNuevo) => {\r\n\t\t\t\t\tconst nodoViejo = this.stateData.nodeDataArray.find((x) => nodoNuevo.text == x.text);\r\n\t\t\t\t\tif (nodoViejo) {\r\n\t\t\t\t\t\tnodoNuevo.loc = nodoViejo.loc;\r\n\r\n\t\t\t\t\t\t_.remove(this.stateData.nodeDataArray, (f) => f.key === nodoViejo.key);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.FinalDataNodes.nodeDataArray.map((nodoNuevo) => {\r\n\t\t\t\t\tif (nodoNuevo.loc === undefined) {\r\n\t\t\t\t\t\tconst nodoViejo = this.stateData.nodeDataArray.splice(0, 1);\r\n\t\t\t\t\t\tnodoNuevo.loc = nodoViejo?.[0]?.loc;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (this.stateData.nodeDataArray.length > this.FinalDataNodes.nodeDataArray.length) {\r\n\t\t\t\tthis.FinalDataNodes.nodeDataArray.map((nodoNuevo) => {\r\n\t\t\t\t\tconst nodoViejo = this.stateData.nodeDataArray.find((x) => nodoNuevo.text == x.text);\r\n\t\t\t\t\tif (nodoViejo) {\r\n\t\t\t\t\t\tnodoNuevo.loc = nodoViejo.loc;\r\n\r\n\t\t\t\t\t\t_.remove(this.stateData.nodeDataArray, (f) => f.key === nodoViejo.key);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (this.stateData.nodeDataArray.length < this.FinalDataNodes.nodeDataArray.length) {\r\n\t\t\t\tthis.FinalDataNodes.nodeDataArray.map((nodoNuevo) => {\r\n\t\t\t\t\tconst nodoViejo = this.stateData.nodeDataArray.find((x) => nodoNuevo.text == x.text);\r\n\t\t\t\t\tif (nodoViejo) {\r\n\t\t\t\t\t\tnodoNuevo.loc = nodoViejo.loc;\r\n\r\n\t\t\t\t\t\t_.remove(this.stateData.nodeDataArray, (f) => f.key === nodoViejo.key);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// nodeIsExistinInPropertyOfNode(node: INodeDataArray, finalDataNodes: InitialStateOfData) {\r\n\t// \tif (this.stateData) {\r\n\t// \t\tconst resul = this.stateData.nodeDataArray.find((f) => node.text === f.text || node.key === f.key);\r\n\t// \t\t_.remove(this.stateData.nodeDataArray, (x) => x.key === resul?.key);\r\n\t// \t\tif (resul) {\r\n\t// \t\t\treturn resul;\r\n\t// \t\t}\r\n\t// \t}\r\n\t// \treturn false;\r\n\t// }\r\n\t// relationIsExistinInOfRelations(node: IlinkDataArray, finalDataNodes: InitialStateOfData) {\r\n\t// \tconst result = finalDataNodes.linkDataArray.some((f) => (node.Key === f.Key || node.text === f.text) && node.from === f.from && node.to === f.to);\r\n\t// \tif (result) {\r\n\t// \t\treturn result;\r\n\t// \t}\r\n\t// \treturn false;\r\n\t// }\r\n\r\n\tActionsFunctions(x: any, stateData: any) {\r\n\t\tconsole.log(\"🚀 ~ file: myFunctions.ts ~ line 418 ~ ActionsFunctionsClass ~ ActionsFunctions ~ stateData\", stateData);\r\n\t\tthis.FinalDataNodes = this.initialData();\r\n\r\n\t\tthis.stateData = JSON.parse(JSON.stringify(stateData));\r\n\r\n\t\tthis.Keys = 0;\r\n\t\tthis.KeysLink = 0;\r\n\t\tthis.totalLocation = 0;\r\n\t\tthis.arrayOfComposites = [];\r\n\t\t//this.initialData();\r\n\t\t// const resul = this.stateData.nodeDataArray.find((f) => f.group! > 0 && f.isGroup === true);\r\n\t\t// if (resul) {\r\n\t\t// \t_.remove(this.stateData.nodeDataArray, (x) => x.group === resul.key);\r\n\t\t// }\r\n\t\tthis.ArrayOfNodes = {\r\n\t\t\tEntities: [],\r\n\t\t\tlinks: [],\r\n\t\t};\r\n\t\tif (x) {\r\n\t\t\tconst data: RootObject = x;\r\n\r\n\t\t\tlet Entity = data.Entity;\r\n\t\t\tconst Relationship = data.Relationship || [];\r\n\t\t\tconst Composite = data.Composite || [];\r\n\t\t\tComposite?.map((x: Composite) => {\r\n\t\t\t\tthis.compositeAction(x);\r\n\t\t\t});\r\n\t\t\tEntity?.map((x: Entity) => {\r\n\t\t\t\tthis.entityAction(x);\r\n\t\t\t});\r\n\t\t\tRelationship?.map((x: Relationship) => {\r\n\t\t\t\tthis.RelationshipAction(x);\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.nodeIsExistinInDataNode();\r\n\t\t//console.log(this.FinalDataNodes);\r\n\t\treturn this.FinalDataNodes;\r\n\t}\r\n}\r\n","import _ from \"lodash\";\r\nimport { Children6, Children9, Composite, Entity, PropertyEntity, Relation, Relationship, RootObject } from \"./IParse\";\r\nexport function markInputErrors(lexErrors: any, parseErrors: any, inputEditor: any, inputEditorMark: any[], setInputMarket: any) {\r\n\ttry {\r\n\t\tvar start, end, marker;\r\n\t\tlet inputEditorMarkers: any[] = inputEditorMark;\r\n\t\t_.forEach(inputEditorMarkers, function (currMarker) {\r\n\t\t\tcurrMarker.clear();\r\n\t\t});\r\n\t\tinputEditorMarkers = [];\r\n\t\t_.forEach(lexErrors, function (currLexError) {\r\n\t\t\tstart = { line: currLexError.line - 1, ch: currLexError.column - 1 };\r\n\t\t\tend = {\r\n\t\t\t\tline: currLexError.line - 1,\r\n\t\t\t\tch: currLexError.column - 1 + currLexError.length,\r\n\t\t\t};\r\n\t\t\tmarker = inputEditor.markText(start, end, {\r\n\t\t\t\tclassName: \"markTextError\",\r\n\t\t\t\ttitle: currLexError.message,\r\n\t\t\t});\r\n\t\t\tinputEditorMarkers.push(marker);\r\n\t\t});\r\n\t\t_.forEach(parseErrors, function (currParserError) {\r\n\t\t\tif (!isNaN(currParserError.token.startLine) \r\n\t\t\t&& !isNaN(currParserError.token.startOffset) \r\n\t\t\t&& !isNaN(currParserError.token.endOffset) \r\n\t\t\t&& !isNaN(currParserError.token.endLine)){\r\n\t\t\t\tstart = {\r\n\t\t\t\t\tline: currParserError.token.startLine - 1,\r\n\t\t\t\t\tch: currParserError.token.startColumn - 1,\r\n\t\t\t\t};\r\n\r\n\t\t\tvar lastToken = currParserError.token;\r\n\t\t\tif (!_.isEmpty(currParserError.resyncedTokens)) {\r\n\t\t\t\tconst x: any = _.max(currParserError.resyncedTokens);\r\n\t\t\t\tlastToken = x.startOffset;\r\n\t\t\t}\r\n\r\n\t\t\tend = {\r\n\t\t\t\tline: lastToken.endLine\r\n\t\t\t\t\t? lastToken.endLine - 1\r\n\t\t\t\t\t: // assume startLine === endLine if we endLine is not tracked\r\n\t\t\t\t\t  lastToken.startLine - 1,\r\n\t\t\t\tch: lastToken.endColumn\r\n\t\t\t\t\t? lastToken.endColumn\r\n\t\t\t\t\t: // compute the endColumn ourselves\r\n\t\t\t\t\t  lastToken.startColumn + lastToken.image.length,\r\n\t\t\t};\r\n\t\t\tmarker = inputEditor.markText(start, end, {\r\n\t\t\t\tclassName: \"markTextError\",\r\n\t\t\t\ttitle: currParserError?.message,\r\n\t\t\t});\r\n\r\n\t\t\tinputEditorMarkers.push(marker);\r\n\t\t}\r\n\t\t});\r\n\r\n\t\t//console.log(inputEditorMarkers);\r\n\t\tsetInputMarket(inputEditorMarkers);\r\n\t} catch (e) {\r\n\t\tconsole.log(e);\r\n\t}\r\n}\r\n//inputEditor.on(\"change\", _.debounce(onInputEditorContentChange, 250))\r\nexport function onInputEditorContentChange(inputEditor: any, inputEditorMarkers: any, setInputMarket: any, lex: any) {\r\n\tvar parseResult, printResult;\r\n\r\n\t// function lex(text) {\r\n\t//     var lexResult = lexer.tokenize(text)\r\n\t//     return lexResult\r\n\t// }\r\n\r\n\t// function parse(lexResult, startRuleName) {\r\n\t//     parser.reset()\r\n\t//     parser.input = lexResult.tokens\r\n\t//     var value = parser[startRuleName]()\r\n\t//     return {value: value, parseErrors: parser.errors}\r\n\t// }\r\n\r\n\t// parserOutput.setValue(\"\")\r\n\t// var lexResult = lex(inputEditor.getValue())\r\n\t// may be falsy if the example is for the lexer only\r\n\r\n\tmarkInputErrors(lex.lexErrors, lex.parseErrors, inputEditor, inputEditorMarkers, setInputMarket);\r\n}\r\nexport function FindErrors(codemirror: any, inputEditorMark: any[], setInputMarket: any, datafind: any) {\r\n\tlet inputEditorMarkers: any[] = inputEditorMark;\r\n\t_.forEach(inputEditorMarkers, function (currMarker) {\r\n\t\tcurrMarker.clear();\r\n\t});\r\n\tinputEditorMarkers = [];\r\n\tconst data: RootObject = datafind;\r\n\tconsole.log(data);\r\n\tlet Entity = data.Entity;\r\n\tconst Relationship = data.Relationship || [];\r\n\tconst Composite = data.Composite || [];\r\n\tlet mapOfObjects = new Map<string, object>();\r\n\tlet mapOfRepeatsObjects = new Map<string, object>();\r\n\tlet repeat = 0;\r\n\tComposite?.map((x: Composite) => {\r\n\t\tif (mapOfObjects.has(x.children.StringEntity[0].image)) {\r\n\t\t\tmapOfRepeatsObjects.set(x.children.StringEntity[0].image, x);\r\n\t\t} else {\r\n\t\t\tmapOfObjects.set(x.children.StringEntity[0].image, x);\r\n\t\t}\r\n\t});\r\n\tEntity?.map((x: Entity) => {\r\n\t\tif (mapOfObjects.has(x.children.StringEntity[0].image)) {\r\n\t\t\tmapOfRepeatsObjects.set(x.children.StringEntity[0].image, x);\r\n\t\t} else {\r\n\t\t\tmapOfObjects.set(x.children.StringEntity[0].image, x);\r\n\t\t}\r\n\t});\r\n\tRelationship?.map((x: Relationship) => {\r\n\t\tif (mapOfObjects.has(x.children.StringEntity[0].image)) {\r\n\t\t\tmapOfRepeatsObjects.set(x.children.StringEntity[0].image, x);\r\n\t\t} else {\r\n\t\t\tmapOfObjects.set(x.children.StringEntity[0].image, x);\r\n\t\t}\r\n\t});\r\n\tmapOfRepeatsObjects?.forEach((x: any) => {\r\n\t\trepeat = repeat + 1;\r\n\t\tconst start = {\r\n\t\t\tline: x.children.StringEntity[0].startLine - 1,\r\n\t\t\tch: x.children.StringEntity[0].startColumn - 1,\r\n\t\t};\r\n\r\n\t\tconst end = {\r\n\t\t\tline: x.children.StringEntity[0].endLine - 1,\r\n\t\t\tch: x.children.StringEntity[0].endColumn,\r\n\t\t};\r\n\r\n\t\tconst marker = codemirror.markText(start, end, {\r\n\t\t\tclassName: \"markTextError\",\r\n\t\t\ttitle: \"Elemento repetido\",\r\n\t\t});\r\n\t\tinputEditorMarkers.push(marker);\r\n\t});\r\n\r\n\tsetInputMarket(inputEditorMarkers);\r\n\treturn repeat;\r\n}\r\n","import { parseJson } from \"./MyLex\";\r\nimport assert from \"assert\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport \"./parser.css\";\r\nimport { ActionsFunctionsClass } from \"./myFunctions\";\r\nimport CodeMirror from \"@uiw/react-codemirror\";\r\nimport \"codemirror/addon/display/autorefresh\";\r\nimport \"codemirror/addon/comment/comment\";\r\nimport \"codemirror/addon/edit/matchbrackets\";\r\nimport \"codemirror/keymap/sublime\";\r\nimport \"codemirror/theme/dracula.css\";\r\nimport { stringExample } from \"./example\";\r\nimport { FindErrors, onInputEditorContentChange } from \"./errors\";\r\nimport _, { initial } from \"lodash\";\r\nimport { DataOfNodes } from \"../text\";\r\nimport React from \"react\";\r\n/*interface IParserGenerator {\r\n  text: string;\r\n}*/\r\n\r\nexport const ParserGenerator = ({ changeStateCallback, stateData, textoState,setTextoState }: any) => {\r\n\t/*const createDataNodes=()=>{\r\n    changeStateCallback();\r\n  }*/\r\n\tlet action: ActionsFunctionsClass = useMemo(() => new ActionsFunctionsClass(), []);\r\n\r\n\t//let action:ActionsFunctionsClass=new ActionsFunctionsClass()\r\n\t/* console.log(changeStateCallback);\r\n  console.log(nodeData);*/\r\n\tconst IniState = {\r\n\t\tnodeDataArray: [],\r\n\t\tlinkDataArray: [\r\n\t\t\t// { key: -1, from: 0, to: 1, },\r\n\t\t\t// { key: -2, from: 0, to: 2 },\r\n\t\t\t// { key: -3, from: 1, to: 1 },\r\n\t\t\t// { key: -4, from: 2, to: 3 },\r\n\t\t\t// { key: -5, from: 3, to: 0 }//text: \"( T , S )\",align: new go.Spot(1, 0, 5, 5),\r\n\t\t],\r\n\t\tmodelData: {\r\n\t\t\tcanRelink: true,\r\n\t\t},\r\n\t\tselectedData: null,\r\n\t\tskipsDiagramUpdate: false,\r\n\t};\r\n\r\n\tconst [inputEditorMarker, setInputEditorMarker] = useState<any[]>([]);\r\n\t// const [texto, setTexto] = useState<string>(\"COMPOSITE domicilio {ciudad,calle,numero};\"\r\n\t// +\" RELATIONSHIP compro{    factura (1, 1),    persona (1, N)};\"\r\n\t// +\"ENTITY proveedor CHILD OF persona{cuit IDENTIFIER };\"\r\n\t// +\"ENTITY persona COVERAGE (PARTIAL, OVERLAY){documento IDENTIFIER, cuil IDENTIFIER,nacimiento,apellido,nombre,    celular (0,1),   domicilio  }\");\r\n\t// const [texto, setTexto] = useState<string>(stringExample);\r\n\tconst handleSubmit = (lexAndParseResult: any, instance: CodeMirror.Editor) => {\r\n\t\ttry {\r\n\t\t\tconsole.log(\"🚀 ~ file: ParserGenerator.tsx ~ line 60 ~ useEffect ~ stateData\", stateData);\r\n\t\t\tconsole.log(\"🚀 ~ file: ParserGenerator.tsx ~ line 27 ~ handleSubmit ~ ñexAndParseResult.lexErrors.length\", lexAndParseResult.lexErrors.length);\r\n\t\t\tassert.strictEqual(lexAndParseResult.lexErrors.length, 0);\r\n\t\t\tconsole.log(\"🚀 ~ file: ParserGenerator.tsx ~ line 29 ~ handleSubmit ~ lexAndParseResult.parseErrors\", lexAndParseResult.parseErrors);\r\n\r\n\t\t\tassert.strictEqual(lexAndParseResult.parseErrors.length, 0);\r\n\t\t\tconsole.log(\"🚀 ~ file: ParserGenerator.tsx ~ line 32 ~ handleSubmit ~ lexAndParseResult\", lexAndParseResult);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t\tif (lexAndParseResult.cst &&(lexAndParseResult?.parseErrors?.length === 0) && (lexAndParseResult?.lexErrors?.length === 0)) {\r\n\t\t\tconst FindRepeatsWords = FindErrors(instance, inputEditorMarker, setInputEditorMarker, lexAndParseResult.cst.children);\r\n\t\t\tconsole.log(FindRepeatsWords);\r\n\t\t\tif (FindRepeatsWords === 0) {\r\n\t\t\t\treturn lexAndParseResult.cst.children;\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n\tconst CreateTree = (children: any, stateData: any,textoo:string) => {\r\n\t\tconst result = action.ActionsFunctions(children, stateData);\r\n\r\n\t\tif (result) {\r\n\t\t\t//setState(lexAndParseResult.cst.children);\r\n\t\t\tchangeStateCallback(result,textoo);\r\n\t\t}\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tconsole.log(inputEditorMarker);\r\n\t}, [inputEditorMarker]);\r\n\r\n\t//{ \"arr\": [1,2,3], \"obj\": {\"num\":666}}\r\n\tconst handleChange = React.useCallback(\r\n\t\t(instance: CodeMirror.Editor, change: any) => {\r\n\t\t\tsetTextoState(instance.getValue())\r\n\t\t\tconst lexAndParseResult = parseJson(instance.getValue());\r\n\t\t    onInputEditorContentChange(instance, inputEditorMarker, setInputEditorMarker, lexAndParseResult);\r\n\t\t\tconst children = handleSubmit(lexAndParseResult, instance);\r\n\t\t\tif (children) {\r\n\t\t\t\tCreateTree(children, stateData,instance.getValue());\r\n\t\t\t}\r\n\t\t},\r\n\t\t[stateData, inputEditorMarker, handleSubmit]\r\n\t);\r\n\tconst debo = useMemo(() => _.debounce(handleChange, 2000), [handleChange]);\r\n\r\n\t// const ref = useRef(initialValue)\r\n\r\n\treturn (\r\n\t\t<div className=\"w-full h-full\" style={{minWidth:\"400px\"}}>\r\n\t\t\t{/* <textarea\r\n            style={{width:'100%'}}\r\n            value={texto}\r\n            \r\n            onChange={handleChange}\r\n          /> */}\r\n\t\t\t<CodeMirror\r\n\t\t\t\tvalue={textoState}\r\n\t\t\t\tonChange={debo}\r\n\t\t\t\toptions={{\r\n\t\t\t\t\tmode: \"text\",\r\n\t\t\t\t\tlineNumbers: true,\r\n\t\t\t\t\ttheme: \"dracula\",\r\n\t\t\t\t\ttabSize: 1,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t{/* <input type=\"submit\" value=\"Submit\" className=\"submit-btn\"/> */}\r\n\t\t</div>\r\n\t);\r\n};\r\n","/*\n *  Copyright (C) 1998-2021 by Northwoods Software Corporation. All Rights Reserved.\n */\n\nimport * as go from \"gojs\";\nimport { produce } from \"immer\";\nimport * as React from \"react\";\n\nimport { DiagramWrapper } from \"./components/DiagramWrapper\";\nimport { SelectionInspector } from \"./components/SelectionInspector\";\n\nimport \"./App.css\";\nimport { useState } from \"react\";\nimport { ParserGenerator } from \"./parser/ParserGenerator\";\nimport \"./text\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { DataOfNodes } from \"./text\";\nimport { saveAs } from \"file-saver\";\n/**\n * Use a linkDataArray since we'll be using a GraphLinksModel,\n * and modelData for demonstration purposes. Note, though, that\n * both are optional props in ReactDiagram.\n */\ninterface AppState {\n\tnodeDataArray: Array<go.ObjectData>;\n\tlinkDataArray: Array<go.ObjectData>;\n\tmodelData: go.ObjectData;\n\tselectedData: go.ObjectData | null;\n\tskipsDiagramUpdate: boolean;\n}\n\nconst App = (props: object) => {\n\t// Maps to store key -> arr index for quick lookups\n\tconst mapNodeKeyIdx: Map<go.Key, number> = new Map<go.Key, number>();\n\tconst mapLinkKeyIdx: Map<go.Key, number> = new Map<go.Key, number>();\n\n\tconst IniState = {\n\t\tnodeDataArray: [],\n\t\tlinkDataArray: [\n\t\t\t// { key: -1, from: 0, to: 1, },\n\t\t\t// { key: -2, from: 0, to: 2 },\n\t\t\t// { key: -3, from: 1, to: 1 },\n\t\t\t// { key: -4, from: 2, to: 3 },\n\t\t\t// { key: -5, from: 3, to: 0 }//text: \"( T , S )\",align: new go.Spot(1, 0, 5, 5),\n\t\t],\n\t\tmodelData: {\n\t\t\tcanRelink: true,\n\t\t},\n\t\tselectedData: null,\n\t\tskipsDiagramUpdate: false,\n\t};\n\tconst example = {\n\t\tnodeDataArray: [\n\t\t\t{\n\t\t\t\tkey: 0,\n\t\t\t\ttext: \"Entity\",\n\t\t\t\tcolor: \"lightblue\",\n\t\t\t\tfig: \"RoundedRectangle\",\n\t\t\t\tloc: \"-200 0\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 1,\n\t\t\t\ttext: \"Suppliers\",\n\t\t\t\tcolor: \"orange\",\n\t\t\t\tfig: \"RoundedRectangle\",\n\t\t\t\tloc: \"200 0\",\n\t\t\t\tisGroup: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 2,\n\t\t\t\ttext: \"Gamma\",\n\t\t\t\tcolor: \"transparent\",\n\t\t\t\tfig: \"Diamond\",\n\t\t\t\tmargin: 2,\n\t\t\t\tloc: \"0 0\",\n\t\t\t},\n\t\t\t//  { key: 3, text: 'Delta', color: 'pink' ,fig:\"RoundedRectangle\"},\n\t\t\t{\n\t\t\t\tkey: 4,\n\t\t\t\ttype: \"H\",\n\t\t\t\ttext: \"Id\",\n\t\t\t\tmargin: 5,\n\t\t\t\tcolor: \"transparent\",\n\t\t\t\tloc: \"200 50\",\n\t\t\t\tgroup: 1,\n\t\t\t\tfig: \"Ellipse\",\n\t\t\t\theight: 15,\n\t\t\t\twidth: 15,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 5,\n\t\t\t\ttext: \"( T , S )\",\n\t\t\t\tcolor: \"Green\",\n\t\t\t\tmargin: 0,\n\t\t\t\tfig: \"TriangleUp\",\n\t\t\t\tloc: \"0 200\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 6,\n\t\t\t\ttext: \"Entity\",\n\t\t\t\tcolor: \"lightblue\",\n\t\t\t\tfig: \"RoundedRectangle\",\n\t\t\t\tloc: \"0 200\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 7,\n\t\t\t\ttext: \"Suppliers\",\n\t\t\t\tcolor: \"orange\",\n\t\t\t\tfig: \"RoundedRectangle\",\n\t\t\t\tloc: \"-400 200\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 8,\n\t\t\t\ttext: \"Suppliers\",\n\t\t\t\tcolor: \"orange\",\n\t\t\t\tfig: \"RoundedRectangle\",\n\t\t\t\tloc: \"-600 200\",\n\t\t\t},\n\t\t],\n\t\tlinkDataArray: [\n\t\t\t// { key: -1, from: 0, to: 1, },\n\t\t\t// { key: -2, from: 0, to: 2 },\n\t\t\t// { key: -3, from: 1, to: 1 },\n\t\t\t// { key: -4, from: 2, to: 3 },\n\t\t\t// { key: -5, from: 3, to: 0 }//text: \"( T , S )\",align: new go.Spot(1, 0, 5, 5),\n\t\t\t{ Key: -1, from: 0, to: 2, text: \"0..N\", toText: \"1\" },\n\t\t\t{ Key: -2, from: 1, to: 2, text: \"1\", toText: \"1\" },\n\t\t\t{\n\t\t\t\tkey: -3,\n\t\t\t\tfrom: 1,\n\t\t\t\tto: 4,\n\t\t\t\ttext: \"(0,N)\",\n\t\t\t\tarrow: \"Standard\",\n\t\t\t\trouting: \"N\",\n\t\t\t},\n\t\t\t{ Key: -4, from: 0, to: 5, fromSpot: \"Bottom\", toSpot: \"Top\" },\n\t\t\t{ Key: -5, from: 5, to: 6, fromSpot: \"Bottom\", toSpot: \"Top\" },\n\t\t\t{ key: -6, from: 5, to: 7, fromSpot: \"Bottom\", toSpot: \"Top\" },\n\t\t\t{ key: -7, from: 5, to: 8, fromSpot: \"Bottom\", toSpot: \"Top\" },\n\t\t],\n\t\tmodelData: {\n\t\t\tcanRelink: true,\n\t\t},\n\t\tselectedData: null,\n\t\tskipsDiagramUpdate: false,\n\t};\n\n\tconst [state, setState] = useState<any>(IniState);\n\tconst [textoState, setTextoState] = useState<string>(\"\");\n\tconst [animation, setAnimationState] = useState(true);\n\t// init maps\n\t// bind handler methods\n\n\t/**\n\t * Update map of node keys to their index in the array.\n\t */\n\tconst refreshNodeIndex = (nodeArr: Array<go.ObjectData>) => {\n\t\tmapNodeKeyIdx.clear();\n\t\tnodeArr?.forEach((n: go.ObjectData, idx: number) => {\n\t\t\tmapNodeKeyIdx.set(n.key, idx);\n\t\t});\n\t};\n\n\t/**\n\t * Update map of link keys to their index in the array.\n\t */\n\tconst refreshLinkIndex = (linkArr: Array<go.ObjectData>) => {\n\t\tmapLinkKeyIdx.clear();\n\t\tlinkArr?.forEach((l: go.ObjectData, idx: number) => {\n\t\t\tmapLinkKeyIdx.set(l.key, idx);\n\t\t});\n\t};\n\n\t/**\n\t * Handle any relevant DiagramEvents, in case just selection changes.\n\t * On ChangedSelection, find the corresponding data and set the selectedData state.\n\t * @param e a GoJS DiagramEvent\n\t */\n\tconst handleDiagramEvent = (e: go.DiagramEvent) => {\n\t\tconst name = e.name;\n\n\t\tswitch (name) {\n\t\t\tcase \"ChangedSelection\": {\n\t\t\t\tconst sel = e.subject.first();\n\t\t\t\tsetState(\n\t\t\t\t\tproduce((draft: AppState) => {\n\t\t\t\t\t\tif (sel) {\n\t\t\t\t\t\t\tif (sel instanceof go.Node) {\n\t\t\t\t\t\t\t\tconsole.log(\"cambie\");\n\t\t\t\t\t\t\t\tconst idx = mapNodeKeyIdx.get(sel.key);\n\t\t\t\t\t\t\t\tif (idx !== undefined && idx >= 0) {\n\t\t\t\t\t\t\t\t\tconst nd = draft.nodeDataArray[idx];\n\n\t\t\t\t\t\t\t\t\tdraft.selectedData = nd;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (sel instanceof go.Link) {\n\t\t\t\t\t\t\t\tconst idx = mapLinkKeyIdx.get(sel.key);\n\n\t\t\t\t\t\t\t\tif (idx !== undefined && idx >= 0) {\n\t\t\t\t\t\t\t\t\tconst ld = draft.linkDataArray[idx];\n\t\t\t\t\t\t\t\t\tdraft.selectedData = ld;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdraft.selectedData = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/**\n\t * Handle GoJS model changes, which output an object of data changes via Model.toIncrementalData.\n\t * method iterates over those changes and updates state to keep in sync with the GoJS model.\n\t * @param obj a JSON-formatted string\n\t */\n\n\tconst handleModelChange = (obj: go.IncrementalData) => {\n\t\tconst insertedNodeKeys = obj.insertedNodeKeys;\n\t\tconst modifiedNodeData = obj.modifiedNodeData;\n\t\tconst removedNodeKeys = obj.removedNodeKeys;\n\t\tconst insertedLinkKeys = obj.insertedLinkKeys;\n\t\tconst modifiedLinkData = obj.modifiedLinkData;\n\t\tconst removedLinkKeys = obj.removedLinkKeys;\n\t\tconst modifiedModelData = obj.modelData;\n\n\t\t// maintain maps of modified data so insertions don't need slow lookups\n\t\tconst modifiedNodeMap = new Map<go.Key, go.ObjectData>();\n\t\tconst modifiedLinkMap = new Map<go.Key, go.ObjectData>();\n\t\tsetState(\n\t\t\tproduce((draft: AppState) => {\n\t\t\t\tlet narr = draft.nodeDataArray;\n\n\t\t\t\tif (modifiedNodeData) {\n\t\t\t\t\tmodifiedNodeData.forEach((nd: go.ObjectData) => {\n\t\t\t\t\t\tmodifiedNodeMap.set(nd.key, nd);\n\t\t\t\t\t\tconst idx = mapNodeKeyIdx.get(nd.key);\n\t\t\t\t\t\tif (idx !== undefined && idx >= 0) {\n\t\t\t\t\t\t\tnarr[idx] = nd;\n\t\t\t\t\t\t\tif (draft.selectedData && draft.selectedData.key === nd.key) {\n\t\t\t\t\t\t\t\tdraft.selectedData = nd;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (insertedNodeKeys) {\n\t\t\t\t\tinsertedNodeKeys.forEach((key: go.Key) => {\n\t\t\t\t\t\tconst nd = modifiedNodeMap.get(key);\n\t\t\t\t\t\tconst idx = mapNodeKeyIdx.get(key);\n\t\t\t\t\t\tif (nd && idx === undefined) {\n\t\t\t\t\t\t\t// nodes won't be added if they already exist\n\t\t\t\t\t\t\tmapNodeKeyIdx.set(nd.key, narr.length);\n\t\t\t\t\t\t\tnarr.push(nd);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (removedNodeKeys) {\n\t\t\t\t\tnarr = narr.filter((nd: go.ObjectData) => {\n\t\t\t\t\t\tif (removedNodeKeys.includes(nd.key)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\tdraft.nodeDataArray = narr;\n\t\t\t\t\trefreshNodeIndex(narr);\n\t\t\t\t}\n\n\t\t\t\tlet larr = draft.linkDataArray;\n\t\t\t\tif (modifiedLinkData) {\n\t\t\t\t\tmodifiedLinkData.forEach((ld: go.ObjectData) => {\n\t\t\t\t\t\tmodifiedLinkMap.set(ld.key, ld);\n\t\t\t\t\t\tconst idx = mapLinkKeyIdx.get(ld.key);\n\t\t\t\t\t\tif (idx !== undefined && idx >= 0) {\n\t\t\t\t\t\t\tlarr[idx] = ld;\n\t\t\t\t\t\t\tif (draft.selectedData && draft.selectedData.key === ld.key) {\n\t\t\t\t\t\t\t\tdraft.selectedData = ld;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (insertedLinkKeys) {\n\t\t\t\t\t/*insertedLinkKeys.forEach((key: go.Key) => {\n            const ld = modifiedLinkMap.get(key);\n            const idx = mapLinkKeyIdx.get(key);\n            if (ld && idx === undefined) {  // links won't be added if they already exist\n              mapLinkKeyIdx.set(ld.key, larr.length);\n              larr.push(ld);\n            }\n          });*/\n\t\t\t\t}\n\t\t\t\tif (removedLinkKeys) {\n\t\t\t\t\tlarr = larr.filter((ld: go.ObjectData) => {\n\t\t\t\t\t\tif (removedLinkKeys.includes(ld.key)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\tdraft.linkDataArray = larr;\n\t\t\t\t\trefreshLinkIndex(larr);\n\t\t\t\t}\n\t\t\t\t// handle model data changes, for now just replacing with the supplied object\n\t\t\t\tif (modifiedModelData) {\n\t\t\t\t\tdraft.modelData = modifiedModelData;\n\t\t\t\t}\n\t\t\t\tdraft.skipsDiagramUpdate = true; // the GoJS model already knows about these updates\n\t\t\t})\n\t\t);\n\t};\n\n\t/**\n\t * Handle inspector changes, and on input field blurs, update node/link data state.\n\t * @param path the path to the property being modified\n\t * @param value the new value of that property\n\t * @param isBlur whether the input event was a blur, indicating the edit is complete\n\t */\n\tconst handleInputChange = (path: string, value: string, isBlur: boolean) => {\n\t\tsetState(\n\t\t\tproduce((draft: AppState) => {\n\t\t\t\tconst data = draft.selectedData as go.ObjectData; // only reached if selectedData isn't null\n\t\t\t\tdata[path] = value;\n\t\t\t\tif (isBlur) {\n\t\t\t\t\tconst key = data.key;\n\t\t\t\t\tif (key < 0) {\n\t\t\t\t\t\t// negative keys are links\n\t\t\t\t\t\tconst idx = mapLinkKeyIdx.get(key);\n\t\t\t\t\t\tif (idx !== undefined && idx >= 0) {\n\t\t\t\t\t\t\tdraft.linkDataArray[idx] = data;\n\t\t\t\t\t\t\tdraft.skipsDiagramUpdate = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst idx = mapNodeKeyIdx.get(key);\n\t\t\t\t\t\tif (idx !== undefined && idx >= 0) {\n\t\t\t\t\t\t\tdraft.nodeDataArray[idx] = data;\n\t\t\t\t\t\t\tdraft.skipsDiagramUpdate = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t};\n\n\t/**\n\t * Handle changes to the checkbox on whether to allow relinking.\n\t * @param e a change event from the checkbox\n\t */\n\tconst handleRelinkChange = (e: any) => {\n\t\tconst target = e.target;\n\t\tconst value = target.checked;\n\t\tsetState({\n\t\t\t...state,\n\t\t\tmodelData: { canRelink: value },\n\t\t\tskipsDiagramUpdate: false,\n\t\t});\n\t};\n\n\trefreshNodeIndex(state.nodeDataArray);\n\trefreshLinkIndex(state.linkDataArray);\n\tconst changeStateCallback = React.useCallback(async (childData: any, texto: string) => {\n\t\tsetState(IniState);\n\t\tsetTimeout(() => {\n\t\t\trefreshNodeIndex(childData.nodeDataArray);\n\t\t\trefreshLinkIndex(childData.linkDataArray);\n\t\t\tsetState(childData);\n\t\t\tsetTextoState(texto);\n\t\t}, 10);\n\t}, []);\n\tconst guardarTodo = () => {\n\t\tconst arr = [JSON.stringify(state), \"|||||\", textoState];\n\t\tconst bloc = new Blob(arr, { type: \"text/plain;charset=utf-8\" });\n\t\tsaveAs(bloc, \"myArchivo.txt\");\n\t};\n\tconst selectedData = state.selectedData;\n\tReact.useEffect(() => {\n\t\tconsole.log(state);\n\t}, [selectedData]);\n\tlet inspector;\n\tif (selectedData !== null) {\n\t\tinspector = <SelectionInspector selectedData={state.selectedData} onInputChange={handleInputChange} />;\n\t}\n\t// Create a reference to the hidden file input element\n\tconst hiddenFileInput: any = React.useRef(null);\n\n\t// Programatically click the hidden file input element\n\t// when the Button component is clicked\n\tconst handleClick = (event: any) => {\n\t\thiddenFileInput.current.click();\n\t};\n\tconst readFile = (e: any) => {\n\t\ttry{\n\t\tconst file = e.target.files[0];\n\t\tconst filereader = new FileReader();\n\t\tfilereader.readAsText(file);\n\t\tfilereader.onload = () => {\n\t\t\tconst result = filereader.result as string;\n\t\t\tconst resultado = result.split(\"|||||\");\n\t\t\tconsole.log(\"resultado\", JSON.parse(resultado[0]));\n\t\t\tconsole.log(\"resultado texto\", resultado[1]);\n\t\t\tsetState(JSON.parse(resultado[0]));\n\t\t\tsetTextoState(resultado[1]);\n\t\t};\n\t\tfilereader.onerror = () => {\n\t\t\tconsole.log(filereader.error);\n\t\t};\n\t}catch(e){\n\t\tconsole.log(\"error\");\n\t}\n\t\n\t};\n\n\treturn (\n\t\t<div className=\"w-screen h-screen\">\n\t\t\t<nav className=\"bg-gray-800 z-50 w-full flex p-2 gap-8\">\n\t\t\t\t<div className=\"text-gray-200 text-2xl\"> BDD </div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"bg-red-500 shadow-md hover:bg-red-700 \n\t\t\t\ttext-white text-center py-1 px-4 rounded-full\"\n\t\t\t\t>\n\t\t\t\t\tNuevo\n\t\t\t\t</button>\n\t\t\t\t<input type=\"file\" name=\"Importar\" onChange={readFile} ref={hiddenFileInput} multiple={false} className=\"hidden\" />\n\t\t\t\t<button\n\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\tclassName=\"bg-blue-500 shadow-md hover:bg-blue-700 \n\t\t\t\ttext-white text-center py-1 px-4 rounded-full\"\n\t\t\t\t>\n\t\t\t\t\tImportar\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={guardarTodo}\n\t\t\t\t\tclassName=\"bg-green-500 shadow-md hover:bg-green-700 \n\t\t\t\ttext-white text-center py-1 px-4 rounded-full\"\n\t\t\t\t>\n\t\t\t\t\tGuardar\n\t\t\t\t</button>\n\t\t\t</nav>\n\t\t\t<div className=\"relative\" style={{ height: \"97vh\", width: \"100vw\" }}>\n\t\t\t\t<div className=\"absolute flex flex-nowrap z-10\" style={{ height: \"100%\" }}>\n\t\t\t\t\t<CSSTransition\n\t\t\t\t\t\tin={animation}\n\t\t\t\t\t\ttimeout={800}\n\t\t\t\t\t\tclassName=\"animate__animated\"\n\t\t\t\t\t\tclassNames={{\n\t\t\t\t\t\t\tenter: \"animate__fadeInLeft animate__fast\",\n\t\t\t\t\t\t\texit: \"animate__fadeOutLeft animate__fast\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tunmountOnExit\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"w-5/6 md:w-full\">\n\t\t\t\t\t\t\t<ParserGenerator changeStateCallback={changeStateCallback} stateData={state} textoState={textoState} setTextoState={setTextoState}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"h-28 text-xl mt-2 rounded-full flex items-center bg-gray-700 text-white\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsetAnimationState((state) => !state);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{\"<\"}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full h-full\">\n\t\t\t\t\t<DiagramWrapper\n\t\t\t\t\t\tnodeDataArray={state.nodeDataArray}\n\t\t\t\t\t\tlinkDataArray={state.linkDataArray}\n\t\t\t\t\t\tmodelData={state.modelData}\n\t\t\t\t\t\tskipsDiagramUpdate={state.skipsDiagramUpdate}\n\t\t\t\t\t\tonDiagramEvent={handleDiagramEvent}\n\t\t\t\t\t\tonModelChange={handleModelChange}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{/* <label>\n          Allow Relinking?\n          <input\n            type=\"checkbox\"\n            id=\"relink\"\n            checked={state.modelData.canRelink}\n            onChange={handleRelinkChange}\n          />\n        </label> */}\n\t\t\t\t{inspector}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nReactDOM.render(<App />, document.getElementById('root'));\n","var map = {\n\t\"./apl/apl.js\": [\n\t\t122,\n\t\t30\n\t],\n\t\"./asciiarmor/asciiarmor.js\": [\n\t\t123,\n\t\t31\n\t],\n\t\"./asn.1/asn.1.js\": [\n\t\t124,\n\t\t32\n\t],\n\t\"./asterisk/asterisk.js\": [\n\t\t125,\n\t\t33\n\t],\n\t\"./brainfuck/brainfuck.js\": [\n\t\t126,\n\t\t34\n\t],\n\t\"./clike/clike.js\": [\n\t\t111,\n\t\t2\n\t],\n\t\"./clojure/clojure.js\": [\n\t\t127,\n\t\t35\n\t],\n\t\"./cmake/cmake.js\": [\n\t\t128,\n\t\t36\n\t],\n\t\"./cobol/cobol.js\": [\n\t\t129,\n\t\t37\n\t],\n\t\"./coffeescript/coffeescript.js\": [\n\t\t112,\n\t\t38\n\t],\n\t\"./commonlisp/commonlisp.js\": [\n\t\t130,\n\t\t39\n\t],\n\t\"./crystal/crystal.js\": [\n\t\t131,\n\t\t40\n\t],\n\t\"./css/css.js\": [\n\t\t108,\n\t\t1\n\t],\n\t\"./cypher/cypher.js\": [\n\t\t132,\n\t\t41\n\t],\n\t\"./d/d.js\": [\n\t\t133,\n\t\t42\n\t],\n\t\"./dart/dart.js\": [\n\t\t134,\n\t\t2,\n\t\t43\n\t],\n\t\"./diff/diff.js\": [\n\t\t135,\n\t\t44\n\t],\n\t\"./django/django.js\": [\n\t\t136,\n\t\t0,\n\t\t1,\n\t\t11\n\t],\n\t\"./dockerfile/dockerfile.js\": [\n\t\t137,\n\t\t21\n\t],\n\t\"./dtd/dtd.js\": [\n\t\t138,\n\t\t45\n\t],\n\t\"./dylan/dylan.js\": [\n\t\t139,\n\t\t46\n\t],\n\t\"./ebnf/ebnf.js\": [\n\t\t140,\n\t\t47\n\t],\n\t\"./ecl/ecl.js\": [\n\t\t141,\n\t\t48\n\t],\n\t\"./eiffel/eiffel.js\": [\n\t\t142,\n\t\t49\n\t],\n\t\"./elm/elm.js\": [\n\t\t143,\n\t\t50\n\t],\n\t\"./erlang/erlang.js\": [\n\t\t144,\n\t\t51\n\t],\n\t\"./factor/factor.js\": [\n\t\t145,\n\t\t22\n\t],\n\t\"./fcl/fcl.js\": [\n\t\t146,\n\t\t52\n\t],\n\t\"./forth/forth.js\": [\n\t\t147,\n\t\t53\n\t],\n\t\"./fortran/fortran.js\": [\n\t\t148,\n\t\t54\n\t],\n\t\"./gas/gas.js\": [\n\t\t149,\n\t\t55\n\t],\n\t\"./gfm/gfm.js\": [\n\t\t150,\n\t\t4,\n\t\t20\n\t],\n\t\"./gherkin/gherkin.js\": [\n\t\t151,\n\t\t56\n\t],\n\t\"./go/go.js\": [\n\t\t152,\n\t\t57\n\t],\n\t\"./groovy/groovy.js\": [\n\t\t153,\n\t\t58\n\t],\n\t\"./haml/haml.js\": [\n\t\t154,\n\t\t0,\n\t\t1,\n\t\t14\n\t],\n\t\"./handlebars/handlebars.js\": [\n\t\t113,\n\t\t16\n\t],\n\t\"./haskell-literate/haskell-literate.js\": [\n\t\t155,\n\t\t26\n\t],\n\t\"./haskell/haskell.js\": [\n\t\t114,\n\t\t59\n\t],\n\t\"./haxe/haxe.js\": [\n\t\t156,\n\t\t60\n\t],\n\t\"./htmlembedded/htmlembedded.js\": [\n\t\t157,\n\t\t0,\n\t\t1,\n\t\t10\n\t],\n\t\"./htmlmixed/htmlmixed.js\": [\n\t\t107,\n\t\t0,\n\t\t1,\n\t\t27\n\t],\n\t\"./http/http.js\": [\n\t\t158,\n\t\t61\n\t],\n\t\"./idl/idl.js\": [\n\t\t159,\n\t\t62\n\t],\n\t\"./javascript/javascript.js\": [\n\t\t109,\n\t\t0\n\t],\n\t\"./jinja2/jinja2.js\": [\n\t\t160,\n\t\t63\n\t],\n\t\"./jsx/jsx.js\": [\n\t\t161,\n\t\t0,\n\t\t28\n\t],\n\t\"./julia/julia.js\": [\n\t\t162,\n\t\t64\n\t],\n\t\"./livescript/livescript.js\": [\n\t\t163,\n\t\t65\n\t],\n\t\"./lua/lua.js\": [\n\t\t164,\n\t\t66\n\t],\n\t\"./markdown/markdown.js\": [\n\t\t119,\n\t\t4\n\t],\n\t\"./mathematica/mathematica.js\": [\n\t\t165,\n\t\t67\n\t],\n\t\"./mbox/mbox.js\": [\n\t\t166,\n\t\t68\n\t],\n\t\"./meta.js\": [\n\t\t38\n\t],\n\t\"./mirc/mirc.js\": [\n\t\t167,\n\t\t69\n\t],\n\t\"./mllike/mllike.js\": [\n\t\t168,\n\t\t70\n\t],\n\t\"./modelica/modelica.js\": [\n\t\t169,\n\t\t71\n\t],\n\t\"./mscgen/mscgen.js\": [\n\t\t170,\n\t\t72\n\t],\n\t\"./mumps/mumps.js\": [\n\t\t171,\n\t\t73\n\t],\n\t\"./nginx/nginx.js\": [\n\t\t172,\n\t\t74\n\t],\n\t\"./nsis/nsis.js\": [\n\t\t173,\n\t\t23\n\t],\n\t\"./ntriples/ntriples.js\": [\n\t\t174,\n\t\t75\n\t],\n\t\"./octave/octave.js\": [\n\t\t175,\n\t\t76\n\t],\n\t\"./oz/oz.js\": [\n\t\t176,\n\t\t77\n\t],\n\t\"./pascal/pascal.js\": [\n\t\t177,\n\t\t78\n\t],\n\t\"./pegjs/pegjs.js\": [\n\t\t178,\n\t\t0,\n\t\t79\n\t],\n\t\"./perl/perl.js\": [\n\t\t179,\n\t\t80\n\t],\n\t\"./php/php.js\": [\n\t\t180,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t17\n\t],\n\t\"./pig/pig.js\": [\n\t\t181,\n\t\t81\n\t],\n\t\"./powershell/powershell.js\": [\n\t\t182,\n\t\t82\n\t],\n\t\"./properties/properties.js\": [\n\t\t183,\n\t\t83\n\t],\n\t\"./protobuf/protobuf.js\": [\n\t\t184,\n\t\t84\n\t],\n\t\"./pug/pug.js\": [\n\t\t120,\n\t\t0,\n\t\t1,\n\t\t3\n\t],\n\t\"./puppet/puppet.js\": [\n\t\t185,\n\t\t85\n\t],\n\t\"./python/python.js\": [\n\t\t115,\n\t\t86\n\t],\n\t\"./q/q.js\": [\n\t\t186,\n\t\t87\n\t],\n\t\"./r/r.js\": [\n\t\t187,\n\t\t88\n\t],\n\t\"./rpm/rpm.js\": [\n\t\t188,\n\t\t89\n\t],\n\t\"./rst/rst.js\": [\n\t\t189,\n\t\t13\n\t],\n\t\"./ruby/ruby.js\": [\n\t\t110,\n\t\t90\n\t],\n\t\"./rust/rust.js\": [\n\t\t190,\n\t\t24\n\t],\n\t\"./sas/sas.js\": [\n\t\t191,\n\t\t91\n\t],\n\t\"./sass/sass.js\": [\n\t\t117,\n\t\t1,\n\t\t92\n\t],\n\t\"./scheme/scheme.js\": [\n\t\t192,\n\t\t93\n\t],\n\t\"./shell/shell.js\": [\n\t\t193,\n\t\t94\n\t],\n\t\"./sieve/sieve.js\": [\n\t\t194,\n\t\t95\n\t],\n\t\"./slim/slim.js\": [\n\t\t195,\n\t\t0,\n\t\t1,\n\t\t15\n\t],\n\t\"./smalltalk/smalltalk.js\": [\n\t\t196,\n\t\t96\n\t],\n\t\"./smarty/smarty.js\": [\n\t\t197,\n\t\t97\n\t],\n\t\"./solr/solr.js\": [\n\t\t198,\n\t\t98\n\t],\n\t\"./soy/soy.js\": [\n\t\t199,\n\t\t0,\n\t\t1,\n\t\t18\n\t],\n\t\"./sparql/sparql.js\": [\n\t\t200,\n\t\t99\n\t],\n\t\"./spreadsheet/spreadsheet.js\": [\n\t\t201,\n\t\t100\n\t],\n\t\"./sql/sql.js\": [\n\t\t202,\n\t\t101\n\t],\n\t\"./stex/stex.js\": [\n\t\t116,\n\t\t102\n\t],\n\t\"./stylus/stylus.js\": [\n\t\t121,\n\t\t5\n\t],\n\t\"./swift/swift.js\": [\n\t\t203,\n\t\t103\n\t],\n\t\"./tcl/tcl.js\": [\n\t\t204,\n\t\t104\n\t],\n\t\"./textile/textile.js\": [\n\t\t205,\n\t\t105\n\t],\n\t\"./tiddlywiki/tiddlywiki.js\": [\n\t\t206,\n\t\t106\n\t],\n\t\"./tiki/tiki.js\": [\n\t\t207,\n\t\t107\n\t],\n\t\"./toml/toml.js\": [\n\t\t208,\n\t\t108\n\t],\n\t\"./tornado/tornado.js\": [\n\t\t209,\n\t\t0,\n\t\t1,\n\t\t12\n\t],\n\t\"./troff/troff.js\": [\n\t\t210,\n\t\t109\n\t],\n\t\"./ttcn-cfg/ttcn-cfg.js\": [\n\t\t212,\n\t\t110\n\t],\n\t\"./ttcn/ttcn.js\": [\n\t\t211,\n\t\t111\n\t],\n\t\"./turtle/turtle.js\": [\n\t\t213,\n\t\t112\n\t],\n\t\"./twig/twig.js\": [\n\t\t214,\n\t\t19\n\t],\n\t\"./vb/vb.js\": [\n\t\t215,\n\t\t113\n\t],\n\t\"./vbscript/vbscript.js\": [\n\t\t216,\n\t\t114\n\t],\n\t\"./velocity/velocity.js\": [\n\t\t217,\n\t\t115\n\t],\n\t\"./verilog/verilog.js\": [\n\t\t218,\n\t\t116\n\t],\n\t\"./vhdl/vhdl.js\": [\n\t\t219,\n\t\t117\n\t],\n\t\"./vue/vue.js\": [\n\t\t220,\n\t\t0,\n\t\t1,\n\t\t5,\n\t\t3,\n\t\t9\n\t],\n\t\"./wast/wast.js\": [\n\t\t221,\n\t\t25\n\t],\n\t\"./webidl/webidl.js\": [\n\t\t222,\n\t\t118\n\t],\n\t\"./xml/xml.js\": [\n\t\t106,\n\t\t119\n\t],\n\t\"./xquery/xquery.js\": [\n\t\t223,\n\t\t120\n\t],\n\t\"./yacas/yacas.js\": [\n\t\t224,\n\t\t121\n\t],\n\t\"./yaml-frontmatter/yaml-frontmatter.js\": [\n\t\t225,\n\t\t29\n\t],\n\t\"./yaml/yaml.js\": [\n\t\t118,\n\t\t122\n\t],\n\t\"./z80/z80.js\": [\n\t\t226,\n\t\t123\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 97;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}